## ржмрж┐рж╖рзЯ: `useMemo` ржжрж┐рзЯрзЗ Performance Optimization

### ржХрзЗржи `useMemo` ржжрж░ржХрж╛рж░?

React-ржП ржпржЦржи ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, рждржЦржи рждрж╛рж░ ржнрж┐рждрж░рзЗ ржерж╛ржХрж╛ рж╕ржм ржХрж┐ржЫрзБтАФincluding ржлрж╛ржВрж╢ржи ржУ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржитАФржЖржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред
ржпржжрж┐ ржХрзЛржирзЛ ржлрж╛ржВрж╢ржи ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржмрзНржпрзЯржмрж╣рзБрж▓ (expensive) рж╣рзЯ, ржпрзЗржоржи:

- ржмрзЬ `while` рж▓рзБржк
- Complex math calculation
- Time consuming API call

рждрж╛рж╣рж▓рзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рж┐-рж░рзЗржирзНржбрж╛рж░рзЗ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЦрж╛рж░рж╛ржк рж╣рждрзЗ ржкрж╛рж░рзЗред

---

### ЁЯзк рж╕ржорж╛ржзрж╛ржи: `useMemo`

`useMemo` рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ ржПржХржЯрж┐ ржлрж╛ржВрж╢ржирзЗрж░ **рж░рж┐ржЯрж╛рж░рзНржи ржнрзНржпрж╛рж▓рзБ** ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиред
ржорж╛ржирзЗ: ржпржжрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржи рж╕рзНржЯрзЗржЯ ржирж╛ ржмржжрж▓рж╛рзЯ, рждрж╛рж╣рж▓рзЗ React ржЖржЧрзЗрж░ ржнрзНржпрж╛рж▓рзБржЯрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ, ржирждрзБржи ржХрж░рзЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржХрж░ржмрзЗ ржирж╛ред

---

### тЬЕ ржЙржжрж╛рж╣рж░ржг рзз: рж╕рж╛ржзрж╛рж░ржг ржлрж╛ржВрж╢ржи

```jsx
function isEven(num) {
  return num % 2 === 0;
}
```

ржПржЦржи ржПржЗ ржлрж╛ржВрж╢ржи ржпржжрж┐ ржЕржирзЗржХ рж╕ржорзЯ ржЦрж░ржЪ ржХрж░рзЗ, ржпрзЗржоржи:

```jsx
function isEven(num) {
  let i = 0;
  while (i < 1000000000) i++;
  return num % 2 === 0;
}
```

рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ ржкрзНрж░рждрж┐ржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ ржкрзБрж░рзЛ рж▓рзБржк ржЪрж▓ржмрзЗ, ржЕрзНржпрж╛ржк рж╣рзНржпрж╛ржВ ржХрж░рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи: useMemo ржжрж┐рзЯрзЗ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛

```jsx
const isEven = useMemo(() => {
  let i = 0;
  while (i < 1000000000) i++;
  return countOne % 2 === 0;
}, [countOne]);
```

ЁЯФБ ржПржЦрж╛ржирзЗ `[countOne]` рж╣рж▓ dependency arrayред
ржПржЗ ржнрзНржпрж╛рж▓рзБ ржирж╛ ржмржжрж▓рж╛рж▓рзЗ `useMemo` ржЖржЧрзЗрж░ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯ ржХрж░рж╛ ржнрзНржпрж╛рж▓рзБ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред

```jsx
<span>{isEven ? "Even" : "Odd"}</span>
```

---

### ржоржЬрж╛рж░ ржХржерж╛: useMemo ржирж┐ржЬрзЗржЗ тАЬexpensiveтАЭ рж╣рждрзЗ ржкрж╛рж░рзЗ

`useMemo` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗржУ React-ржХрзЗ ржПржХржЯрж╛ ржХржорзНржкрзНржпрж╛рж░рж┐ржЬржи ржХрж░рждрзЗ рж╣рзЯ:
тАЬржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржЪрзЗржЮрзНржЬ рж╣рзЯрзЗржЫрзЗ ржХрж┐ ржирж╛?тАЭ
ржПржЗ ржХрж╛ржЬржЯрж╛ржУ рж╕рж╛ржорж╛ржирзНржп ржмрзНржпрзЯржмрж╣рзБрж▓ред рждрж╛ржЗ ржЫрзЛржЯ-ржЦрж╛ржЯрзЛ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп `useMemo` ржирж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ржЗ ржнрж╛рж▓рзЛред

---

### ржЪрзЗржХ ржХрж░рзБржи ржлрж╛ржВрж╢ржи ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи рж╣рждрзЗ ржХржд рж╕ржорзЯ рж▓рж╛ржЧрзЗ

```jsx
console.time("filter array");
const visibleTodos = getFilteredTodos(todos, filter);
console.timeEnd("filter array");
```

### ржПржмржВ useMemo ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржХржд рж╕ржорзЯ рж▓рж╛ржЧржмрзЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржирзЗ

```jsx
console.time("filter array");
const visibleTodos = useMemo(() => {
  return getFilteredTodos(todos, filter); // Skipped if todos and filter haven't changed
}, [todos, filter]);
console.timeEnd("filter array");
```

### ЁЯФС ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

| ржХрж╛ржЬржЯрж┐                             | useMemo ржжрж░ржХрж╛рж░ ржХрж┐?                                               |
| --------------------------------- | --------------------------------------------------------------- |
| Simple text format ржмрж╛ рж╕ржВржЦрзНржпрж╛ ржЧржгржирж╛ | тЭМ ржжрж░ржХрж╛рж░ ржирзЗржЗ                                                    |
| ржмрзЬ рж▓рзБржк, ржнрж╛рж░рж┐ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи          | тЬЕ useMemo ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи                                         |
| Child Component рж░рж┐-рж░рзЗржирзНржбрж╛рж░ ржарзЗржХрж╛рждрзЗ | тЬЕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ, рждржмрзЗ `React.memo`-рж░ рж╕ржЩрзНржЧрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржи |

---

### ЁЯУМ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржирж┐рзЯржо

> тАЬPerformance Optimization рждржЦржиржЗ ржХрж░ржмрзЗржи, ржпржЦржи рж╕рждрзНржпрж┐ржЗ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗредтАЭ
> ржЖржЧрзЗржЗ ржирж╛ ржмрзБржЭрзЗ `useMemo`, `useCallback` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржХрзЛржб ржЬржЯрж┐рж▓ рж╣ржмрзЗ, ржЙржкржХрж╛рж░ ржирж╛ржУ рж╣рждрзЗ ржкрж╛рж░рзЗред

---

### ЁЯзй ржЪрзВрзЬрж╛ржирзНржд ржХрзЛржб ржЙржжрж╛рж╣рж░ржг

```jsx
import { useState, useMemo } from "react";

export default function App() {
  const [countOne, setCountOne] = useState(0);
  const [countTwo, setCountTwo] = useState(0);

  const isEven = useMemo(() => {
    let i = 0;
    while (i < 1000000000) i++;
    return countOne % 2 === 0;
  }, [countOne]);

  return (
    <div>
      <h1>{countOne}</h1>
      <button onClick={() => setCountOne(countOne + 1)}>Increment by 1</button>

      <h1>{countTwo}</h1>
      <button onClick={() => setCountTwo(countTwo + 5)}>Increment by 5</button>

      <p>{isEven ? "Even" : "Odd"}</p>
    </div>
  );
}
```

---

## ЁЯФ╣ `useMemo` ржжрж┐рзЯрзЗ React ржП ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи

ржХржЦржирзЛ ржПржоржи рж╣рждрзЗ ржкрж╛рж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗ ржХрж┐ржЫрзБ ржлрж╛ржВрж╢ржи ржПржоржи ржЖржЫрзЗ, ржпрж╛ ржмрж╛рж░ржмрж╛рж░ рж░рж╛ржи ржХрж░рж▓рзЗ ржЕрзНржпрж╛ржк рж╕рзНрж▓рзЛ рж╣рзЯрзЗ ржпрж╛рзЯред ржПржЗ рж╕ржорзЯ ржЖржкржирж┐ `useMemo` рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржпрж╛рждрзЗ React ржЖржЧрзЗрж░ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯ ржХрж░рж╛ ржнрзНржпрж╛рж▓рзБ ржоржирзЗ рж░рзЗржЦрзЗ ржжрзЗрзЯред `useMemo` рж╢рзБржзрзБ рждржЦржиржЗ ржирждрзБржи ржХрж░рзЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯ ржХрж░рзЗ, ржпржЦржи ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрзЛржи ржнрзНржпрж╛рж▓рзБ (dependency) ржЪрзЗржЮрзНржЬ рж╣рзЯред

ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗ ржЖржорж░рж╛ ржжрзЗржЦрзЗржЫрж┐ ржХрж┐ржнрж╛ржмрзЗ `useMemo` ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ ржПржХржЯрж┐ тАЬisEvenтАЭ ржЯрж╛ржЗржкрзЗрж░ ржХрж╕рзНржЯрж▓рж┐ ржлрж╛ржВрж╢ржиржХрзЗ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯ, ржпрж╛рждрзЗ рж░рзЗржирзНржбрж╛рж░ ржЯрж╛ржЗржорзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж▓рзЛржб ржирж╛ ржкрзЬрзЗред

---

## **`useCallback`** ржУ **`useMemo`** ржжрзЗржЦрждрзЗ ржЕржирзЗржХржЯрж╛ ржПржХржЗ рж░ржХржо рж╣рж▓рзЗржУ, ржПржжрзЗрж░ **ржХрж╛ржЬ** ржУ **ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржорзЯ** ржЖрж▓рж╛ржжрж╛ред

---

### ЁЯза ржорзВрж▓ ржкрж╛рж░рзНржержХрзНржп: `useCallback` vs `useMemo`

| ржмрж┐рж╖рзЯ              | `useCallback`                                              | `useMemo`                                                 |
| ----------------- | ---------------------------------------------------------- | --------------------------------------------------------- |
| ЁЯФз ржХрзА рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ | ржПржХржЯрж╛ **ржорзЗржорзЛрж░рж╛ржЗржЬржб ржлрж╛ржВрж╢ржи**                                   | ржПржХржЯрж╛ **ржорзЗржорзЛрж░рж╛ржЗржЬржб ржнрзНржпрж╛рж▓рзБ**                                 |
| ЁЯОп ржЙржжрзНржжрзЗрж╢рзНржп       | ржХрзЛржирзЛ ржлрж╛ржВрж╢ржиржХрзЗ рж░рзЗржирзНржбрж╛рж░рзЗ ржмрж╛рж░ржмрж╛рж░ рждрзИрж░рж┐ рж╣ржУрзЯрж╛ ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛ржирзЛ        | ржХрзЛржирзЛ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛ржирзЛ               |
| ЁЯзк ржХржмрзЗ ржжрж░ржХрж╛рж░      | ржпржЦржи ржлрж╛ржВрж╢ржиржЯрж╛ ржХрзЛржирзЛ ржЪрж╛ржЗрж▓рзНржб ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржкрзНрж░ржк рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛рждрзЗ рж╣рзЯ | ржпржЦржи ржХрзЛржирзЛ **expensive calculation** ржЖржЫрзЗ                    |
| ЁЯУж рж░рж┐ржЯрж╛рж░рзНржи        | `() => {...}` (ржПржХржЯрж╛ ржлрж╛ржВрж╢ржи)                                 | ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБ, ржпрзЗржоржи `number`, `string`, `boolean`, `object` |

---

## ЁЯУШ рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕ ржкрж╛рж░рзНржержХрзНржп

### тЬЕ `useCallback`

```jsx
const memoizedCallback = useCallback(() => {
  doSomething(a, b);
}, [a, b]);
```

ЁЯФБ ржПржЯрж┐ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ `a` ржмрж╛ `b` ржирж╛ ржмржжрж▓рж╛рж▓рзЗ ржЖржЧрзЗрж░ржЯрж╛ржЗ ржерж╛ржХржмрзЗред

---

### тЬЕ `useMemo`

```jsx
const memoizedValue = useMemo(() => {
  return expensiveFunction(a, b);
}, [a, b]);
```

ЁЯФБ ржПржЯрж┐ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржПржХржЯрж┐ **ржнрзНржпрж╛рж▓рзБ** (ржпрзЗржоржи `number`, `boolean`, `object`) ржпрж╛ `a` ржмрж╛ `b` ржирж╛ ржмржжрж▓рж╛рж▓рзЗ ржЖржЧрзЗрж░ржЯрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред

---

## ЁЯУМ ржХржмрзЗ ржХрзЛржиржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

### ЁЯОп ржпржЦржи `useCallback` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи:

- ржпржЦржи ржЖржкржирж┐ ржХрзЛржирзЛ **event handler ржлрж╛ржВрж╢ржи** ржирж┐ржЪрзЗ `props` ржжрж┐рзЯрзЗ ржкрж╛ржарж╛ржЪрзНржЫрзЗржи
- ржЕржержмрж╛ ржпржЦржи `React.memo()` ржХрж░рж╛ child component ржЖржЫрзЗ, ржпрзЗржЯрж╛ ржкрзНрж░ржк рж╣рж┐рж╕рзЗржмрзЗ ржлрж╛ржВрж╢ржи ржирж┐ржЪрзНржЫрзЗ

тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
const handleClick = useCallback(() => {
  setCount((c) => c + 1);
}, []);
```

---

### ЁЯОп ржпржЦржи `useMemo` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи:

- ржпржЦржи ржЖржкржирж┐ ржХрзЛржирзЛ **ржнрзНржпрж╛рж▓рзБ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи** ржХрж░ржЫрзЗржи ржпрзЗржЯрж╛ ржнрж╛рж░рзА ржмрж╛ рж╕ржорзЯрж╕рж╛ржкрзЗржХрзНрж╖
- ржПржмржВ ржЖржкржирж┐ ржЪрж╛ржи ржпрзЗржи dependency ржирж╛ ржмржжрж▓рж╛рж▓рзЗ рж╕рзЗржЯрж╛ ржЖржмрж╛рж░ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯ ржирж╛ рж╣рзЯ

тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
const isEven = useMemo(() => {
  return count % 2 === 0;
}, [count]);
```

---

## ЁЯФБ ржПржХ рж▓рж╛ржЗржирзЗ ржкрж╛рж░рзНржержХрзНржп:

> ЁЯзй `useCallback(fn, deps)` === `useMemo(() => fn, deps)`

ржорж╛ржирзЗ, `useCallback` рж╢рзБржзрзБ `useMemo`-ржПрж░ рж╢рж░рзНржЯржХрж╛ржЯ ржпрж╛ **ржлрж╛ржВрж╢ржиржХрзЗ** ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рзЗред

---

## ЁЯзк ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржгржГ

```jsx
const expensiveCalculation = useMemo(() => {
  let sum = 0;
  for (let i = 0; i < 1000000; i++) sum += i;
  return sum;
}, []);
```

```jsx
const handleClick = useCallback(() => {
  console.log("Button clicked");
}, []);
```

---

## ЁЯОУ ржЙржкрж╕ржВрж╣рж╛рж░

| ржпржжрж┐...                                             | ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи  |
| -------------------------------------------------- | ------------- |
| ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рждрзЗ ржЪрж╛ржи ржХрзЛржирзЛ **ржлрж╛ржВрж╢ржиржХрзЗ**                 | `useCallback` |
| ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рждрзЗ ржЪрж╛ржи ржХрзЛржирзЛ **ржнрзНржпрж╛рж▓рзБ ржмрж╛ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржиржХрзЗ** | `useMemo`     |

---

ржЪрж▓рзБржи, ржЖржорж░рж╛ рж╕рзЗржХрж╢ржи рзи.рзл ржПрж░ **ржжрзНржмрж┐рждрзАрзЯ ржкрж╛рж░рзНржЯ**тАФ**Caching expensive calculations**тАФржПржХржжржо **рж╕рж╣ржЬ, ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржнрж╛рж╖рж╛рзЯ** рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж┐ ржпрзЗржи ржЖржкржирж╛рж░ React Bangla ржмржЗрзЯрзЗрж░ ржЬржирзНржп рж╕рж░рж╛рж╕рж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржПржмржВ ржнрж╛ржЗрзЯрзЗрж░ ржорждрзЛ ржмрзБржЭрж┐рзЯрзЗ рж╢рзЗржЦрж╛ ржпрж╛рзЯред

---

## тЬи ржХрж╕рзНржЯрж▓рж┐ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛ (useMemo ржжрж┐рзЯрзЗ)

### ЁЯФ╢ ржзрж░рзЛ, рждрзБржорж┐ ржПржХржЯрж┐ ржЯрзБржбрзБ ржЕрзНржпрж╛ржк ржмрж╛ржирж╛ржЪрзНржЫрзЛ

рждрзЛржорж╛рж░ `TodoList` ржирж╛ржорзЗ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░ржжрзЗрж░ **рж╕ржм ржЯрж╛рж╕рзНржХ** (`todos`) ржЖрж░ ржПржХржЯрж╛ **ржлрж┐рж▓рзНржЯрж╛рж░ ржЕржкрж╢ржи** (`filter`) ржЖрж╕рзЗ props рж╣рж┐рж╕рзЗржмрзЗред ржПржЦржи рждрзБржорж┐ ржЗржЙржЬрж╛рж░ржХрзЗ рж╢рзБржзрзБ _ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржЯрж╛рж╕рзНржХржЧрзБрж▓рзЛ_ ржжрзЗржЦрж╛рждрзЗ ржЪрж╛ржУред

рждрзЛ рждрзБржорж┐ рж╣рзЯрждрзЛ ржПржоржи ржХрж┐ржЫрзБ ржХрж░рждрзЗ ржЪрж╛ржУ:

```jsx
function TodoList({ todos, filter }) {
  const [visibleTodos, setVisibleTodos] = useState([]);

  useEffect(() => {
    const filtered = getFilteredTodos(todos, filter);
    setVisibleTodos(filtered);
  }, [todos, filter]);
}
```

ЁЯСО ржПржЗ ржХрзЛржбрзЗ ржжрзБржЗржЯрж╛ рж╕ржорж╕рзНржпрж╛:

1. рждрзБржорж┐ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржПржХржЯрж╛ **рж╕рзНржЯрзЗржЯ** рж░рж╛ржЦржЫрзЛ (`visibleTodos`), ржпрзЗржЯрж╛ ржорзВрж▓ржд ржЕржирзНржп props ржжрж┐рзЯрзЗ ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯред
2. рждрзБржорж┐ **useEffect** ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЛ ржпрзЗржЯрж╛ ржПржЦрж╛ржирзЗ ржжрж░ржХрж╛рж░ ржирзЗржЗред

---

## тЬЕ рждрж╛рж╣рж▓рзЗ ржарж┐ржХ ржХрзЛржб ржХрзА рж╣рждрзЗ ржкрж╛рж░рзЗ?

```jsx
function TodoList({ todos, filter }) {
  const visibleTodos = getFilteredTodos(todos, filter);
}
```

ржПржЗржЯрж╛ ржПржХржжржо ржарж┐ржХ ржХрж╛ржЬ ржХрж░рзЗ ржпржжрж┐ `getFilteredTodos()` ржлрж╛ржВрж╢ржиржЯрж╛ ржЦрзБржм рж╣рж╛рж▓ржХрж╛ рж╣рзЯ (ржорж╛ржирзЗ ржжрзНрж░рзБржд ржЪрж▓рзЗ)ред

---

## тЭЧржХрж┐ржирзНрждрзБ...

ржпржжрж┐ `getFilteredTodos()` ржлрж╛ржВрж╢ржирзЗрж░ ржнрж┐рждрж░рзЗ ржЕржирзЗржХ ржмрзЬ рж▓ржЬрж┐ржХ ржерж╛ржХрзЗ (ржпрзЗржоржи: рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ ржЯрзБржбрзБ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЗ), рждрж╛рж╣рж▓рзЗ ржЫрзЛржЯржЦрж╛ржЯ ржХрзЛржирзЛ рж╕рзНржЯрзЗржЯ ржЖржкржбрзЗржЯ рж╣рж▓рзЗржЗ ржкрзБрж░рзЛ ржлрж╛ржВрж╢ржи ржЖржмрж╛рж░ ржЪрж▓ржмрзЗред ржПрждрзЗ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЦрж╛рж░рж╛ржк рж╣рждрзЗ ржкрж╛рж░рзЗред

ржпрзЗржоржи:

```jsx
const [newTodo, setNewTodo] = useState("");
```

`newTodo` ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗржУ ржкрзБрж░рзЛ ржлрж┐рж▓рзНржЯрж╛рж░ ржлрж╛ржВрж╢ржи ржЖржмрж╛рж░ ржЪрж▓рзЗ ржпрж╛ржмрзЗ тАФ ржЕржержЪ рждрж╛рж░ рж╕ржЩрзНржЧрзЗ ржлрж┐рж▓рзНржЯрж╛рж░рзЗрж░ ржХрзЛржирзЛ рж╕ржорзНржкрж░рзНржХржЗ ржирзЗржЗ!

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи: useMemo ржжрж┐рзЯрзЗ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛

```jsx
const visibleTodos = useMemo(() => {
  return getFilteredTodos(todos, filter);
}, [todos, filter]);
```

ржПржЦрж╛ржирзЗ React рж╢рзБржзрзБ рждржЦржиржЗ `getFilteredTodos()` ржЪрж╛рж▓рж╛ржмрзЗ, ржпржЦржи `todos` ржмрж╛ `filter` ржмржжрж▓рж╛ржмрзЗред
рждрзБржорж┐ ржпрждржмрж╛рж░ржЗ `newTodo` ржЯрж╛ржЗржк ржХрж░рзЛ, ржПржЯрж╛ ржЖрж░ ржЪрж▓ржмрзЗ ржирж╛ тАФ ржЖржЧрзЗрж░ рж░рзЗржЬрж╛рж▓рзНржЯржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗред

---

## ЁЯФН ржПржХ рж▓рж╛ржЗржирзЗ рж▓рзЗржЦрж╛ ржпрж╛рзЯ:

```jsx
const visibleTodos = useMemo(
  () => getFilteredTodos(todos, filter),
  [todos, filter]
);
```

ржПржЯрж╛ ржПржХржжржо ржарж┐ржХ ржХрж╛ржЬ ржХрж░ржмрзЗред рж╕рзЛржЬрж╛, ржХрзНрж▓рж┐ржи ржПржмржВ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржлрзНрж░рзЗржирзНржбрж▓рж┐ред

---

## ЁЯФм ржХрж┐ржнрж╛ржмрзЗ ржмрзБржЭржмрзЗржи ржпрзЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржиржЯрж╛ "expensive"?

рж╕рзЛржЬрж╛ ржЙржкрж╛рзЯ:

```js
console.time("filter array");
const visibleTodos = getFilteredTodos(todos, filter);
console.timeEnd("filter array");
```

ржПржЗ ржХрзЛржбржЯрж╛ ржХржирж╕рзЛрж▓рзЗ ржЯрж╛ржЗржо ржорж╛ржкрзЗред ржпржжрж┐ `filter array: 2ms` ржмрж╛ рждрж╛рж░ ржмрзЗрж╢рж┐ ржЯрж╛ржЗржо рж▓рж╛ржЧрзЗ, рждрж╛рж╣рж▓рзЗ ржнрж╛ржмрж╛ ржпрж╛рзЯ ржПржЯрж╛ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржХрж░рж╛ ржжрж░ржХрж╛рж░ред

ржПржЦржи рждрзБржорж┐ useMemo ржжрж┐рзЯрзЗ ржЖржмрж╛рж░ ржЪрзЗржХ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

```js
console.time("filter array");
const visibleTodos = useMemo(() => {
  return getFilteredTodos(todos, filter);
}, [todos, filter]);
console.timeEnd("filter array");
```

---

## тЪая╕П ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХржерж╛:

- `useMemo` ржкрзНрж░ржержо рж░рзЗржирзНржбрж╛рж░рзЗ ржХржЦржирзЛ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрж╛рзЬрж╛рзЯ ржирж╛ред
- ржПржЯрж┐ рж╢рзБржзрзБ **ржкрж░ржмрж░рзНрждрзА рж░рзЗржирзНржбрж╛рж░рзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи** ржЖржЯржХрж╛рзЯред
- `useMemo` ржжрж┐рзЯрзЗ рж╢рзБржзрзБ **pure calculation** ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛ ржЙржЪрж┐ржд (ржпрзЗ ржлрж╛ржВрж╢ржирзЗ DOM ржЯрж╛ржЪ рж╣рзЯ ржирж╛)ред
- ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ ржЯрж╛ржЗржорж┐ржВ ржарж┐ржХ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржирж╛ тАФ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржмрж┐рж▓рзНржбрзЗ ржЯрзЗрж╕рзНржЯ ржХрж░рзБржиред

---

## ЁЯОп ржЖржкржирж╛рж░ ржнрж╛ржЗрзЯрзЗрж░ ржорждрзЛ ржХрж┐ржЫрзБ ржкрж░рж╛ржорж░рзНрж╢:

| ржпржжрж┐ рждрзБржорж┐...                       | рждрж╛рж╣рж▓рзЗ                          |
| --------------------------------- | ------------------------------ |
| ржЫрзЛржЯ ржЕрзНржпрж╛рж░рзЗ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЛ          | useMemo рж▓рж╛ржЧржмрзЗ ржирж╛               |
| ржЯрж╛ржЗржк ржХрж░рж▓рзЗ ржЕрзНржпрж╛ржк рж╕рзНрж▓рзЛ рж╣рзЯрзЗ ржпрж╛ржЪрзНржЫрзЗ   | useMemo ржжрж┐рзЯрзЗ ржЪрзЗржХ ржХрж░рзЛ           |
| ржмрзЬ object ржмрж╛ рж▓ржорзНржмрж╛ рж▓рзБржк ржЪрж▓рзЗ ржмрж╛рж░ржмрж╛рж░ | рждржЦржи useMemo ржжрж┐рзЯрзЗ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рзЛ  |
| ржХрж╛ржЬржЯрж╛ UI-рждрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржкрзНрж░ржнрж╛ржм ржлрзЗрж▓рзЗ ржирж╛ | рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ржХрзЗ useMemo ржХрж░рж╛ржЗ ржнрж╛рж▓рзЛ |

---

## тЬЕ ржЪрзВрзЬрж╛ржирзНржд ржХрзЛржб ржЙржжрж╛рж╣рж░ржг:

```jsx
import { useState, useMemo } from "react";

function getFilteredTodos(todos, filter) {
  return todos.filter((todo) => {
    if (filter === "all") return true;
    if (filter === "active") return !todo.completed;
    if (filter === "completed") return todo.completed;
  });
}

function TodoList({ todos, filter }) {
  const [newTodo, setNewTodo] = useState("");

  const visibleTodos = useMemo(() => {
    return getFilteredTodos(todos, filter);
  }, [todos, filter]);

  return (
    <div>
      <input
        value={newTodo}
        onChange={(e) => setNewTodo(e.target.value)}
        placeholder="Add todo..."
      />
      <ul>
        {visibleTodos.map((todo) => (
          <li key={todo.id}>{todo.text}</li>
        ))}
      </ul>
    </div>
  );
}
```

---

## тЬНя╕П ржЖржкржирж╛рж░ ржмржЗрзЯрзЗ ржПржЗ ржЕржВрж╢ ржПржЗржнрж╛ржмрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи:

---

## ЁЯФ╣ React-ржП ржнрж╛рж░рзА ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛ тАУ useMemo ржжрж┐рзЯрзЗ рж╕рж╣ржЬ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи

React ржП ржХрж╛ржЬ ржХрж░рж╛рж░ рж╕ржорзЯ ржЕржирзЗржХ рж╕ржорзЯ ржПржоржи рж╣рзЯ, рждрзБржорж┐ ржПржоржи ржПржХржЯрж╛ ржлрж╛ржВрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЛ ржпрзЗржЯрж╛ ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛рж▓рзЗ ржЕрзНржпрж╛ржк ржзрзАрж░ рж╣рзЯрзЗ ржпрж╛рзЯред ржпрзЗржоржи: ржмрзЬ рж▓рж┐рж╕рзНржЯ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ред ржПржЗрж░ржХржо ржлрж╛ржВрж╢ржирзЗрж░ рж░рзЗржЬрж╛рж▓рзНржЯ ржмрж╛рж░ржмрж╛рж░ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯ ржХрж░рж╛ ржжрж░ржХрж╛рж░ ржирзЗржЗ тАФ ржХрж╛рж░ржг рж╕рзЗржЗ рж░рзЗржЬрж╛рж▓рзНржЯ ржЖржЧрзЗржЗ ржкрж╛ржУрзЯрж╛ ржЧрзЗржЫрзЗред

ржПржЗ ржЬржирзНржпржЗ ржЖржЫрзЗ `useMemo` тАФ ржПржЯрж╛ рждрзЛржорж╛ржХрзЗ ржмрж▓рзЗ: "ржнрж╛ржЗ, ржпржжрж┐ dependency ржирж╛ ржмржжрж▓рж╛рзЯ, рждрж╛рж╣рж▓рзЗ ржЖржЧрзЗрж░ рж░рзЗржЬрж╛рж▓рзНржЯржЗ ржЖржорж┐ ржжрж┐рзЯрзЗ ржжрж┐ржмрзЛред"

ржПржЗ рж╕рж╣ржЬ ржЕржержЪ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА рж╣рзБржХ рждрзЛржорж╛рж░ ржЕрзНржпрж╛ржкржХрзЗ ржХрж░рзЗ рждрзБрж▓рждрзЗ ржкрж╛рж░рзЗ ржЕржирзЗржХ ржжрзНрж░рзБржд, ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржмрзЬ ржбрзЗржЯрж╛ ржмрж╛ ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж▓рзЗред

---
