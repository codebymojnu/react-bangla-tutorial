ржзржирзНржпржмрж╛ржж, Mojnu ржнрж╛ржЗ! рждрзБржорж┐ ржПржХржжржо ржарж┐ржХ ржзрж░рзЗржЫрзЛтАФржЖрж░ржУ ржПржХржЯрзБ рж╕рж╣ржЬ, рж╕рж░рж▓ ржЖрж░ ржкрзНрж░рж╛ржЮрзНржЬрж▓ржнрж╛ржмрзЗ рж▓рзЗржЦрж╛ ржЧрзЗрж▓рзЗ ржкрж╛ржаржХрзЗрж░ ржЬржирзНржп ржЖрж░ржУ ржмрзЛржзржЧржорзНржп рж╣ржмрзЗред ржЪрж▓, ржЖржорж┐ ржкрзБрж░рзЛржЯрж╛ ржЕржВрж╢ ржЖрж░ржУ рж╕рж╣ржЬ ржХрж░рзЗ ржмрж╛ржВрж▓рж╛рзЯ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ ржжрж┐ржЪрзНржЫрж┐ ржпрзЗржи React рж╢рзЗржЦрж╛ рж╣рзЯ ржоржЬрж╛ ржжрж┐рзЯрзЗ, ржЪрж╛ржк ржжрж┐рзЯрзЗ ржирзЯред

---

## ржЕржзрзНржпрж╛рзЯ: Effect ржПрж░ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ dependency ржмрж╛ржж ржжрзЗржУрзЯрж╛

(Removing Effect Dependencies)

React-ржП `useEffect()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ, ржЖржорж░рж╛ ржПржХржЯрж╛ ржХрзЛржб ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рж┐ ржпржЦржи component рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ ржмрж╛ ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорж╛ржи (ржпрзЗржоржи props ржмрж╛ state) ржмржжрж▓рж╛рзЯред

ржПржЗ ржХрзЛржбржЯрж╛ ржпрзЗржи ржарж┐ржХ рж╕ржорзЯрзЗ ржЪрж▓рзЗ, рж╕рзЗржЯрж╛ ржарж┐ржХ ржХрж░рж╛рж░ ржЬржирзНржп React ржмрж▓рзЗ ржжрзЗрзЯтАФрждрзЛржорж╛рж░ effect ржХрзЛржи ржХрзЛржи ржорж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗ, рж╕рзЗржЗ ржорж╛ржиржЧрзБрж▓рзЛ dependency list-ржП ржжрж┐рждрзЗ рж╣ржмрзЗред ржорж╛ржирзЗ рждрзБржорж┐ ржпржжрж┐ `useEffect(() => {}, [ржПржЦрж╛ржирзЗ ржорж╛ржи])` рж▓рзЗржЦрзЛ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЦрж╛ржирзЗ ржпрзЗрж╕ржм ржорж╛ржи ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ effect ржЪрж▓рж╛ ржЙржЪрж┐рждтАФрж╕рзЗржЧрзБрж▓рзЛ ржжрж┐рждрзЗ рж╣ржмрзЗред

ржпржжрж┐ ржнрзБрж▓ dependency ржжрж╛ржУ ржмрж╛ ржХрзЛржирзЛржЯрж╛ ржирж╛ ржжрж╛ржУ, рждрж╛рж╣рж▓рзЗ effect:

- ржнрзБрж▓ рж╕ржорзЯрзЗ ржЪрж▓ржмрзЗ
- ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржмрж╛рж░ржмрж╛рж░ ржЪрж▓рждрзЗ ржкрж╛рж░рзЗ
- ржПржоржиржХрж┐ **ржЕрж╕рзАржо рж▓рзБржкрзЗ** ржврзБржХрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ!

ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗ рж╢рж┐ржЦржм:

- ржХрж┐ржнрж╛ржмрзЗ ржнрзБрж▓ dependency ржжрж┐рж▓рзЗ ржЗржиржлрж┐ржирж┐ржЯ рж▓рзБржк рж╣рзЯ, ржЖрж░ ржХрж┐ржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░рждрзЗ рж╣рзЯ
- ржХржЦржи ржХрзЛржирзЛ dependency ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржпрж╛рзЯ
- ржХрж┐ржнрж╛ржмрзЗ ржПржоржи ржХрж┐ржЫрзБ ржкрзЬрж╛ ржпрж╛рзЯ ржпрзЗржЯрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржирзЗ React ржпрзЗржи effect ржирж╛ ржЪрж╛рж▓рж╛рзЯ
- object ржмрж╛ function ржХрзЗ dependency ржмрж╛ржирж╛рж▓рзЗ ржХрзЗржи рж╕ржорж╕рзНржпрж╛ рж╣рзЯ
- dependency рж▓рж┐ржирзНржЯрж╛рж░ржХрзЗ ржмржирзНржз (suppress) ржХрж░рж╛ ржХрзЗржи ржЦрж╛рж░рж╛ржк ржзрж╛рж░ржгрж╛

---

## ЁЯУШ ржЕржВрж╢ рзз: ржХрзЛржб ржпрж╛ ржкрзЬрзЗ, dependency рждрж╛ржУ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд

(Dependencies should match the code)

ржЪрж▓рзЛ ржЖржорж░рж╛ ржПржХржЯрж╛ рж╕рж╣ржЬ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐ред

ржзрж░рзЛ, ржЖржорж░рж╛ ржПржХржЯрж╛ ChatRoom ржмрж╛ржирж╛ржЪрзНржЫрж┐ ржпрзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░ ржПржХржЯрж╛ рж░рзБржо ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржЖржорж░рж╛ ржЪрж╛ржЗтАФржкрзНрж░рждрж┐ ржмрж╛рж░ рж░рзБржо ржмржжрж▓рж╛рж▓рзЗ ржирждрзБржи connection рждрзИрж░рж┐ рж╣рзЛржХред

```js {5-7}
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  	// ...
}
```

ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ `roomId` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐ effect-ржПрж░ ржнрж┐рждрж░рзЗред ржХрж┐ржирзНрждрзБ ржпржжрж┐ dependency list ржЦрж╛рж▓рж┐ рж░рж╛ржЦрж┐тАФ

```js
useEffect(() => {
  // ...
}, []); // тЭМ ржнрзБрж▓
```

рждрж╛рж╣рж▓рзЗ React ржЬрж╛ржирзЗ ржирж╛ ржпрзЗ `roomId` ржмржжрж▓рж╛рж▓рзЗ ржЖржмрж╛рж░ effect ржЪрж╛рж▓рж╛ржирзЛ ржжрж░ржХрж╛рж░ред рждржЦржи effect ржЪрж▓ржмрзЗ ржирж╛тАФржПржмржВ рж░рзБржо ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗржУ ржЖржЧрзЗрж░ рж░рзБржорзЗржЗ connection ржерзЗржХрзЗ ржпрж╛ржмрзЗред ЁЯШХ

React ржПрж░ рж▓рж┐ржирзНржЯрж╛рж░ ржЖржорж╛ржжрзЗрж░ ржмрж▓рзЗ ржжрзЗржмрзЗ: **"Hey! рждрзБржорж┐ `roomId` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрзЛ, ржХрж┐ржирзНрждрзБ dependency list-ржП ржжрж╛ржУржирж┐!"**

рждржЦржи ржарж┐ржХ ржХрж░рж┐ ржПржнрж╛ржмрзЗ:

```js
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, [roomId]); // тЬЕ ржарж┐ржХ ржХрж░рж▓рж╛ржо
```

> ЁЯза ржоржирзЗ рж░рж╛ржЦрзЛ: effect-ржПрж░ ржнрж┐рждрж░рзЗ ржпрзЗрж╕ржм ржорж╛ржи (props ржмрж╛ state) рждрзБржорж┐ ржкрзЬржЫрзЛ, рж╕рзЗржЧрзБрж▓рзЛ **reactive ржорж╛ржи**ред ржорж╛ржирзЗ, ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ React ржЖржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред ржПрж╕ржм ржорж╛ржиржХрзЗ dependency-рждрзЗ ржжрж┐рждрзЗ рж╣рзЯ, ржпрзЗржи React ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржХржЦржи effect ржЖржмрж╛рж░ ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗред

---

## тЬЕ ржЙржжрж╛рж╣рж░ржгрж╕рж╣ рж╕рж╣ржЬ ржбрзЗржорзЛ

рждрзЛржорж╛рж░ ржмрзЛржЭрж╛рж░ рж╕рзБржмрж┐ржзрж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗ ржПржХржЯрж╛ ржкрзВрж░рзНржгрж╛ржЩрзНржЧ ржЙржжрж╛рж╣рж░ржг ржжрж┐рж▓рж╛ржотАФ

```js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // тЬЕ roomId ржХрзЗ dependency рж╣рж┐рж╕рж╛ржмрзЗ ржжрж┐рж▓рж╛ржо
  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

```js src/chat.js
export function createConnection(serverUrl, roomId) {
  return {
    connect() {
      console.log(
        'тЬЕ Connecting to "' + roomId + '" room at ' + serverUrl + "..."
      );
    },
    disconnect() {
      console.log('тЭМ Disconnected from "' + roomId + '" room at ' + serverUrl);
    },
  };
}
```

---

## ЁЯФН рж╕рж╛рж░рж╛ржВрж╢

| рж╕ржорж╕рзНржпрж╛                            | ржХрж╛рж░ржг                                | рж╕ржорж╛ржзрж╛ржи                               |
| --------------------------------- | ----------------------------------- | ------------------------------------ |
| effect рж░рзБржо ржкрж░рж┐ржмрж░рзНрждржирзЗ ржЪрж╛рж▓рж╛ржЪрзНржЫрзЗ ржирж╛  | dependency list-ржП `roomId` ржирж╛ржЗ      | `[roomId]` ржжрж╛ржУ                       |
| effect ржмрж╛рж░ржмрж╛рж░ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржЪрж▓ржЫрзЗ | ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржорж╛ржи ржжрж┐рзЯрзЗржЫрзЛ dependency-рждрзЗ | рж╢рзБржзрзБ ржжрж░ржХрж╛рж░рж┐ ржорж╛ржи ржжрж╛ржУ                  |
| ржЗржиржлрж┐ржирж┐ржЯ рж▓рзБржк рж╣ржЪрзНржЫрзЗ                 | object/function ржмрж╛рж░ржмрж╛рж░ ржирждрзБржи рж╣ржЪрзНржЫрзЗ   | memo ржмрж╛ callback ржЗржЙржЬ ржХрж░рзЛ (ржкрж░рзЗ рж╢рж┐ржЦржмрзЛ) |

---

ржзржирзНржпржмрж╛ржж Mojnu ржнрж╛ржЗ! ржЪрж▓рзЛ рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ **Section 1.1**: _тАЬржПржХржЯрж╛ dependency ржмрж╛ржж ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗ, ржкрзНрж░ржорж╛ржг ржХрж░рждрзЗ рж╣ржмрзЗ ржУржЯрж╛ ржЖрж╕рж▓рзЗржЗ dependency ржирж╛тАЭ_тАФржПржЗ ржЕржВрж╢ржЯрж╛ рждрзЛржорж╛рж░ ржнрж╛рж╖рж╛ ржЖрж░ рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАржжрзЗрж░ ржмрзЛржЭрж╛рж░ ржЬржирзНржп ржЖрж░ржУ рж╕рж░рж▓, рж╕рзБржирзНржжрж░ ржЖрж░ ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржмрж╛ржВрж▓рж╛рзЯ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж┐ред

---

## ЁЯзй рзз.рзз: ржХрзЛржирзЛ dependency ржмрж╛ржж ржжрж┐рждрзЗ рж╣рж▓рзЗ, ржкрзНрж░ржорж╛ржг ржХрж░рждрзЗ рж╣ржмрзЗ ржУржЯрж╛ рж╕рждрзНржпрж┐ржЗ dependency ржирж╛

### (_To remove a dependency, prove that it's not a dependency_)

React ржП `useEffect()` ржПрж░ ржнрзЗрждрж░рзЗ ржпрзЗрж╕ржм **reactive ржорж╛ржи** (ржпрзЗржоржи props ржмрж╛ component-ржПрж░ ржнрж┐рждрж░рзЗрж░ state ржмрж╛ ржлрж╛ржВрж╢ржи) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ, рж╕рзЗржЧрзБрж▓рзЛржХрзЗ рждрзЛржорж╛рж░ dependency list-ржП **ржЕржмрж╢рзНржпржЗ** ржжрж┐рждрзЗ рж╣ржмрзЗред ржПржЯрж╛ рждрзЛржорж╛рж░ ржЗржЪрзНржЫрзЗржорждрзЛ ржирж╛тАФReact ржирж┐ржЬрзЗржЗ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржирзЗрзЯ effect-ржПрж░ ржХрзЛржб ржХрзЛржи ржХрзЛржи ржорж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗред

### ЁЯФН ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐:

```js {2,3,5,8}
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  // roomId рж╣рж▓рзЛ reactive ржорж╛ржи
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // roomId ржПржЦрж╛ржирзЗ effect-ржПрж░ ржнрж┐рждрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ рж╣ржЪрзНржЫрзЗ
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // тЬЕ рждрж╛ржЗ ржПржЯрж╛ржХрзЗ dependency list-ржП рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ
}
```

ЁЯСЙ ржЙржкрж░рзЗрж░ ржХрзЛржбрзЗ `roomId` ржПржХржЯрж┐ prop, ржорж╛ржирзЗ ржПржЯрж╛ React-ржПрж░ ржжрзГрж╖рзНржЯрж┐рждрзЗ **reactive value**ред ржПржЯрж╛ ржпржжрж┐ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯ, рждрж╛рж╣рж▓рзЗ effect-ржПрж░ ржирждрзБржи ржХрж░рзЗ ржЪрж▓рж╛ ржжрж░ржХрж╛рж░ред рждрж╛ржЗ `roomId`-ржХрзЗ dependency list-ржП ржирж╛ ржжрж┐рж▓рзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗред

---

## тЭМ ржпржжрж┐ dependency ржирж╛ ржжрж╛ржУ?

```js {8}
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // ЁЯФ┤ ржнрзБрж▓: roomId ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ
}
```

ржПржЦрж╛ржирзЗ React рж▓рж┐ржирзНржЯрж╛рж░ рж╕рждрж░рзНржХ ржХрж░ржмрзЗ:

> тЪая╕П **"React Hook useEffect has a missing dependency: 'roomId'"**

ржПржЗ рж╕рждрж░рзНржХрждрж╛ рж╕ржарж┐ржХ, ржХрж╛рж░ржг:

- `roomId` ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ effect ржирждрзБржи ржХрж░рзЗ ржЪрж▓рж╛ ржжрж░ржХрж╛рж░
- ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржмрж▓рзЗржЫрзЛ: тАЬржирж╛, ржХрзЛржирзЛ dependency ржирж╛ржЗтАЭ
- ржлрж▓рзЗ ржЖржЧрзЗрж░ рж░рзБржорзЗржЗ connect рж╣рзЯрзЗ ржерж╛ржХржмрзЗ, ржирждрзБржи рж░рзБржорзЗ ржпрж╛ржмрзЗ ржирж╛тАФржПржЯрж╛ ржПржХржЯрж╛ bug

---

## тЬЕ рждрж╛рж╣рж▓рзЗ dependency ржмрж╛ржж ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗ ржХрзА ржХрж░рждрзЗ рж╣ржмрзЗ?

рждрзЛржорж╛ржХрзЗ **React-ржХрзЗ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ ржпрзЗ ржПржЗ ржорж╛ржиржЯрж┐ ржЖрж░ reactive ржирж╛**, ржорж╛ржирзЗ ржПржЯрж╛ рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржмрзЗ ржирж╛ред

ржЙржжрж╛рж╣рж░ржг:

```js {2,3,9}
const serverUrl = "https://localhost:1234";
const roomId = "music"; // ржПржЯрж╛ ржПржЦржи component-ржПрж░ ржмрж╛ржЗрж░рзЗ, рждрж╛ржЗ reactive ржирж╛

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // тЬЕ ржПржЦрж╛ржирзЗ dependency ржжрж░ржХрж╛рж░ ржирзЗржЗ, ржХрж╛рж░ржг roomId ржПржЦржи ржЕржкрж░рж┐ржмрж░рзНрждржирзАрзЯ
}
```

ржПржЦржи `roomId` рж╣ржЪрзНржЫрзЗ ржПржХржЯрж╛ **static ржорж╛ржи**тАФcomponent-ржПрж░ ржмрж╛ржЗрж░рзЗ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржХрзЛржирзЛ props ржмрж╛ state ржирж╛ред ржХрж╛ржЬрзЗржЗ ржПржЯрж╛ ржХржЦржирзЛ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржмрзЗ ржирж╛, effect ржЖржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ржУ ржжрж░ржХрж╛рж░ ржирзЗржЗред

---

## ЁЯФЧ Sandpack ржбрзЗржорзЛ (рж╕ржорзНржкрзВрж░рзНржг ржХрзЛржб)

```js
import { useEffect } from "react";
import { createConnection } from "./chat.js";

const serverUrl = "https://localhost:1234";
const roomId = "music"; // ржПржЦржи ржПржЯрж╛ static

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // тЬЕ ржХрзЗржмрж▓ ржПржХржмрж╛рж░ ржЪрж▓ржмрзЗ, ржХрж╛рж░ржг ржХрзЛржирзЛ reactive ржорж╛ржирзЗ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗ ржирж╛
  return <h1>Welcome to the {roomId} room!</h1>;
}
```

```js src/chat.js
export function createConnection(serverUrl, roomId) {
  return {
    connect() {
      console.log(
        'тЬЕ Connecting to "' + roomId + '" room at ' + serverUrl + "..."
      );
    },
    disconnect() {
      console.log('тЭМ Disconnected from "' + roomId + '" room at ' + serverUrl);
    },
  };
}
```

---

## ЁЯУЭ рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзЛ

| ржмрж┐рж╖рзЯ                                                    | ржнрж╛рж▓рзЛ ржмрзНржпржмрж╣рж╛рж░                       | ржЦрж╛рж░рж╛ржк ржмрзНржпржмрж╣рж╛рж░              |
| ------------------------------------------------------- | ---------------------------------- | -------------------------- |
| reactive ржорж╛ржи (ржпрзЗржоржи props/state) effect-ржП ржкрзЬрж▓рзЗ           | dependency list-ржП ржжрж┐рждрзЗ рж╣ржмрзЗ         | ржмрж╛ржж ржжрж┐рж▓рзЗ bug рж╣ржмрзЗ           |
| static ржорж╛ржи (component-ржПрж░ ржмрж╛ржЗрж░рзЗ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░) effect-ржП ржкрзЬрж▓рзЗ | dependency list-ржП ржжрзЗржУрзЯрж╛ рж▓рж╛ржЧржмрзЗ ржирж╛   | React ржЪрж┐ржирзНрждрж┐рждржУ рж╣ржмрзЗ ржирж╛      |
| dependency ржмрж╛ржж ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗ                               | ржкрзНрж░ржорж╛ржг ржХрж░рзЛ ржпрзЗ ржорж╛ржиржЯрж┐ ржЖрж░ reactive ржирж╛ | рж╢рзБржзрзБ \[] ржжрж┐рзЯрзЗ ржжрж┐рж▓рзЗ ржЪрж▓ржмрзЗ ржирж╛ |

---

ржЪрж▓рзБржи Mojnu ржнрж╛ржЗ, ржПржмрж╛рж░ ржЖржорж░рж╛ **Section 1.2** рж▓рж┐ржЦрж┐ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рзЯ, рж╕рж╣ржЬ-рж╕рж░рж▓ржнрж╛ржмрзЗ ржпрзЗржи ржЖржкржирж╛рж░ ржкрж╛ржаржХрж░рж╛ (React рж╢рзЗржЦрж╛рж░ рж╢рзБрж░рзБрждрзЗ ржерж╛ржХрж╛ ржбрзЗржнрзЗрж▓ржкрж╛рж░рж░рж╛) ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗред

---

## ЁЯзй рзз.рзи: Dependency ржмржжрж▓рж╛рждрзЗ рж╣рж▓рзЗ, ржХрзЛржб ржмржжрж▓рж╛ржУ

### (_To change the dependencies, change the code_)

React-ржП `useEffect()` ржПрж░ dependency list ржЖржкржирж┐ ржЗржЪрзНржЫрж╛ржорждрзЛ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред **ржЖржкржирж╛рж░ effect-ржПрж░ ржХрзЛржб ржпрзЗрж╕ржм reactive ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ**, рж╕рзЗржЗ ржЕржирзБржпрж╛рзЯрзА dependency list **ржЕржЯрзЛржорзЗржЯрж┐ржХ ржирж┐рж░рзНржзрж╛рж░ржг** рж╣рзЯред

### ЁЯза ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

React-ржП ржХрж╛ржЬ ржХрж░рж╛рж░ рж╕ржорзЯ ржПржЗ рждрж┐ржиржЯрж┐ ржзрж╛ржк ржкрзНрж░рж╛рзЯржЗ ржШржЯрзЗ:

1. ржЖржкржирж┐ ржкрзНрж░ржержорзЗ effect-ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб ржмрж╛ ржорж╛ржи (props/state) ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗржиред
2. ржПрж░ржкрж░ React рж▓рж┐ржирзНржЯрж╛рж░ ржЖржкржирж╛ржХрзЗ ржмрж▓рзЗ ржХрзЛржи ржорж╛ржиржЧрзБрж▓рзЛ dependency list-ржП ржерж╛ржХрждрзЗ рж╣ржмрзЗред
3. ржЖржкржирж┐ ржпржжрж┐ ржПржЗ dependency list ржкржЫржирзНржж ржирж╛ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржЖржмрж╛рж░ effect-ржПрж░ ржХрзЛржбржЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣рзЯред

**рж╕рзБрждрж░рж╛ржВ, dependency list ржмржжрж▓рж╛рждрзЗ ржЪрж╛ржЗрж▓рзЗ, effect-ржПрж░ ржХрзЛржбржЯрж╛ржЗ ржЖржЧрзЗ ржмржжрж▓рж╛рждрзЗ рж╣ржмрзЗред**

---

### ЁЯзо ржПржЯрж╛ ржЕржирзЗржХржЯрж╛ ржЕржЩрзНржХ ржорзЗрж▓рж╛ржирзЛрж░ ржорждрзЛ

ржЖржкржирж┐ ржзрж░рзБржи ржПржХржЯрж╛ dependency ржХржорж╛рждрзЗ ржЪрж╛ржЪрзНржЫрзЗржиред рждржЦржи ржЖржкржирж╛ржХрзЗ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рждрзЗ рж╣ржмрзЗ ржПржоржи ржХрзЛржб, ржпрзЗржЯрж╛ рж╕рзЗржЗ dependency-рж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржирж╛ ржХрж░рзЗ ржЪрж▓рзЗред ржпрзЗржоржи ржЕржЩрзНржХрзЗ рж╕ржорзАржХрж░ржг ржорж┐рж▓рж┐рзЯрзЗ ржПржХржЯрж╛ ржорж╛ржи ржмрзЗрж░ ржХрж░рждрзЗ рж╣рзЯтАФржарж┐ржХ рждрзЗржоржиред

---

## тЪая╕П рж╕рж╛ржмржзрж╛ржи: рж▓рж┐ржирзНржЯрж╛рж░ рж╕рж╛ржкрзНрж░рзЗрж╕ ржХрж░рж╛ ржорж╛ржирзЗ React-ржХрзЗ ржнрзБрж▓ рждржерзНржп ржжрзЗржУрзЯрж╛

ржЕржирзЗржХ ржкрзБрж░рзЛржирзЛ ржХрзЛржбржмрзЗрж╕рзЗ ржПржЗрж░ржХржо рж▓рж╛ржЗржи ржжрзЗржЦрж╛ ржпрж╛рзЯ:

```js {3-4}
useEffect(() => {
  // ...
  // ЁЯФ┤ ржнрзБрж▓: рж▓рж┐ржирзНржЯрж╛рж░ рж╕рж╛ржЗрж▓рзЗржирзНржЯ ржХрж░рзЗ ржлрзЗрж▓рж╛
  // eslint-disable-next-line react-hooks/exhaustive-deps
}, []);
```

ржПржнрж╛ржмрзЗ рж▓рж┐ржирзНржЯрж╛рж░ржХрзЗ ржерж╛ржорж┐рзЯрзЗ ржжрзЗржУрзЯрж╛рж░ ржорж╛ржирзЗ React-ржХрзЗ **ржорж┐ржерзНржпрж╛ ржмрж▓рж╛**тАФeffect ржпрзЗ ржорж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗ, рж╕рзЗржЯрж╛ React-ржХрзЗ ржЬрж╛ржирж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржирж╛ред ржлрж▓рзЗ, React ржнрзБрж▓ржнрж╛ржмрзЗ ржЖржЪрж░ржг ржХрж░рзЗ ржПржмржВ **ржЦрзБржм ржмрж╛ржЬрзЗ ржзрж░ржирзЗрж░ ржмрж╛ржЧ** рждрзИрж░рж┐ рж╣рзЯ, ржпрзЗржЧрзБрж▓рзЛ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛ржУ ржХржарж┐ржиред

---

## ЁЯТе ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг: ржпржЦржи effect рж╕ржарж┐ржХржнрж╛ржмрзЗ ржЖржкржбрзЗржЯ рж╣рзЯ ржирж╛

```jsx
import { useState, useEffect } from "react";

export default function Timer() {
  const [count, setCount] = useState(0);
  const [increment, setIncrement] = useState(1);

  function onTick() {
    setCount(count + increment);
  }

  useEffect(() => {
    const id = setInterval(onTick, 1000);
    return () => clearInterval(id);
    // eslint-disable-next-line react-hooks/exhaustive-deps тЭМ
  }, []);

  return (
    <>
      <h1>
        Counter: {count}
        <button onClick={() => setCount(0)}>Reset</button>
      </h1>
      <hr />
      <p>
        ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржЗржиржХрзНрж░рж┐ржорзЗржирзНржЯ рж╣ржмрзЗ:
        <button
          disabled={increment === 0}
          onClick={() => setIncrement((i) => i - 1)}
        >
          тАУ
        </button>
        <b>{increment}</b>
        <button onClick={() => setIncrement((i) => i + 1)}>+</button>
      </p>
    </>
  );
}
```

### ЁЯдФ ржХрзА рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЛ?

- ржЖржкржирж┐ `increment` ржорж╛ржиржЯрж╛ ржмрж╛рзЬрж╛рж▓рзЗржи, ржХрж┐ржирзНрждрзБ counter ржПржХржЗ рж░ржХржоржЗ ржерзЗржХрзЗ ржпрж╛ржЪрзНржЫрзЗ!
- ржХрж╛рж░ржг: React ржоржирзЗ ржХрж░ржЫрзЗ `onTick` ржХржЦржирзЛржЗ ржмржжрж▓рж╛ржмрзЗ ржирж╛ред ржХрж╛рж░ржг ржЖржкржирж┐ dependency list-ржП ржХрж┐ржЫрзБржЗ ржжрзЗржиржирж┐ред
- ржХрж┐ржирзНрждрзБ `onTick` ржПрж░ ржнрж┐рждрж░рзЗ ржЖржЫрзЗ `count` ржЖрж░ `increment` тАФ ржпрзЗржЧрзБрж▓рзЛ **ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржирждрзБржи рж╣рзЯ**ред
- рждрж╛ржЗ `onTick` **ржкрзБрж░рзЛржирзЛ ржорж╛ржи** (count = 0, increment = 1) ржзрж░рзЗ рж░рж╛ржЦржЫрзЗ, ржПржмржВ ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ `setCount(0 + 1)` ржХрж░рзЗржЗ ржЪрж▓рзЗржЫрзЗред

ржлрж▓рзЗ ржЖржкржирж╛рж░ counter ржХржЦржирзЛржЗ рзз-ржПрж░ ржмрзЗрж╢рж┐ рж╣ржмрзЗ ржирж╛ред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи ржХрзА?

ржПржЗ ржзрж░ржгрзЗрж░ ржмрж╛ржЧ ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛рж░ ржЬржирзНржп dependency list ржарж┐ржХржнрж╛ржмрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред

ржпржжрж┐ ржЖржкржирж┐ ржЪрж╛ржи `onTick` ржПрж░ ржнрж┐рждрж░рзЗ рж╕ржмрж╕ржорзЯ **рж╕рж░рзНржмрж╢рзЗрж╖** `count` ржЖрж░ `increment` ржмрзНржпржмрж╣рж╛рж░ рж╣рзЛржХ, рждрж╛рж╣рж▓рзЗ `onTick` ржХрзЗ **effect event** ржмрж╛ржирж╛рждрзЗ рж╣ржмрзЗред (ржпрзЗржЯрж╛ ржЖржорж░рж╛ ржкрж░рзЗрж░ ржЕржзрзНржпрж╛рзЯрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЖрж▓рзЛржЪржирж╛ ржХрж░ржм)

---

## ЁЯза ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржирж┐рзЯржо

| ржнрзБрж▓ ржХрж╛ржЬ                                                | ржХрзЗржи ржнрзБрж▓                                               | рж╕ржарж┐ржХ ржмрж┐ржХрж▓рзНржк                                     |
| ------------------------------------------------------ | ----------------------------------------------------- | ----------------------------------------------- |
| `useEffect` ржП dependency ржирж╛ ржжрж┐рзЯрзЗ eslint-ignore ржмрзНржпржмрж╣рж╛рж░ | React ржнрзБрж▓ ржзрж╛рж░ржгрж╛ ржирзЗрзЯ ржпрзЗ effect ржХрж╛рж░ржУ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗ ржирж╛ | ржХрзЛржб ржмржжрж▓рж╛ржУ, ржпрж╛рждрзЗ dependency ржХржорзЗ                  |
| ржкрзБрж░рзЛржирзЛ `count` ржмрж╛ `increment` ржорж╛ржирзЗ рж╕рзЗржЯ ржХрж░рж╛             | effect ржХржЦржирзЛ ржЖржкржбрзЗржЯ рж╣ржЪрзНржЫрзЗ ржирж╛                            | effect event ржмрж╛ updater function ржмрзНржпржмрж╣рж╛рж░        |
| рж╢рзБржзрзБ `[]` ржжрж┐рзЯрзЗ effect ржЪрж╛рж▓рж╛ржирзЛ                           | ржПржЯрж╛ ржмрж▓рзЗ ржпрзЗ effect ржХрзЗржмрж▓ mount-ржП ржЪрж▓ржмрзЗ                   | ржпржжрж┐ ржнрж┐рждрж░рзЗ reactive ржорж╛ржи ржерж╛ржХрзЗ, `[dependency]` ржжрж╛ржУ |

---

## ЁЯУМ ржЙржкрж╕ржВрж╣рж╛рж░

React-ржП `useEffect()` ржПрж░ dependency list ржХржЦржирзЛржЗ ржЗржЪрзНржЫрзЗржорждрзЛ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред рж╕рзЗржЯрж╛ **effect-ржПрж░ ржХрзЛржб** ржжрзЗржЦрзЗ рждрзИрж░рж┐ рж╣рзЯред рждрж╛ржЗ dependency list ржкрж╛рж▓рзНржЯрж╛рждрзЗ ржЪрж╛ржЗрж▓рзЗ effect-ржПрж░ ржнрж┐рждрж░рзЗрж░ **reactive ржорж╛ржирзЗрж░ ржмрзНржпржмрж╣рж╛рж░** ржкрж╛рж▓рзНржЯрж╛рждрзЗ рж╣ржмрзЗред

тЭМ рж▓рж┐ржирзНржЯрж╛рж░ржХрзЗ ржЪрзБржк ржХрж░рж╛ржирзЛ ржХрзЛржирзЛ рж╕ржорж╛ржзрж╛ржи ржирж╛ред

тЬЕ dependency ржорзЗрж▓рж╛рждрзЗ ржирж╛ ржкрж╛рж░рж▓рзЗ effect ржмрж╛ ржХрзЛржб рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржмржжрж▓рж╛ржУред

---

Md. Mojnu Miah, ржирж┐ржЪрзЗ Section 2: **Removing unnecessary dependencies** ржПржмржВ Subsection 2.1: **Should this code move to an event handler?** ржПрж░ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрж╛ржВрж▓рж╛ ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрж┐рж▓рж╛ржо, ржпрзЗржи рждрзБржорж┐ React рж╢рзЗржЦрж╛рж░ рж╕ржорзЯ рж╕рж╣ржЬрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЛ:

---

## рж╕рзЗржХрж╢ржи рзи: ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ рж╕рж░рж╛ржирзЛ

ржпржЦржиржЗ рждрзБржорж┐ `useEffect` ржП ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ ржпрзЛржЧ ржХрж░рзЛ, рждржЦржи ржПржХржмрж╛рж░ ржнрж╛ржмрзЛтАФ
ЁЯСЙ ржПржЗ Effect-ржЯрж╛ ржЖрж╕рж▓рзЗржЗ ржХрж┐ ржУржЗ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ ржмржжрж▓рж╛рж▓рзЗ ржЪрж▓рж╛ ржЙржЪрж┐ржд?

ржЕржирзЗржХ рж╕ржорзЯ ржЙрждрзНрждрж░ рж╣рзЯ **ржирж╛**ред ржпрзЗржоржи:

- рждрзБржорж┐ ржЪрж╛ржУ Effect-ржПрж░ _ржЖрж▓рж╛ржжрж╛ ржЕржВрж╢_ ржпрзЗржи ржЖрж▓рж╛ржжрж╛ рж╢рж░рзНрждрзЗ ржЪрж▓рзЗред
- рждрзБржорж┐ ржЪрж╛ржУ рж╢рзБржзрзБ ржХрзЛржирзЛ ржорж╛ржи рж░рж┐ржб ржХрж░рждрзЗ (ржкрзЬрждрзЗ), рж░рж┐ржПржХрзНржЯ ржирж╛ ржХрж░рждрзЗред
- ржХрзЛржирзЛ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ (ржпрзЗржоржи ржлрж╛ржВрж╢ржи ржмрж╛ ржЕржмржЬрзЗржХрзНржЯ) ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржмрж╛рж░ ржмржжрж▓рж╛рзЯтАФржпрж╛ рждрзБржорж┐ ржЪрж╛ржУ ржирж╛ред

ржПржЗ рж╕ржорж╕рзНржпрж╛ржЧрзБрж▓рзЛрж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ рж╣рж▓рзЗ, рждрзЛржорж╛рж░ Effect-ржПрж░ ржХрзЛржбржЯрж╛ ржирж┐рзЯрзЗ ржкрзНрж░рж╢рзНржи ржХрж░рждрзЗ рж╣ржмрзЗред

---

## рж╕рзЗржХрж╢ржи рзи.рзз: ржПржЗ ржХрзЛржбржЯрж╛ ржХрж┐ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗ ржерж╛ржХрж╛ ржЙржЪрж┐ржд?

**ржкрзНрж░ржержо ржкрзНрж░рж╢рзНржиржЯрж╛ржЗ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд:**
ЁЯСЙ "ржПржЗ ржХрзЛржбржЯрж╛ ржХрж┐ рж╕рждрзНржпрж┐ржЗ Effect ржП ржерж╛ржХрж╛ ржжрж░ржХрж╛рж░, ржирж╛ржХрж┐ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗ рж░рж╛ржЦрж╛ ржнрж╛рж▓рзЛ?"

### ржнрзБрж▓ ржЙржжрж╛рж╣рж░ржг:

ржзрж░рзЛ, рждрзЛржорж╛рж░ ржПржХржЯрж╛ ржлрж░рзНржо ржЖржЫрзЗред ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ рж╣рж▓рзЗ `submitted` state `true` рж╣рзЯред рждржЦржи рждрзБржорж┐ POST рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржУ ржЖрж░ ржПржХржЯрж┐ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржжрзЗржЦрж╛ржУред рждрзБржорж┐ ржПржЯрж╛ `useEffect` ржПрж░ ржоржзрзНржпрзЗ рж▓рж┐ржЦрж▓рзЗ:

```js
useEffect(() => {
  if (submitted) {
    post("/api/register");
    showNotification("Successfully registered!");
  }
}, [submitted]);
```

### ржкрж░рзЗ, рждрзБржорж┐ `theme` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ:

```js
const theme = useContext(ThemeContext);

useEffect(() => {
  if (submitted) {
    post("/api/register");
    showNotification("Successfully registered!", theme);
  }
}, [submitted, theme]);
```

ржПржЦржи ржзрж░рзЛ рждрзБржорж┐ ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЗржЫрзЛ, ржПрж░ржкрж░ ржерж┐ржо ржЪрзЗржЮрзНржЬ ржХрж░рж▓рзЗ `theme` ржмржжрж▓рзЗ ржпрж╛ржмрзЗред рждржЦржи Effect ржЖржмрж╛рж░ ржЪрж▓ржмрзЗ, ржПржмржВ ржЖржЧрзЗрж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЖржмрж╛рж░ ржжрзЗржЦрж╛ржмрзЗтАФржпрж╛ рждрзБржорж┐ ржЪрж╛ржУ ржирж╛ред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

ржПржЗ ржЗржнрзЗржирзНржЯржЯрж╛ рждрзЛ рж╣рзЯрзЗржЫрзЗ **ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ ржХрж░рж╛рж░ рж╕ржорзЯ**ред
рждрж╛рж╣рж▓рзЗ POST рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПржмржВ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи **ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗ** рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд, Effect-ржП ржирзЯред

```js
function handleSubmit() {
  post("/api/register");
  showNotification("Successfully registered!", theme);
}
```

ржПржЦржи `theme` ржпржд ржмржжрж▓рж╛ржХ ржирж╛ ржХрзЗржи, рж╢рзБржзрзБ рж╕рж╛ржмржорж┐ржЯ ржХрж░рж╛рж░ рж╕ржорзЯржЗ ржХрзЛржбржЯрж╛ ржЪрж▓ржмрзЗред

---

### ржЙржкрж╕ржВрж╣рж╛рж░:

> **ржЗржлрзЗржХрзНржЯ рж╢рзБржзрзБ рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ, ржпржЦржи React ржирж┐ржЬрзЗ ржерзЗржХрзЗ ржХрзЛржирзЛ state ржмрж╛ prop-ржПрж░ ржкрж░рж┐ржмрж░рзНрждржирзЗ ржХрзЛржб ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗред**
>
> ржЖрж░ ржпржжрж┐ ржХрзЛржирзЛ ржХрзЛржб **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржХрзЛржирзЛ ржЕрзНржпрж╛ржХрж╢ржирзЗрж░ ржлрж▓рзЗ** ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржУ (ржпрзЗржоржи ржХрзНрж▓рж┐ржХ, рж╕рж╛ржмржорж┐ржЯ)тАФ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗ рж░рж╛ржЦрзЛред

Md. Mojnu Miah, ржирж┐ржЪрзЗ Section 2.2: **Is your Effect doing several unrelated things?** ржПрж░ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрж┐рж▓рж╛ржо, ржпрзЗржи рждрзБржорж┐ рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЛ ржХрзЗржи `useEffect`-ржП ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ рж░рж╛ржЦрж╛ ржмрж┐ржкржж ржбрзЗржХрзЗ ржЖржирждрзЗ ржкрж╛рж░рзЗ:

---

## рж╕рзЗржХрж╢ржи рзи.рзи: ржЖржкржирж╛рж░ Effect ржХрж┐ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЕржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ ржХрж╛ржЬ ржХрж░ржЫрзЗ?

ржкрзНрж░рж╢рзНржи ржХрж░рзЛ:
ЁЯСЙ "ржПржЗ `useEffect` ржХрж┐ ржПржХрж╕рж╛ржерзЗ ржПржХрж╛ржзрж┐ржХ ржЖрж▓рж╛ржжрж╛-ржзрж░ржирзЗрж░ ржХрж╛ржЬ ржХрж░ржЫрзЗ?"

### ржЙржжрж╛рж╣рж░ржг:

ржзрж░рзЛ, рждрзЛржорж╛рж░ ржПржХржЯрж╛ `ShippingForm` ржЖржЫрзЗред ржЗржЙржЬрж╛рж░ ржЖржЧрзЗ ржжрзЗрж╢ (country) рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ рж╢рж╣рж░ (city), рждрж╛рж░ржкрж░ ржПрж▓рж╛ржХрж╛рж░ (area)ред

#### ржкрзНрж░ржержо ржзрж╛ржк:

ржпржЦржи ржЗржЙржЬрж╛рж░ ржПржХржЯрж╛ ржжрзЗрж╢ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЗ, рждржЦржи рж╕рзЗржЗ ржжрзЗрж╢рзЗрж░ рж╕ржм рж╢рж╣рж░рзЗрж░ рж▓рж┐рж╕рзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржЖржирж╛ ржжрж░ржХрж╛рж░ред

тЬЕ ржПржЗ ржХрж╛ржЬ ржарж┐ржХржнрж╛ржмрзЗ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ:

```js
useEffect(() => {
  fetch(`/api/cities?country=${country}`)
    .then(...); // cities ржлрзЗржЪ ржХрж░рзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
}, [country]);
```

ржПржЦрж╛ржирзЗ ржарж┐ржХржнрж╛ржмрзЗ `cities` ржбрзЗржЯрж╛ `country` ржЕржирзБржпрж╛рзЯрзА ржлрзЗржЪ рж╣ржЪрзНржЫрзЗ, ржпрзЗржЯрж╛ ржнрж╛рж▓рзЛред ржХрж╛рж░ржг ржЗржЙржЬрж╛рж░ ржпржЦржиржЗ ржжрзЗрж╢ ржмржжрж▓рж╛ржмрзЗ, рждржЦржиржЗ ржирждрзБржи рж╢рж╣рж░рзЗрж░ рждрж╛рж▓рж┐ржХрж╛ ржЖрж╕ржмрзЗред

---

### ржХрж┐ржирзНрждрзБ рж╕ржорж╕рзНржпрж╛ рж╢рзБрж░рзБ рж╣рзЯ ржпржЦржи...

рждрзБржорж┐ ржПржХржЗ `useEffect`-ржПрж░ ржнрж┐рждрж░рзЗ **city ржЕржирзБржпрж╛рзЯрзА area ржлрзЗржЪ** ржХрж░рж╛рж░ ржХрж╛ржЬржУ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рзЛ:

```js
useEffect(() => {
  // country ржЕржирзБржпрж╛рзЯрзА cities ржлрзЗржЪ
  // city ржЕржирзБржпрж╛рзЯрзА areas ржлрзЗржЪ
}, [country, city]);
```

ржПржЦржи рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЛ:

- ржЗржЙржЬрж╛рж░ ржпржжрж┐ рж╢рзБржзрзБ **city** ржмржжрж▓рж╛рзЯ, рждрж╛рж╣рж▓рзЗ `useEffect` ржЖржмрж╛рж░ ржЪрж▓рзЗ ржпрж╛ржмрзЗред
- ржХрж┐ржирзНрждрзБ рждрзЛржорж╛рж░ ржХрзЛржбрзЗ `country`-ржУ ржЖржмрж╛рж░ ржлрзЗржЪ рж╣рзЯрзЗ ржпрж╛ржмрзЗ (ржпрзЗржЯрж╛ ржжрж░ржХрж╛рж░ ржЫрж┐рж▓ ржирж╛)ред
  ржПржЗржнрж╛ржмрзЗ city ржкрж╛рж▓рзНржЯрж╛рж▓рзЗржУ ржЖржмрж╛рж░ country-ржПрж░ ржЬржирзНржп city рж▓рж┐рж╕рзНржЯ ржлрзЗржЪ рж╣ржмрзЗтАФржпрж╛ ржПржХржжржоржЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи: ржХрж╛ржЬржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЛ

ржпрзЗрж╣рзЗрждрзБ:

- `country` ржмржжрж▓рж╛рж▓рзЗ **рж╢рж╣рж░рзЗрж░ рж▓рж┐рж╕рзНржЯ** ржлрзЗржЪ ржХрж░рждрзЗ рж╣рзЯ
- `city` ржмржжрж▓рж╛рж▓рзЗ **ржПрж░рж┐рзЯрж╛рж░ рж▓рж┐рж╕рзНржЯ** ржлрзЗржЪ ржХрж░рждрзЗ рж╣рзЯ

рждрж╛ржЗ ржжрзБржЯрж┐ ржЖрж▓рж╛ржжрж╛ `useEffect` рж▓рж┐ржЦрзЛ:

```js
// Country ржЕржирзБржпрж╛рзЯрзА Cities ржлрзЗржЪ ржХрж░рж╛рж░ Effect
useEffect(() => {
  fetch(`/api/cities?country=${country}`)
    .then(...); // setCities
}, [country]);

// City ржЕржирзБржпрж╛рзЯрзА Areas ржлрзЗржЪ ржХрж░рж╛рж░ Effect
useEffect(() => {
  if (city) {
    fetch(`/api/areas?city=${city}`)
      .then(...); // setAreas
  }
}, [city]);
```

ржПржЦржи:

- `country` ржмржжрж▓рж╛рж▓рзЗ рж╢рзБржзрзБ `cities` ржлрзЗржЪ рж╣ржмрзЗред
- `city` ржмржжрж▓рж╛рж▓рзЗ рж╢рзБржзрзБ `areas` ржлрзЗржЪ рж╣ржмрзЗред

ржжрзБржЯрж┐ Effect ржЖрж▓рж╛ржжрж╛тАФрждрж╛ржЗ ржПржХржЯрж╛рж░ ржХрж╛ржЬ ржЖрж░рзЗржХржЯрж╛ржХрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░ржмрзЗ ржирж╛ред

---

### ржмрзНржпрж╛ржЦрзНржпрж╛:

> ржкрзНрж░рждрж┐ржЯрж┐ `useEffect` ржпрзЗржи ржПржХржЯрж┐ **рж╕рзНржмрж╛ржзрзАржи ржХрж╛ржЬ** ржмрж╛ **рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬрзЗрж╢ржи ржкрзНрж░рж╕рзЗрж╕** ржкрзНрж░рждрж┐ржирж┐ржзрж┐рждрзНржм ржХрж░рзЗред
> ржПржХрж╛ржзрж┐ржХ "ржЕрж▓ржЧрж╛ржжрж╛" ржХрж╛ржЬржХрзЗ ржПржХрж╕рж╛ржерзЗ рж░рж╛ржЦрж▓рзЗ ржмрж╛ржЬрзЗ side effect рж╣рзЯред
> ржмрж░ржВ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЛтАФржпрж╛рждрзЗ ржкрзНрж░рждрж┐ржЯрж╛ Effect ржирж┐ржЬ ржирж┐ржЬ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ ржЕржирзБржпрж╛рзЯрзА ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред

---

### ржпржжрж┐ ржХрзЛржб ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржоржирзЗ рж╣рзЯ?

рждрж╛рж╣рж▓рзЗ рждрзБржорж┐ `fetchData(url, setter)` ржирж╛ржорзЗ ржПржХржЯрж╛ **custom hook** ржмрж╛ржирж┐рзЯрзЗ ржжрзБржЯрзЛ Effect-ржЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ рж╕ржВржХрзНрж╖рзЗржк ржХрж░рждрзЗ ржкрж╛рж░рзЛред ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ рж╕рзЗржЯрж╛ ржжрзЗржЦрж╛рждрзЗржУ ржкрж╛рж░рж┐ред

---

Md. Mojnu Miah, ржирж┐ржЪрзЗ Section 2.3: **Are you reading some state to calculate the next state?** рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржЫрж┐ред ржПржЗ ржЕржВрж╢ржЯрж╛ React ржПрж░ `useEffect` ржЖрж░ `useState`-ржПрж░ ржЧржнрзАрж░ ржХрж┐ржирзНрждрзБ ржжрж░ржХрж╛рж░рж┐ ржПржХржЯрж╛ ржЯржкрж┐ржХтАФржпрзЗржЯрж╛ ржкрзНрж░рж╛рзЯржЗ ржорж╛ржирзБрж╖ ржнрзБрж▓ ржХрж░рзЗред

---

## рж╕рзЗржХрж╢ржи рзи.рзй: ржЖржкржирж┐ ржХрж┐ ржмрж░рзНрждржорж╛ржи рж╕рзНржЯрзЗржЯ ржкрзЬрзЗ ржкрж░ржмрж░рзНрждрзА рж╕рзНржЯрзЗржЯ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░ржЫрзЗржи?

ржЪрж▓, ржПржХржЯрж╛ `ChatRoom` ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐:

```js
const [messages, setMessages] = useState([]);

useEffect(() => {
  const connection = createConnection();
  connection.connect();

  connection.on("message", (receivedMessage) => {
    setMessages([...messages, receivedMessage]); // тЭМ ржнрзБрж▓
  });

  return () => connection.disconnect();
}, [roomId, messages]); // ЁЯФ┤ рж╕ржорж╕рзНржпрж╛рж░ ржорзВрж▓
```

ржПржЦрж╛ржирзЗ ржпрждржмрж╛рж░ ржПржХржЯрж╛ ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЖрж╕рзЗ, `messages` ржПрж░ ржкрзБрж░ржирзЛ ржХржкрж┐ ржирж┐рзЯрзЗ ржирждрзБржи ржПржХржЯрж╛ ржЕрзНржпрж╛рж░рзЗ ржмрж╛ржирж┐рзЯрзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред

---

### рж╕ржорж╕рзНржпрж╛ ржХрзЛржерж╛рзЯ?

`setMessages([...messages, receivedMessage])` рж▓рж╛ржЗржиржЯрж╛рзЯ рждрзБржорж┐ `messages` рж░рж┐ржб ржХрж░ржЫрзЛтАФржорж╛ржирзЗ React-ржПрж░ рж░рж┐-ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ Access ржХрж░ржЫрзЛред рждрж╛ржЗ `messages` ржХрзЗ `[messages]` рж╣рж┐рж╕рзЗржмрзЗ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ рж▓рж┐рж╕рзНржЯрзЗ рж░рж╛ржЦрждрзЗ рж╣ржЪрзНржЫрзЗред

**ржХрж┐ржирзНрждрзБ ржПрж░ ржлрж▓рж╛ржлрж▓ ржХрзА рж╣рзЯ?**

- ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЖрж╕рж▓рзЗржЗ `setMessages()` ржХрж▓ рж╣рзЯ тЖТ Component рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред
- `messages` ржЖржкржбрзЗржЯ рж╣рзЯ тЖТ `useEffect` ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣рзЯред
- Effect ржЪрж╛рж▓рзБ рж╣рж▓рзЗ тЖТ `createConnection()` ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣рзЯред
- ржЖржмрж╛рж░ ржХрж╛ржирзЗржХрж╢ржи, ржЖржмрж╛рж░ ржХрж╛ржирзЗржХрж╢ржи...

ЁЯТе ржлрж▓рж╛ржлрж▓: ржкрзНрж░рждрж┐ржЯрж┐ ржорзЗрж╕рзЗржЬрзЗ ржЪрзНржпрж╛ржЯ рж░рзБржо ржмрж╛рж░ржмрж╛рж░ ржХрж╛ржирзЗржХрзНржЯ-ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ рж╣рзЯред
ржПржЗржЯрж╛ ржЦрзБржм ржмрж╛ржЬрзЗ ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕ржкрзЗрж░рж┐рзЯрзЗржирзНрж╕!

---

### тЬЕ рж╕ржарж┐ржХ рж╕ржорж╛ржзрж╛ржи: updater ржлрж╛ржВрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ

```js
setMessages((msgs) => [...msgs, receivedMessage]);
```

ржкрзБрж░рзЛ ржХрзЛржбржЯрж╛ ржПржнрж╛ржмрзЗ рж▓рж┐ржЦрзЛ:

```js
useEffect(() => {
  const connection = createConnection();
  connection.connect();

  connection.on("message", (receivedMessage) => {
    setMessages((msgs) => [...msgs, receivedMessage]); // тЬЕ ржнрж╛рж▓рзЛ
  });

  return () => connection.disconnect();
}, [roomId]); // тЬЕ ржПржЦржи messages ржжрж░ржХрж╛рж░ ржирзЗржЗ
```

ржПржЦржи ржЖрж░ `messages` рж░рж┐ржб ржХрж░ржЫрзЛ ржирж╛, рждрж╛ржЗ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ рж▓рж┐рж╕рзНржЯрзЗржУ рж░рж╛ржЦрж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред
React ржирж┐ржЬрзЗржЗ `msgs` ржЖрж░рзНржЧрзБржорзЗржирзНржЯрзЗ ржЖржЧрзЗрж░ `messages` ржжрж┐рзЯрзЗ ржжрзЗржмрзЗред ржПржЯрж╛ржХрзЗ ржмрж▓рзЗ **functional updater**ред

---

### ржХрзЗржи ржПржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ?

React state ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ, ржпржжрж┐ рждрзБржорж┐ ржлрж╛ржВрж╢ржи ржжрж╛ржУ (`prev => newValue`),
React рждржЦржиржЗ ржкрзБрж░ржирзЛ ржнрзНржпрж╛рж▓рзБ ржзрж░рзЗ рждрзЛржорж╛рж░ ржлрж╛ржВрж╢ржиржЯрж╛ ржЪрж╛рж▓рж╛рзЯред рждрж╛ржЗ рждрзЛржорж╛ржХрзЗ ржкрзБрж░ржирзЛ `messages` ржирж┐рзЯрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рждрзЗ рж╣рзЯ ржирж╛ред

---

### ржмрж╛ржВрж▓рж╛рзЯ рж╕рж╛рж░рж╛ржВрж╢:

> ржпржжрж┐ рждрзЛржорж╛рж░ `state` ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржкрзБрж░ржирзЛ `state` ржжрж░ржХрж╛рж░ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рж░рж╛рж╕рж░рж┐ рж░рж┐ржб ржирж╛ ржХрж░рзЗ `setState(prev => new)` рж╕рзНржЯрж╛ржЗрж▓рзЗ рж▓рзЗржЦрзЛред
> ржПрждрзЗ ржХрж░рзЗ `useEffect` ржмрж╛рж░ржмрж╛рж░ ржЪрж▓ржмрзЗ ржирж╛, ржХрзЛржб ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржнрж╛рж▓рзЛ ржерж╛ржХржмрзЗ, ржЖрж░ ржЗржЙржЬрж╛рж░рзЗрж░ ржЕржнрж┐ржЬрзНржЮрждрж╛ ржорж╕рзГржг рж╣ржмрзЗред

---

Md. Mojnu Miah, ржирж┐ржЪрзЗ Section 2.4 тАФ **"Do you want to read a value without 'reacting' to its changes?"** тАФ ржПрж░ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржЫрж┐ред ржПржЯрж┐ React-ржПрж░ ржПржХржЯрж┐ ржПржХржЯрзБ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ ржХржирж╕рзЗржкрзНржЯ ржпрж╛ future API `useEffectEvent` ржирж┐рзЯрзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рзЗред ржЖржорж░рж╛ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрзБржЭржмред

---

## ЁЯФО ржЖржкржирж┐ ржХрж┐ ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБ ржкрзЬрждрзЗ ржЪрж╛ржи ржХрж┐ржирзНрждрзБ рждрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐рзЯрж╛ (react) ржжрж┐рждрзЗ ржЪрж╛ржи ржирж╛?

React ржПрж░ `useEffect` рж╕рж╛ржзрж╛рж░ржгржд **reactive** рж╣рзЯтАФржорж╛ржирзЗ ржпрзЗрж╕ржм ржорж╛ржи (state/prop) рждрзБржорж┐ `effect` ржПрж░ ржнрж┐рждрж░рзЗ ржкрзЬрзЛ, рж╕рзЗржЧрзБрж▓рзЛржХрзЗ dependency list-ржП рж░рж╛ржЦрждрзЗ рж╣рзЯред

ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ рж╕ржорзЯ рждрзБржорж┐ ржПржоржи ржорж╛ржи (state) ржкрзЬрждрзЗ ржЪрж╛ржУ ржпрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржирзЗ рждрзЛржорж╛рж░ `effect` ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд ржирж╛ред

---

### ЁЯОп ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзЛржЭрж╛ржЗ

ржзрж░рж┐, рждрзБржорж┐ ржЪрж╛ржУ:

> ржпржЦржи ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЖрж╕рзЗ, рждржЦржи ржПржХржЯрж╛ рж╢ржмрзНржж ржмрж╛ржЬржмрзЗ (ЁЯФФ), ржХрж┐ржирзНрждрзБ ржпржжрж┐ `isMuted === true` рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржмрж╛ржЬржмрзЗ ржирж╛ред

```js
const [isMuted, setIsMuted] = useState(false);

useEffect(() => {
  connection.on("message", (msg) => {
    setMessages((msgs) => [...msgs, msg]);
    if (!isMuted) {
      playSound(); // ЁЯФФ
    }
  });
}, [roomId, isMuted]); // тЪая╕П ржПржЗ isMuted ржПрж░ ржЬржирзНржп effect ржЖржмрж╛рж░ ржЪрж▓рзЗ!
```

ржПржЦрж╛ржирзЗ рж╕ржорж╕рзНржпрж╛:

- `isMuted` ржмржжрж▓рж╛рж▓рзЗржЗ, ржкрзБрж░рзЛ `useEffect` ржЖржмрж╛рж░ ржЪрж▓ржмрзЗ!
- ржЕрж░рзНржерж╛рзО chat рж░рж┐-рж╕ржВржпрзЛржЧ (reconnect) рж╣ржмрзЗред
- ржПржЯрж╛ **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж░рж┐-рж░рж╛ржи** ржПржмржВ **ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕ржкрзЗрж░рж┐рзЯрзЗржирзНрж╕ ржирж╖рзНржЯ** ржХрж░рзЗред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи: `useEffectEvent`

React ржПржХржЯрж┐ ржирждрзБржи (experimental) API ржжрж┐рзЯрзЗржЫрзЗ: `useEffectEvent`
ржПржЯрж┐ ржПржоржи ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛ **"рж╕рж░рзНржмрж╢рзЗрж╖ рж╕рзНржЯрзЗржЯ/ржкрзНрж░ржкрж╕ ржкрзЬрждрзЗ ржкрж╛рж░рзЗ ржХрж┐ржирзНрждрзБ effect рж░рж┐-рж░рж╛ржи ржХрж░рж╛рзЯ ржирж╛"ред**

```js
const onMessage = useEffectEvent((receivedMessage) => {
  setMessages((msgs) => [...msgs, receivedMessage]);
  if (!isMuted) {
    playSound(); // ЁЯФФ ржХрж┐ржирзНрждрзБ ржПржЦржи effect-reactive ржирж╛!
  }
});
```

ржПржмрж╛рж░ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ `roomId` ржкрж░рж┐ржмрж░рзНрждржирзЗ ржХрж╛ржЬ рж╣ржмрзЗ:

```js
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  connection.on("message", (receivedMessage) => {
    onMessage(receivedMessage);
  });
  return () => connection.disconnect();
}, [roomId]); // тЬЕ ржЖрж░ isMuted ржирж╛ржЗ!
```

---

## ЁЯТб рж╕рж╛рж░ржорж░рзНржо:

> рждрзБржорж┐ ржпржжрж┐ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ ржХрзЛржи ржорж╛ржи (state/prop) ржкрзЬрзЛ, ржПржмржВ рждрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржирзЗржУ effect ржЪрж╛рж▓рзБ рж╣рзЛржХ **ржирж╛** ржЪрж╛ржУ,
> рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ рж▓ржЬрж┐ржХ `useEffectEvent()` ржПрж░ ржнрж┐рждрж░рзЗ рж░рж╛ржЦрзЛред

---

## ЁЯОБ Bonus: ржкрзНрж░ржкрж╕ ржлрж╛ржВрж╢ржирзЗрж░ ржЬржирзНржпржУ ржПржХржЗ рж╕ржорж╛ржзрж╛ржи

ржзрж░рзЛ рждрзЛржорж╛рж░ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ `onReceiveMessage` ржирж╛ржорзЗ ржПржХрзЗржХржмрж╛рж░ ржПржХрзЗржХ ржлрж╛ржВрж╢ржи ржкрж╛ржарж╛рзЯ:

```js
<ChatRoom onReceiveMessage={(msg) => { ... }} />
```

React ржзрж░рзЗ ржирзЗрзЯ:

> "ржПржЗ ржлрж╛ржВрж╢ржи рждрзЛ ржирждрзБржи! рждрж╛ржЗ effect ржЖржмрж╛рж░ ржЪрж╛рж▓рж╛ржУред"

рж╕ржорж╛ржзрж╛ржи:

```js
const onMessage = useEffectEvent((receivedMessage) => {
  onReceiveMessage(receivedMessage);
});
```

ржПржнрж╛ржмрзЗ effect ржлрж╛ржВрж╢ржи рж░рж┐-рж░рж╛ржи рж╣ржмрзЗ ржирж╛ ржмрж╛рж░ржмрж╛рж░ред

---

## ЁЯФБ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛: Reactive vs Non-Reactive Logic

**Reactive part** тЖТ `useEffect` (depends on things like `roomId`)
**Non-reactive part** тЖТ `useEffectEvent` (reads things like `isMuted` or latest props without causing rerun)

### ржЖрж░рзЗржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг:

```js
const onVisit = useEffectEvent((roomId) => {
  logVisit(roomId, notificationCount); // рж╢рзБржзрзБ ржкрзЬржЫрж┐, dependency ржирж╛
});

useEffect(() => {
  onVisit(roomId); // рж╢рзБржзрзБржорж╛рждрзНрж░ roomId ржкрж░рж┐ржмрж░рзНрждржирзЗ ржХрж╛ржЬ
}, [roomId]); // тЬЕ notificationCount ржХрзЗ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ ржХрж░рж╛ рж▓рж╛ржЧржЫрзЗ ржирж╛
```

---

## ЁЯза ржоржирзЗ рж░рж╛ржЦрж╛рж░ рж╕рж╣ржЬ ржирж┐рзЯржо:

> **Effect-ржПрж░ ржнрж┐рждрж░рзЗ ржХрзЛржирзЛ state ржмрж╛ prop ржкрзЬрж▓рзЗ рж╕рзЗржЯрж╛ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐рждрзЗ ржжрж┐рждрзЗ рж╣рзЯред
> ржХрж┐ржирзНрждрзБ рж╕рзЗржЯрж╛ ржирж╛ ржЪрж╛ржЗрж▓рзЗ, рж▓ржЬрж┐ржХржЯрж╛ `useEffectEvent` ржП рж░рж╛ржЦрзЛред**

---

HereтАЩs a **simple explanation in Bangla** for Section 3.5: _"Does some reactive value change unintentionally?"_

---

## ЁЯФН рж╕ржорж╕рзНржпрж╛ ржХрзЛржерж╛рзЯ?

ржЖржкржирж┐ ржЪрж╛ржЪрзНржЫрзЗржи `useEffect()` ржЪрж▓рзБржХ ржпржЦржи `roomId` ржмржжрж▓рж╛ржмрзЗред ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржирж┐ржЪрзЗрж░ ржорждрзЛ `options` ржирж╛ржорзЗ ржПржХржЯрж┐ object ржмрж╛ржирж┐рзЯрзЗржЫрзЗржи:

```js
const options = {
  serverUrl: serverUrl,
  roomId: roomId,
};
```

ржПржмржВ ржПржЯрж┐ `useEffect`-ржПрж░ ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗржи ржУ dependency рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯ ржХрж░рзЗржЫрзЗржи:

```js
useEffect(() => {
  const connection = createConnection(options);
  connection.connect();
  return () => connection.disconnect();
}, [options]);
```

## тЭМ рж╕ржорж╕рзНржпрж╛рж░ ржлрж▓рж╛ржлрж▓

ржПржЗ `options` object ржЯрж┐ **ржкрзНрж░рждрж┐ржмрж╛рж░ render рж╣рж▓рзЗ ржирждрзБржи ржХрж░рзЗ рждрзИрж░рж┐ рж╣рзЯ**, ржХрж╛рж░ржг ржПржЯрж┐ component-ржПрж░ ржнрж┐рждрж░рзЗ рж▓рзЗржЦрж╛ рж╣рзЯрзЗржЫрзЗред

JavaScript-ржП ржжрзБржЗржЯрж╛ object ржпржжрж┐ ржжрзЗржЦрждрзЗ ржПржХрж░ржХржо рж╣рж▓рзЗржУ, рждрж╛рж░рж╛ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ entity рж╣рзЯ:

```js
const a = { roomId: "music" };
const b = { roomId: "music" };
console.log(Object.is(a, b)); // false
```

ржПржЗ ржХрж╛рж░ржгрзЗ `options` рж╕ржмрж╕ржорзЯ ржирждрзБржи рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ ржкрзЬрзЗ, ржПржмржВ `useEffect` ржмрж╛рж░ржмрж╛рж░ rerun рж╣рзЯрзЗ ржпрж╛рзЯред

ржлрж▓рж╛ржлрж▓? ржЖржкржирж┐ рж╢рзБржзрзБ input box-ржП ржЯрж╛ржЗржк ржХрж░рж▓рзЗржи, ржХрж┐ржирзНрждрзБ **chat connection ржмрж╛рж░ржмрж╛рж░ disconnect ржЖрж░ reconnect рж╣ржЪрзНржЫрзЗ!** ржПржЯрж╛ ржЖржкржирж┐ ржЪрж╛ржи ржирж╛ред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи ржХрзА?

### ЁЯФ╣ рж╕ржорж╛ржзрж╛ржи 1: `options` ржХрзЗ рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рзБржи dependency ржерзЗржХрзЗ

ржПржмржВ ржнрзЗрждрж░рзЗ `roomId` ржЖрж░ `serverUrl` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

```js
useEffect(() => {
  const connection = createConnection({
    serverUrl: serverUrl,
    roomId: roomId,
  });
  connection.connect();
  return () => connection.disconnect();
}, [serverUrl, roomId]); // ржПржЦржи primitive value dependency
```

ржПржЦрж╛ржирзЗ object ржЯрж╛ effect ржПрж░ ржнрж┐рждрж░рзЗржЗ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ, рждрж╛ржЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи object рж╣рж▓рзЗржУ рж╕рзЗржЯрж╛рж░ ржХрж╛рж░ржгрзЗ `useEffect` rerun рж╣ржмрзЗ ржирж╛ тАФ ржХрж╛рж░ржг dependency рждрзЗ ржЖржорж░рж╛ рж╢рзБржзрзБ primitive values рж░рзЗржЦрзЗржЫрж┐ред

---

### ЁЯФ╣ рж╕ржорж╛ржзрж╛ржи 2: `useMemo` ржжрж┐рзЯрзЗ memoize ржХрж░рзБржи

ржпржжрж┐ ржЖржкржирж┐ object ржмрж╛ржЗрж░рзЗ рждрзИрж░рж┐ ржХрж░рждрзЗржЗ ржЪрж╛ржи, рждрж╛рж╣рж▓рзЗ `useMemo` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ React-ржХрзЗ ржмрж▓рзБржи object ржЯрж┐ рждржЦржиржЗ рждрзИрж░рж┐ ржХрж░рждрзЗ ржпржЦржи `roomId` ржмрж╛ `serverUrl` ржмржжрж▓рж╛ржмрзЗ:

```js
const options = useMemo(
  () => ({
    serverUrl: serverUrl,
    roomId: roomId,
  }),
  [serverUrl, roomId]
);
```

ржПржЦржи ржПржЗ `options` object рждрждржХрзНрж╖ржг ржПржХржЗ ржерж╛ржХржмрзЗ ржпрждржХрзНрж╖ржг ржирж╛ `roomId` ржмрж╛ `serverUrl` ржмржжрж▓рж╛рзЯред

---

## тЬЕ ржорзВрж▓ рж╢рж┐ржХрзНрж╖рж╛

- Object / Function ржХрзЗ `useEffect` ржПрж░ dependency ржмрж╛ржирж╛рж▓рзЗ ржкрзНрж░рждрж┐ render-ржП рждрж╛рж░рж╛ ржирждрзБржи рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ ржкрзЬрзЗред
- ржлрж▓рзЗ Unnecessary `Effect` reruns рж╣рзЯред
- рж╕ржорж╛ржзрж╛ржи:

  - primitive values ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи `[roomId, serverUrl]`
  - ржЕржержмрж╛ `useMemo` ржжрж┐рзЯрзЗ object/function memoize ржХрж░рзБржиред

---

## ЁЯза рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзБржи

> **"useEffect-ржПрж░ dependency list-ржП object/function рж░рж╛ржЦрж╛рж░ рж╕ржорзЯ рж╕рж╛ржмржзрж╛ржиред рждрж╛рж░рж╛ ржжрзЗржЦрждрзЗ ржПржХ рж╣рж▓рзЗржУ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи рж╣рзЯ!"**

---

ржПржЦрж╛ржирзЗ Section 3.5.1 ржПрж░ **рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛** ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

## ЁЯзй 3.5.1: Static Object/Function рж╣рж▓рзЗ Component ржПрж░ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрзБржи

### ЁЯОп рж╕ржорж╕рзНржпрж╛ ржоржирзЗ ржЖржЫрзЗ?

ржЖржЧрзЗрж░ рж╕рзЗржХрж╢ржирзЗ ржЖржорж░рж╛ ржжрзЗржЦрзЗржЫрж┐:
`useEffect()` ржПрж░ ржнрж┐рждрж░рзЗ ржпржжрж┐ object/function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐, ржЖрж░ рж╕рзЗржЯрж╛ ржкрзНрж░рждрж┐ render-ржП ржирждрзБржи рж╣рзЯ, рждрж╛рж╣рж▓рзЗ effect ржмрж╛рж░ржмрж╛рж░ rerun рж╣рзЯред

### тЬЕ рж╕ржорж╛ржзрж╛ржи рзз: ржпржжрж┐ object **ржкрж░рж┐ржмрж░рзНрждржи ржирж╛ рж╣рзЯ**, рждрж╛рж╣рж▓рзЗ component-ржПрж░ **ржмрж╛ржЗрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржи**ред

```js
// Component-ржПрж░ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрж╛рзЯ ржПржЯрж┐ ржкрзНрж░рждрж┐ render-ржП ржирждрзБржи рж╣ржЪрзНржЫрзЗ ржирж╛
const options = {
  serverUrl: "https://localhost:1234",
  roomId: "music",
};

function ChatRoom() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, []); // тЬЕ dependency-рждрзЗ ржХрж┐ржЫрзБ ржжрж┐рждрзЗ рж╣рзЯржирж┐
}
```

ЁЯФН ржПржЦрж╛ржирзЗ `options` object ржЯрж┐ ржПржХржжржо ржЙржкрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗ, ржХрж╛рж░ржг ржПржЯрж╛ `props` ржмрж╛ `state`-ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржирж╛ред

> ржлрж▓рзЗ React ржмрзБржЭрждрзЗ ржкрж╛рж░ржЫрзЗ тАУ ржПржЯрж┐ ржХрзЛржирзЛ reactive value ржирж╛, ржорж╛ржирзЗ render ржПрж░ рж╕рж╛ржерзЗ ржПрж░ ржХрзЛржирзЛ рж╕ржорзНржкрж░рзНржХ ржирзЗржЗред

### тЬЕ рж╕ржорж╛ржзрж╛ржи рзи: ржпржжрж┐ ржХрзЛржирзЛ `function` ржжрж┐рзЯрзЗ object рждрзИрж░рж┐ ржХрж░рзЗржи, рждрж╛ржХрзЗржУ component-ржПрж░ ржмрж╛ржЗрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржи:

```js
function createOptions() {
  return {
    serverUrl: "https://localhost:1234",
    roomId: "music",
  };
}

function ChatRoom() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, []); // тЬЕ dependency-рждрзЗ ржХрж┐ржЫрзБ ржжрж┐рждрзЗ рж╣рзЯржирж┐
}
```

ЁЯФН ржПржЦрж╛ржирзЗ `createOptions()` ржирж╛ржорзЗ ржПржХржЯрж╛ function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ object рждрзИрж░рж┐ ржХрж░рждрзЗ, ржПржмржВ ржпрзЗрж╣рзЗрждрзБ ржПржЗ function component ржПрж░ ржмрж╛ржЗрж░рзЗ, рждрж╛ржЗ ржПржЯрж╛ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп рж╣рзЯ ржирж╛ред

---

## ЁЯза рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзБржи:

> **ржпржжрж┐ ржХрзЛржирзЛ object ржмрж╛ function ржПржХрзЗржмрж╛рж░рзЗ static рж╣рзЯ тАФ ржорж╛ржирзЗ props ржмрж╛ state ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржирж╛ ржХрж░рзЗ тАФ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ component-ржПрж░ ржмрж╛ржЗрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржиред ржПрждрзЗ useEffect rerun ржерзЗржХрзЗ ржмрж╛ржБржЪржмрзЗред**

---

ржирж┐ржЪрзЗ Section 3.5.2 ржПрж░ **рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛** ржУ рж╕рж╛рж░рж╛ржВрж╢ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

## ЁЯзй 3.5.2: Dynamic object/function рж╣рж▓рзЗ Effect ржПрж░ ржнрж┐рждрж░рзЗ рж░рж╛ржЦрзБржи

### ЁЯза рж╕ржорж╕рзНржпрж╛рж░ ржорзВрж▓ ржХржерж╛ ржоржирзЗ ржХрж░рзБржи:

ржЖржорж░рж╛ ржЖржЧрзЗржЗ ржмрж▓рзЗржЫрж┐ тАФ ржпржжрж┐ ржЖржкржирж┐ `useEffect()` ржПрж░ ржнрж┐рждрж░рзЗ ржХрзЛржирзЛ object/function ржжрзЗржи, ржЖрж░ рж╕рзЗржЯрж╛ ржкрзНрж░рждрж┐ржмрж╛рж░ render-ржП ржирждрзБржи рж╣рзЯ, рждрж╛рж╣рж▓рзЗ Effect ржмрж╛рж░ржмрж╛рж░ rerun рж╣рзЯред

### ЁЯОп ржПржЦржи ржпржжрж┐ object/function ржХрзЛржиржУ reactive value (ржпрзЗржоржи `roomId`) ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ рж╕рзЗржЯрж┐ржХрзЗ component-ржПрж░ ржмрж╛ржЗрж░рзЗ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред

ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ рж╕рзЗржЯрж╛ **Effect ржПрж░ ржнрж┐рждрж░рзЗ рж░рзЗржЦрзЗ** рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи: `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ object/function рждрзИрж░рж┐ ржХрж░рзБржи

```js
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState("");

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId,
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // тЬЕ ржПржЦржи roomId ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ Effect rerun рж╣ржмрзЗ
}
```

ЁЯФН ржПржЦрж╛ржирзЗ `options` object рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ **useEffect-ржПрж░ ржнрж┐рждрж░рзЗ**ред

> рждрж╛ржЗ ржПржЯрж╛ ржЖрж░ dependency ржирзЯред ржПржЦржи рж╢рзБржзрзБ `roomId` dependency, ржЖрж░ `roomId` ржпржжрж┐ ржирж╛ ржмржжрж▓рж╛рзЯ, рждрж╛рж╣рж▓рзЗ Effect ржЖрж░ rerun рж╣ржмрзЗ ржирж╛ред

---

### тЬЕ ржПржХржЗ ржХрзМрж╢рж▓ `function` ржПрж░ ржЬржирзНржпржУ ржХрж╛ржЬ ржХрж░рзЗ:

```js
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState("");

  useEffect(() => {
    function createOptions() {
      return {
        serverUrl: "https://localhost:1234",
        roomId: roomId,
      };
    }

    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // тЬЕ ржПржХржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
}
```

ЁЯФН ржпрзЗрж╣рзЗрждрзБ `createOptions()` function-ржЯрж┐ **effect-ржПрж░ ржнрж┐рждрж░рзЗ**, рждрж╛ржЗ рж╕рзЗржЯрж┐ржУ dependency ржирзЯред

---

## ЁЯУМ ржоржирзЗ рж░рж╛ржЦрзБржи:

> ЁЯФБ ржЖржкржирж╛рж░ object/function ржпржжрж┐ reactive value (ржпрзЗржоржи `props`, `state`) ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ object/function **effect-ржПрж░ ржнрж┐рждрж░рзЗ рж░рж╛ржЦрзБржи** тАФ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦржмрзЗржи ржирж╛ред

> тЪая╕П ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрж▓рзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп рж╣ржмрзЗ, ржЖрж░ effect ржмрж╛рж░ржмрж╛рж░ rerun рж╣ржмрзЗред

---

## тЬНя╕П рж╕ржВржХрзНрж╖рзЗржкрзЗ рж╕рж╛рж░рж╛ржВрж╢:

| ржкрж░рж┐рж╕рзНржерж┐рждрж┐                                                 | ржХрж░ржгрзАрзЯ                       |
| --------------------------------------------------------- | --------------------------- |
| object/function static                                    | component-ржПрж░ ржмрж╛ржЗрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржи |
| object/function dynamic (reactive value ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░рж╢рзАрж▓) | effect-ржПрж░ ржнрж┐рждрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржи    |

---

ржирж┐ржЪрзЗ Section 3.5.2 ржПрж░ ржЙржк-рж╕рзЗржХрж╢ржи **тАЬCalculate primitive values from functionsтАЭ** ржПрж░ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржУ рж╕рж╛рж░рж╛ржВрж╢ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

## ЁЯФв 3.5.2: ржлрж╛ржВрж╢ржи ржерзЗржХрзЗ ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржорж╛ржи ржмрзЗрж░ ржХрж░рзЗ ржирж┐ржи {/* calculate-primitive-values-from-functions */}

### ЁЯОп рж╕ржорж╕рзНржпрж╛рж░ ржзрж░ржи:

ржзрж░рзБржи ржЖржкржирж┐ ржХрзЛржирзЛ parent component ржерзЗржХрзЗ ржПржХржЯрж┐ function ржкрж╛ржарж╛ржи `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ, ржпрзЗржЯрж╛ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи object return ржХрж░рзЗ:

```jsx
<ChatRoom
  roomId={roomId}
  getOptions={() => {
    return {
      serverUrl: serverUrl,
      roomId: roomId,
    };
  }}
/>
```

ржПржЦрж╛ржирзЗ `getOptions` ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи function рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ тАФ рждрж╛ржЗ `useEffect` ржПрж░ dependency рж╣рж┐рж╕рзЗржмрзЗ ржжрж┐рж▓рзЗ, React ржмрж╛рж░ржмрж╛рж░ effect ржЪрж╛рж▓рж╛ржмрзЗред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

ЁЯСЙ ржЖржкржирж┐ `getOptions()` ржлрж╛ржВрж╢ржиржЯрж╛ **component body-рждрзЗ** ржПржХржмрж╛рж░ ржХрж▓ ржХрж░рзБржи ржПржмржВ рждрж╛рж░ ржерзЗржХрзЗ **primitive values** (ржпрзЗржоржи string) ржмрзЗрж░ ржХрж░рзЗ ржирж┐ржиред

```js
function ChatRoom({ getOptions }) {
  const [message, setMessage] = useState("");

  const { roomId, serverUrl } = getOptions(); // ЁЯОп ржПржЦрж╛ржирзЗ ржХрж▓ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ
  useEffect(() => {
    const connection = createConnection({ roomId, serverUrl });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]); // тЬЕ ржПржЦржи dependency ржП ржХрзЛржи object/function ржирзЗржЗ
}
```

### ЁЯУМ ржХрзЗржи ржПржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ?

- `roomId` ржУ `serverUrl` рж╣рж▓рзЛ **primitive values** (string), ржпрзЗржЧрзБрж▓рзЛ content ржжрж┐рзЯрзЗ рждрзБрж▓ржирж╛ ржХрж░рж╛ ржпрж╛рзЯред
- рждрж╛ржЗ ржЖржкржирж┐ safe ржнрж╛ржмрзЗ ржПржЧрзБрж▓рзЛржХрзЗ dependency рж╣рж┐рж╕рзЗржмрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред
- ржЖрж░ `getOptions()` call рж╣рж▓рзЛ **pure function**, рждрж╛ржЗ render time-ржП ржПржХржмрж╛рж░ call ржХрж░рж▓рзЗ рж╕ржорж╕рзНржпрж╛ ржирзЗржЗред

---

## тЪая╕П ржХржмрзЗ ржПржЯрж╛ ржХрж░ржмрзЗржи ржирж╛?

ржПржЗ ржХрзМрж╢рж▓ ржХрзЗржмрж▓ рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржпржЦржи:

- `getOptions()` рж╣рж▓рзЛ **pure function** тАФ ржорж╛ржирзЗ ржПржЯрж┐ ржХрзЛржирзЛ external effect ржЫрж╛рзЬрж╛ржЗ ржПржХржЗ input ржП ржПржХржЗ output ржжрзЗрзЯред
- ржЖржкржирж┐ рж╢рзБржзрзБ ржПрж░ ржерзЗржХрзЗ string, number ржмрж╛ boolean ржмрзЗрж░ ржХрж░ржЫрзЗржи тАФ **object/function ржирж╛**ред

ржпржжрж┐ `getOptions()` ржХрзЛржирзЛ **event handler** ржмрж╛ async call-ржПрж░ ржоржд side effect ржХрж░рзЗ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржПржХрзЗ **effect-ржПрж░ ржнрж┐рждрж░рзЗ** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐рждред

---

## тЬЕ рж╕рж╛рж░рж╛ржВрж╢ Recap:

| рж╕ржорж╕рзНржпрж╛рж░ ржзрж░ржи                                                                 | рж╕ржорж╛ржзрж╛ржи                                                   |
| --------------------------------------------------------------------------- | -------------------------------------------------------- |
| ржкрзНрж░рждрж┐ render-ржП ржирждрзБржи object return ржХрж░рзЗ ржПржоржи ржлрж╛ржВрж╢ржи                             | `useEffect` ржПрж░ ржмрж╛ржЗрж░рзЗ ржлрж╛ржВрж╢ржи ржХрж▓ ржХрж░рзЗ ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржорж╛ржи ржмрзЗрж░ ржХрж░рзБржи |
| ржлрж╛ржВрж╢ржи ржерзЗржХрзЗ object return ржХрж░ржЫрзЗржи ржПржмржВ рж╕рзЗржЯрж╛ dependency ржП ржжрж┐рж▓рзЗ effect ржмрж╛рж░ржмрж╛рж░ ржЪрж▓рзЗ | object ржнрзЗржЩрзЗ string/number ржирж┐рзЯрзЗ dependency ржП ржжрж┐ржи          |
| ржлрж╛ржВрж╢ржи pure ржирж╛ рж╣рж▓рзЗ ржмрж╛ side effect ржХрж░рзЗ                                        | ржлрж╛ржВрж╢ржи `useEffect` ржмрж╛ event handler-ржП рж░рж╛ржЦрзБржи               |

---

## ЁЯУШ ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржжрж┐ржХ:

> "To remove a dependency, you need to prove to the linter that it's not necessary."

React strict-ржнрж╛ржмрзЗ dependency ржжрзЗржЦрзЗ, ржХрж╛рж░ржг рж╕рзЗ ржЪрж╛рзЯ ржЖржкржирж┐ predictable рж╣рзЛржиред рждрж╛ржЗ dependency ржерзЗржХрзЗ object/function ржмрж╛ржж ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗ ржЖржЧрзЗ ржПржЯрж╛ ржкрзНрж░ржорж╛ржг ржХрж░рждрзЗ рж╣ржмрзЗ тАФ "ржПржЗ object/function rerender-ржП ржмржжрж▓рж╛рзЯ ржирж╛ред"

---

## ЁЯТб ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬрзЗрж░ ржЖржЧрзЗ ржоржирзЗ рж░рж╛ржЦрзБржи:

ЁЯФБ Object/function ржкрзНрж░рждрж┐ржмрж╛рж░ render-ржП ржирждрзБржи рж╣рзЯред рждрж╛ржЗ ржпрзЗржЦрж╛ржирзЗржЗ рж╕ржорзНржнржм, ржПржЧрзБрж▓рзЛржХрзЗ:

- Component ржПрж░ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрзБржи (ржпржжрж┐ static рж╣рзЯ)
- ржЕржержмрж╛ Effect ржПрж░ ржнрж┐рждрж░рзЗ рж░рж╛ржЦрзБржи (ржпржжрж┐ dynamic/reactive рж╣рзЯ)
- ржЕржержмрж╛ call ржХрж░рзЗ рждрж╛рж░ ржерзЗржХрзЗ **string/number/boolean** ржмрзЗрж░ ржХрж░рзЗ ржирж┐ржи

---

ржирж┐ржЪрзЗ Section 3.5.3 ржПрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ, ржпрж╛рждрзЗ ржЖржкржирж┐ рж╕рж╣ржЬрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗржи ржХрзА рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрж┐рж▓ ржПржмржВ рж╕рзЗржЯрж╛ ржХрзАржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ:

---

## ЁЯЫая╕П 3.5.3: Fix a resetting interval {/* fix-a-resetting-interval */}

### ЁЯШХ рж╕ржорж╕рзНржпрж╛:

ржирж┐ржЪрзЗрж░ ржПржЗ ржХрзЛржбрзЗ `useEffect` ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржПржХржЯрж┐ interval рж╕рзЗржЯ ржХрж░рзЗ `count` ржмрж╛рзЬрж╛ржирзЛрж░ ржЬржирзНржп:

```js
useEffect(() => {
  const id = setInterval(() => {
    setCount(count + 1);
  }, 1000);
  return () => clearInterval(id);
}, [count]);
```

тЭЧ ржХрж┐ржирзНрждрзБ ржПржЦрж╛ржирзЗ ржПржХржЯрж╛ ржмрзЬ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗтАФ**`count` dependency рж╣ржУрзЯрж╛рзЯ** ржкрзНрж░рждрж┐ ржЯрж┐ржХ-ржП `useEffect` ржЖржмрж╛рж░ ржЪрж▓рзЗ, ржкрзБрж░ржирзЛ interval ржХрзНрж▓рж┐рзЯрж╛рж░ рж╣рзЯ ржПржмржВ ржирждрзБржи interval рждрзИрж░рж┐ рж╣рзЯред

ЁЯФБ ржлрж▓рзЗ interval ржмрж╛рж░ржмрж╛рж░ **destroy тЖТ re-create** рж╣ржЪрзНржЫрзЗ, ржпрзЗржЯрж╛ performance ржЦрж╛рж░рж╛ржк ржХрж░рзЗ ржПржмржВ ржЖржкржирж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╕ржлрж▓ рж╣ржЪрзНржЫрзЗ ржирж╛ред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

ЁЯСЙ рж╕ржорж╛ржзрж╛ржи рж╣рж▓рзЛ: `count + 1` ржирж╛ рж▓рж┐ржЦрзЗ, `setCount(c => c + 1)` рж▓рж┐ржЦрзБржиред

ржПржЗржнрж╛ржмрзЗ ржЖржкржирж┐ `count` ржПрж░ ржЖржЧрзЗрж░ ржорж╛ржиржЯрж╛ React-ржПрж░ рж╣рж╛рждрзЗ ржЫрзЗрзЬрзЗ ржжрж┐ржЪрзНржЫрзЗржи, ржПржмржВ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ `count` directly use ржХрж░рж╛ рж▓рж╛ржЧржЫрзЗ ржирж╛ тАФ рждрж╛ржЗ dependency array ржЦрж╛рж▓рж┐ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиред

тЬЕ **Final Code:**

```js
import { useState, useEffect } from "react";

export default function Timer() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("тЬЕ Creating an interval");
    const id = setInterval(() => {
      console.log("тП░ Interval tick");
      setCount((c) => c + 1); // тЬЕ updater function ржмрзНржпржмрж╣рж╛рж░
    }, 1000);
    return () => {
      console.log("тЭМ Clearing an interval");
      clearInterval(id);
    };
  }, []); // тЬЕ count ржЖрж░ dependency ржирзЯ

  return <h1>Counter: {count}</h1>;
}
```

---

### ЁЯУШ ржХрзЗржи ржПржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ?

> `setCount(c => c + 1)` ржПржЯрж╛ ржПржХржЯрж╛ **updater function**
> React ржирж┐ржЬрзЗ ржкрзБрж░ржирзЛ `count` ржзрж░рзЗ ржирж┐рзЯрзЗ рждрж╛рж░ ржЙржкрж░ `+1` ржХрж░рзЗ state ржЖржкржбрзЗржЯ ржХрж░рзЗред

ржПржЦржи ржпрзЗрж╣рзЗрждрзБ `count` ржЖрж░ effect-ржПрж░ ржнрж┐рждрж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯржирж┐, рждрж╛ржЗ `useEffect` ржЖрж░ `count` ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░рж╢рзАрж▓ ржирж╛ тАФ рждрж╛ржЗ effect рж╢рзБржзрзБ ржПржХржмрж╛рж░ ржЪрж▓рзЗ, ржЖржмрж╛рж░ ржмрж╛рж░ржмрж╛рж░ destroy-create ржХрж░рзЗ ржирж╛ред

---

## ЁЯФБ ржЖржЧрзЗрж░ ржмржирж╛ржо ржкрж░рзЗрж░ ржкрж╛рж░рзНржержХрзНржп:

| ржЖржЧрзЗрж░ ржХрзЛржб (ржнрзБрж▓)                 | ржкрж░рзЗрж░ ржХрзЛржб (рж╕ржарж┐ржХ)            |
| ------------------------------ | -------------------------- |
| `setCount(count + 1)`          | `setCount(c => c + 1)`     |
| dependency: `[count]`          | dependency: `[]`           |
| ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ effect ржЖржмрж╛рж░ ржЪрж▓рзЗ | effect ржПржХржмрж╛рж░ржЗ ржЪрж▓рзЗ          |
| interval ржмрж╛рж░ржмрж╛рж░ destroy-create | interval ржмрж╛рж░ржмрж╛рж░ рждрзИрж░рж┐ рж╣рзЯ ржирж╛ |

---

### ЁЯФН ржЯрж┐ржкрж╕ ржоржирзЗ рж░рж╛ржЦрзБржи:

- ржпржжрж┐ ржЖржкржирж╛рж░ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ ржХрзЛржирзЛ state (ржпрзЗржоржи `count`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ, ржПржмржВ рж╕рзЗржЯрж╛ ржЖржЧрзЗрж░ ржорж╛ржирзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ рж╣рзЯтАФ рждрж╛рж╣рж▓рзЗ **updater function** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
- ржПрждрзЗ ржХрж░рзЗ ржЖржкржирж┐ dependency array-ржП рж╕рзЗржЗ ржорж╛ржи рж░рж╛ржЦрждрзЗ ржмрж╛ржзрзНржп рж╣ржмрзЗржи ржирж╛, ржЖрж░ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ effect ржЪрж▓рж╛ржУ ржмржирзНржз рж╣ржмрзЗред

---

Here's a simple, beginner-friendly breakdown of the key idea in **Section 3.5.5: Fix a retriggering animation**, tailored for your React Bangla Tutorial book:

---

## тЬЕ Section 3.5.5: Fix a Retriggering Animation (Bangla Friendly Guide)

### ЁЯОп рж╕ржорж╕рзНржпрж╛ ржХрзЛржерж╛рзЯ?

ржЖржорж░рж╛ ржПржХржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ ржмрж╛ржирж┐рзЯрзЗржЫрж┐ ржпрзЗржЯрж╛ `Welcome` ржорзЗрж╕рзЗржЬржХрзЗ fade-in animation ржжрж┐рзЯрзЗ ржжрзЗржЦрж╛рзЯред `duration` slider ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи ржХржд рж╕рзЗржХрзЗржирзНржб ржЪрж▓ржмрзЗ рж╕рзЗржЯрж╛ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ ржпрж╛рзЯред

тЭМ ржХрж┐ржирзНрждрзБ ржпржЦржиржЗ ржЖржорж░рж╛ slider ржШрзБрж░рж╛ржЗ (duration ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж┐), рждржЦржи ржкрзБрж░рзЛ ржПржирж┐ржорзЗрж╢ржи ржЖржмрж╛рж░ рж╢рзБрж░рзБ рж╣рзЯрзЗ ржпрж╛рзЯтАФeven ржпржжрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржЧрзЗржЗ ржжрзЗржЦрж╛ржирзЛ ржерж╛ржХрзЗ!

ржЖржорж░рж╛ ржЪрж╛ржЗ:

- ржПржирж┐ржорзЗрж╢ржи **рж╢рзБржзрзБ** рждржЦржи рж╢рзБрж░рзБ рж╣рзЛржХ ржпржЦржи **тАЬShowтАЭ ржмрж╛ржЯржи ржЪрж╛ржкрж╛ рж╣рзЯ**, ржХрж┐ржирзНрждрзБ
- **duration ржкрж░рж┐ржмрж░рзНрждржи** ржХрж░рж▓рзЗ ржПржирж┐ржорзЗрж╢ржи **ржкрзБржирж░рж╛рзЯ рж╢рзБрж░рзБ ржирж╛ рж╣рзЯ**ред

---

### ЁЯФН рж╕ржорж╕рзНржпрж╛рж░ ржХрж╛рж░ржг ржХрзА?

```js
useEffect(() => {
  const animation = new FadeInAnimation(ref.current);
  animation.start(duration);
  return () => animation.stop();
}, [duration]);
```

ржПржЦрж╛ржирзЗ `[duration]` dependency list-ржП ржЖржЫрзЗ, ржорж╛ржирзЗ duration ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗржЗ effect ржЖржмрж╛рж░ ржЪрж▓рзЗ, ржПржмржВ ржПржирж┐ржорзЗрж╢ржи рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ рж╣рзЯред

---

### ЁЯЫая╕П рж╕ржорж╛ржзрж╛ржи: `useEffectEvent` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐

ржЖржорж░рж╛ animation рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржХрж╛ржЬржЯрж╛ржХрзЗ ржПржХржЯрж╛ **non-reactive function**-ржП рж░рж╛ржЦржм, ржпрзЗржЯрж╛ рж╢рзБржзрзБ ржПржХржмрж╛рж░ ржЪрж▓ржмрзЗред

```js
const onAppear = useEffectEvent((animation) => {
  animation.start(duration); // ржПржЦрж╛ржирзЗржУ ржЖржорж░рж╛ duration ржкрзЬржЫрж┐, ржХрж┐ржирзНрждрзБ ржПржЯрж╛ reactive ржирж╛
});
```

рждрж╛рж░ржкрж░ useEffect ржПрж░ ржнрзЗрждрж░ ржерзЗржХрзЗ ржПржЗ ржлрж╛ржВрж╢ржиржЯрж╛ ржХрж▓ ржХрж░ржм:

```js
useEffect(() => {
  const animation = new FadeInAnimation(ref.current);
  onAppear(animation); // рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржмрж╛рж░ ржЪрж▓ржмрзЗ
  return () => animation.stop();
}, []);
```

### тЬи ржПржЦржи ржпрж╛ рж╣ржЪрзНржЫрзЗ:

- ржпржЦржи тАЬShowтАЭ ржЪрж╛ржкрж╛ рж╣рзЯ, `Welcome` ржХржорзНржкрзЛржирзЗржирзНржЯ ржорж╛ржЙржирзНржЯ рж╣рзЯ => `useEffect` рж░рж╛ржи рж╣рзЯ => ржПржирж┐ржорзЗрж╢ржи рж╢рзБрж░рзБ рж╣рзЯред
- ржПрж░ржкрж░ ржпрждржмрж╛рж░ duration ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж┐ ржирж╛ ржХрзЗржи, ржПржирж┐ржорзЗрж╢ржи ржЖрж░ рж╢рзБрж░рзБ рж╣рзЯ ржирж╛ред

---

### тЬЕ ржЪрзВрзЬрж╛ржирзНржд ржХрзЛржб (Welcome.jsx):

```jsx
function Welcome({ duration }) {
  const ref = useRef(null);

  const onAppear = useEffectEvent((animation) => {
    animation.start(duration);
  });

  useEffect(() => {
    const animation = new FadeInAnimation(ref.current);
    onAppear(animation);
    return () => animation.stop();
  }, []);

  return (
    <h1 ref={ref} style={{ opacity: 0, ...otherStyles }}>
      Welcome
    </h1>
  );
}
```

---

### ЁЯУШ ржоржирзЗ рж░рж╛ржЦрзБржи:

- ржпржжрж┐ ржХрзЛржирзЛ effect рж╢рзБржзрзБ **ржПржХржмрж╛рж░ржЗ ржЪрж▓рж╛ ржжрж░ржХрж╛рж░ рж╣рзЯ**, рждрж╛рж╣рж▓рзЗ `[duration]` ржмрж╛ ржЕржирзНржп reactive ржорж╛ржиржЧрзБрж▓рзЛ avoid ржХрж░рзБржиред
- **React 19 ржПрж░ `useEffectEvent()`** ржЖржкржирж╛ржХрзЗ ржПржоржи non-reactive function ржмрж╛ржирж╛рждрзЗ ржжрзЗрзЯ, ржпрзЗржЯрж╛ effect ржПрж░ ржнрзЗрждрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯтАФbut dependency рж╣рж┐рж╕рзЗржмрзЗ react ржХрж░рзЗ ржирж╛ред

---

ржЕржмрж╢рзНржпржЗ, ржоржЬржирзБ ржнрж╛ржЗ!
ржЖржкржирж╛рж░ ржорждрзЛ ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржУ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ React ржмржЗрзЯрзЗрж░ ржЪрзНржпрж╛ржкрзНржЯрж╛рж░ рж╢рзБрж░рзБ ржХрж░рж╛ ржпрж╛ржХ, ржпрзЗржи ржХрж╛рж░рзЛ ржХрж╛ржЫрзЗ ржХрзНрж▓рж╛ржирзНрждрж┐ржХрж░ ржирж╛ рж▓рж╛ржЧрзЗред ржирж┐ржЪрзЗ ржЖржорж┐ ржЖржкржирж╛рж░ ржжрзЗржУрзЯрж╛ ржЗржВрж░рзЗржЬрж┐ ржЯрзЗржХрзНрж╕ржЯрзЗрж░ ржорждрзЛ **рж╕рзЛржЬрж╛рж╕рж╛ржкрзНржЯрж╛ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рзЯ** рж▓рзЗржЦрж╛ ржжрж┐рзЯрзЗржЫрж┐, ржпрзЗржи ржирждрзБржиржжрзЗрж░ ржЬржирзНржп ржмрзБржЭрждрзЗ рж╕рж╣ржЬ рж╣рзЯ, ржЖрж░ ржЕржирзБржмрж╛ржжрзЗрж░ ржЫрж╛ржк ржХржо ржерж╛ржХрзЗред

---

## ржЪрзНржпрж╛ржЯ ржЖржмрж╛рж░ рж░рж┐ржХржирзЗржХрзНржЯ ржХрж░ржЫрзЗ? рж╕ржорж╕рзНржпрж╛ ржЖрж░ рж╕ржорж╛ржзрж╛ржи

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, ржпржЦржиржЗ ржЖржкржирж┐ тАЬToggle themeтАЭ ржмрж╛ржЯржирзЗ ржЪрж╛ржкрзЗржи, рждржЦржи ржЪрзНржпрж╛ржЯ рж░рзБржо ржЖржмрж╛рж░ рж░рж┐ржХржирзЗржХрзНржЯ ржХрж░рзЗред
ржХрж┐ржирзНрждрзБ ржЖрж╕рж▓рзЗ ржПрж░ ржХрж╛рж░ржг ржХрзА?

ржЖржорж░рж╛ ржЪрж╛ржЗ, ржЪрзНржпрж╛ржЯ рж░рзБржо рждржЦржиржЗ рж░рж┐ржХржирзЗржХрзНржЯ ржХрж░рзБржХ ржпржЦржи:

- ржЖржкржирж┐ рж╕рж╛рж░рзНржнрж╛рж░ URL ржмржжрж▓рж╛ржи, ржмрж╛
- ржЪрзНржпрж╛ржЯ рж░рзБржо ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗржиред

ржЖрж░ тАЬToggle themeтАЭ ржХрж░рж╛рж░ рж╕ржорзЯ ржЪрзНржпрж╛ржЯ рж░рж┐ржХржирзЗржХрзНржЯ ржирж╛ ржХрж░рзБржХред

---

### ржХрзА рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗ?

`ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржПржХржЯрж╛ `options` ржирж╛ржорзЗрж░ ржЕржмржЬрзЗржХрзНржЯ ржжрзЗржУрзЯрж╛ рж╣ржЪрзНржЫрзЗред
React-ржП ржпржЦржиржЗ `useEffect`-ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐рждрзЗ `options` ржЕржмржЬрзЗржХрзНржЯ ржерж╛ржХрзЗ,
React ржзрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ ржпрзЗ ржЖрж╕рж▓рзЗ `options` ржмржжрж▓рзЗржЫрзЗ ржХрж┐ ржирж╛, ржХрж╛рж░ржг ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ рж╣рзЯред
рждрж╛ржЗ `useEffect` ржмрж╛рж░ржмрж╛рж░ ржЪрж▓рзЗ тАФ ржпрж╛рж░ ржлрж▓рзЗ ржЪрзНржпрж╛ржЯ ржмрж╛рж░ржмрж╛рж░ рж░рж┐ржХржирзЗржХрзНржЯ ржХрж░рзЗред

---

### рж╕ржорж╛ржзрж╛ржи ржХрзА?

ржЖржорж░рж╛ ржЪрж╛ржЗ `useEffect` рж╢рзБржзрзБ рждржЦржиржЗ ржЪрж╛рж▓рж╛ржХ, ржпржЦржи `serverUrl` ржмрж╛ `roomId` рж╕рждрзНржпрж┐ржЗ ржмржжрж▓рж╛рзЯред

ржПржЗ ржЬржирзНржп, `useEffect`-ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐рждрзЗ рж╕рж░рж▓ (primitive) ржорж╛ржиржЧрзБрж▓рзЛ рж░рж╛ржЦрж╛ ржнрж╛рж▓рзЛ тАФ ржпрзЗржоржи `roomId` ржПржмржВ `serverUrl` тАФ ржпрзЗржи React ржарж┐ржХ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржХржЦржи ржХрж╛ржЬржЯрж╛ ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗред

---

### ржХрзЛржб ржжрзЗржЦрзЗ ржирзЗржУрзЯрж╛ ржпрж╛ржХ

```jsx
import { useEffect } from "react";
import { createConnection } from "./chat.js";

export default function ChatRoom({ options }) {
  // options ржерзЗржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ primitive ржорж╛ржиржЧрзБрж▓рзЛ ржирзЗрзЯрж╛ рж╣рж▓рзЛ
  const { roomId, serverUrl } = options;

  useEffect(() => {
    // ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ createConnection-ржП ржкрж╛ржарж╛ржЪрзНржЫрж┐
    const connection = createConnection({ roomId, serverUrl });
    connection.connect();

    return () => connection.disconnect();
  }, [roomId, serverUrl]); // ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ рж╢рзБржзрзБ primitive ржорж╛ржиржЧрзБрж▓рзЛ ржжрж┐рж▓рж╛ржо

  return <h1>Welcome to the {roomId} room!</h1>;
}
```

---

### ржЖрж░ржУ ржнрж╛рж▓рзЛ ржЙржкрж╛рзЯ

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ `ChatRoom`-ржПрж░ `props` ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ `roomId` ржПржмржВ `serverUrl` ржирж┐рждрзЗ ржкрж╛рж░рзЗржи,
ржЕрж░рзНржерж╛рзО `options` ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржмржжрж▓рзЗ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржкрзНрж░ржкрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи тАФ ржПржЯрж╛ React ржХрзЗ ржмрзБржЭрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржХрзЛржи ржкрзНрж░ржкрж╕ ржмржжрж▓рзЗржЫрзЗред

```jsx
export default function ChatRoom({ roomId, serverUrl }) {
  useEffect(() => {
    const connection = createConnection({ roomId, serverUrl });
    connection.connect();

    return () => connection.disconnect();
  }, [roomId, serverUrl]);

  return <h1>Welcome to the {roomId} room!</h1>;
}
```

---

### рж╢рзЗрж╖ ржХржерж╛

- React-ржП `useEffect`-ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐рждрзЗ ржХржЦржиржУ **ржЕржмржЬрзЗржХрзНржЯ** ржмрж╛ **ржЕрзНржпрж╛рж░рзЗржУ** ржжрзЗржмрзЗржи ржирж╛, ржХрж╛рж░ржг ржПржЧрзБрж▓рзЛ ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рж╣рзЯред
- рж╕рзЗржЬржирзНржп ржпрждржЯрж╛ рж╕ржорзНржнржм **ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ** (string, number, boolean) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
- ржПрждрзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржжрзНрж░рзБржд, рж╕рж╣ржЬ ржПржмржВ ржмрж╛ржЧ ржорзБржХрзНржд рж╣ржмрзЗред

---
