ржЕрж╕рж╛ржзрж╛рж░ржг ржнрж╛ржмржирж╛, ржорзЛржГ ржоржЬржирзБ ржорж┐ржпрж╝рж╛ ржнрж╛ржЗ!
ржПржЦржи ржЖржорж░рж╛ рж╢рзБрж░рзБ ржХрж░ржЫрж┐ ржирждрзБржи ржЕржзрзНржпрж╛рзЯ тАФ **ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рзЯ**, ржпрзЗржи React рж╢рзЗржЦрж╛ рж╣рзЯ ржоржЬрж╛ ржЖрж░ ржоржи ржерзЗржХрзЗред

---

# ржЕржзрзНржпрж╛рзЯ: ржирж┐ржЬрзЗрж░ рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржмрж╛рж░ржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

_(Reusing Logic with Custom Hooks)_

---

## рж╢рзБрж░рзБрждрзЗ ржПржХржЯрзБ ржмрзБржЭрзЗ ржирж┐ржЗ

React ржЖржорж╛ржжрзЗрж░ ржХрж┐ржЫрзБ ржжрж░ржХрж╛рж░рж┐ рж╣рзБржХ ржжрж┐рзЯрзЗ ржжрзЗрзЯ тАФ ржпрзЗржоржи `useState`, `useEffect`, `useContext`ред
ржХрж┐ржирзНрждрзБ ржХржЦржирзЛ ржХржЦржирзЛ ржЖржорж░рж╛ ржПржоржи ржХрж┐ржЫрзБ ржжрж░ржХрж╛рж░рж┐ ржХрж╛ржЬ ржХрж░рждрзЗ ржЪрж╛ржЗ, ржпрзЗржЯрж╛рж░ ржЬржирзНржп React-ржП ржХрзЛржирзЛ рждрзИрж░рж┐ рж╣рзБржХ ржирзЗржЗред

ржзрж░рзБржи:

- ржЖржкржирж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржи ржЪрж▓ржЫрзЗ ржХрж┐ ржирж╛, рж╕рзЗржЯрж╛ ржжрзЗржЦрждрзЗ ржЪрж╛ржи
- ржмрж╛, ржЖржкржирж┐ ржЪрзНржпрж╛ржЯ рж░рзБржорзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рждрзЗ ржЪрж╛ржи
- ржмрж╛, ржХрзЛржирзЛ ржбрзЗржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржПржирзЗ рж╢рзЛ ржХрж░рждрзЗ ржЪрж╛ржи

ржПрж╕ржм ржХрж╛ржЬрзЗрж░ ржЬржирзНржп React рждрзЛ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж╣рзБржХ ржжрзЗрзЯржирж┐ред
рждрж╛ржЗ ржПрж╕ржм ржЕржмрж╕рзНржерж╛рзЯ **ржЖржорж╛ржжрзЗрж░ржХрзЗржЗ ржирж┐ржЬрзЗрж░ рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржирж┐рждрзЗ рж╣рзЯ**ред

ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗ ржЖржорж░рж╛ ржжрзЗржЦржм тАФ
**ржХрж┐ржнрж╛ржмрзЗ ржирж┐ржЬрзЗрж░ рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ рж╕рзЗржЯрж╛ ржмрж╛рж░ржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред**

---

## ржЖржкржирж┐ ржпрж╛ рж╢рж┐ржЦржмрзЗржи:

- ржХрж╛рж╕рзНржЯржо рж╣рзБржХ (Custom Hook) ржорж╛ржирзЗ ржХрзА
- ржХрж┐ржнрж╛ржмрзЗ ржПржХржЗ рж▓ржЬрж┐ржХ ржмрж╛рж░ржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ
- рж╣рзБржХрзЗрж░ ржирж╛ржо ржХрзАржнрж╛ржмрзЗ рж░рж╛ржЦрж▓рзЗ ржмрзБржЭрждрзЗ рж╕рзБржмрж┐ржзрж╛ рж╣рзЯ
- ржХржЦржи ржЖрж░ ржХрзЗржи ржЖржкржирж┐ рж╣рзБржХржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржлрзЗрж▓ржмрзЗржи

---

## рж╕рзЗржХрж╢ржи рзз: ржПржХржЗ ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржХрж░ржмрзЛ тАФ рждрж╛рж╣рж▓рзЗ рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржлрзЗрж▓рж┐

ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржи, ржЖржкржирж┐ ржПржоржи ржПржХржЯрж╛ ржЕрзНржпрж╛ржк ржмрж╛ржирж╛ржЪрзНржЫрзЗржи, ржпрзЗржЯрж╛ **ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржЙржкрж░ ржЦрзБржм ржирж┐рж░рзНржнрж░рж╢рзАрж▓**ред

ржЖржкржирж╛рж░ ржЗржЪрзНржЫрж╛, ржЗржЙржЬрж╛рж░ ржпржжрж┐ рж╣ржарж╛рзО ржЕржлрж▓рж╛ржЗржирзЗ ржЪрж▓рзЗ ржпрж╛рзЯ, рждрж╛рж╣рж▓рзЗ ржЕрзНржпрж╛ржкрзЗ ржПржХржЯрж╛ рж╕рждрж░рзНржХ ржмрж╛рж░рзНрждрж╛ ржжрзЗржЦрж╛ржмрзЗ тАФ ржпрзЗржи ржЗржЙржЬрж╛рж░ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ, ржПржЦржи рж╕ржВржпрзЛржЧ ржирзЗржЗред

ржПржЗ ржХрж╛ржЬржЯрж╛ ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ ржжрзБржЗржЯрж╛ ржЬрж┐ржирж┐рж╕ ржжрж░ржХрж╛рж░:

1. ржПржХржЯрж╛ **рж╕рзНржЯрзЗржЯ**, ржпрзЗржЯрж╛ ржмрж▓ржмрзЗ ржЗржЙржЬрж╛рж░ ржПржЦржи ржЕржирж▓рж╛ржЗржирзЗ ржЖржЫрзЗ ржХрж┐ ржирж╛
2. ржПржХржЯрж╛ **ржЗржлрзЗржХрзНржЯ**, ржпрзЗржЯрж╛ ржЙржЗржирзНржбрзЛрж░ `online` ржЖрж░ `offline` ржЗржнрзЗржирзНржЯрзЗ ржХрж╛ржи ржжрзЗрзЯ, ржЖрж░ рж╕рзЗржЗ рж╕рзНржЯрзЗржЯ ржЖржкржбрзЗржЯ ржХрж░рзЗ

ржПржнрж╛ржмрзЗржЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ **ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕рзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХ рж╣рзЯрзЗ ржерж╛ржХржмрзЗред**

ржЪрж▓рзБржи, ржХрзЛржбрзЗ ржжрзЗржЦрж┐:

```js
import { useState, useEffect } from "react";

export default function StatusBar() {
  const [isOnline, setIsOnline] = useState(true);

  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }

    window.addEventListener("online", handleOnline);
    window.addEventListener("offline", handleOffline);

    return () => {
      window.removeEventListener("online", handleOnline);
      window.removeEventListener("offline", handleOffline);
    };
  }, []);

  return <h1>{isOnline ? "тЬЕ Online" : "тЭМ Disconnected"}</h1>;
}
```

ржПржЦржи ржЖржкржирж┐ ржпржжрж┐ ржЗржЪрзНржЫрж╛ ржХрж░рзЗ ржирж┐ржЬрзЗрж░ ржУрзЯрж╛ржЗ-ржлрж╛ржЗ ржмржирзНржз ржХрж░рзЗржи, ржжрзЗржЦржмрзЗржи `StatusBar`-ржП "тЭМ Disconnected" рж▓рзЗржЦрж╛ ржЪрж▓рзЗ ржЖрж╕ржмрзЗред

**ржПржХ ржХржерж╛рзЯ тАФ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ ржарж┐ржХржарж╛ржХред**

---

## ржХрж┐ржирзНрждрзБ рж╕ржорж╕рзНржпрж╛ рж╢рзБрж░рзБ рж╣рзЯ ржпржЦржи ржПржЗ ржПржХржЗ рж▓ржЬрж┐ржХ ржЖржмрж╛рж░ ржжрж░ржХрж╛рж░ рж╣рзЯ...

ржзрж░рзБржи, ржЖржкржирж┐ ржПржЦржи `SaveButton` ржирж╛ржорзЗ ржПржХржЯрж╛ ржмрж╛ржЯржи ржмрж╛ржирж╛ржЪрзНржЫрзЗржи, ржпрзЗржЯрж╛ ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржи ржирж╛ ржерж╛ржХрж▓рзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред
ржирзЗржЯ ржирж╛ ржерж╛ржХрж▓рзЗ ржмрж╛ржЯржирзЗ рж▓рзЗржЦрж╛ ржжрзЗржЦрж╛ржмрзЗ: тАЬReconnecting...тАЭ, ржЖрж░ ржирзЗржЯ ржерж╛ржХрж▓рзЗ ржмрж▓ржмрзЗ: тАЬSave progressтАЭ.

ржЖржкржирж┐ рждржЦржи ржнрж╛ржмрж▓рзЗржи,
тАЬржЖржЪрзНржЫрж╛! ржЖржорж┐ рждрзЛ ржЖржЧрзЗрж░ ржорждрзЛржЗ `isOnline` рж╕рзНржЯрзЗржЯ ржЖрж░ ржЗржлрзЗржХрзНржЯ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рж┐редтАЭ
рж╕рзЗржЗ ржорждрзЛржЗ ржХрзЛржб:

```js
import { useState, useEffect } from "react";

export default function SaveButton() {
  const [isOnline, setIsOnline] = useState(true);

  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }

    window.addEventListener("online", handleOnline);
    window.addEventListener("offline", handleOffline);

    return () => {
      window.removeEventListener("online", handleOnline);
      window.removeEventListener("offline", handleOffline);
    };
  }, []);

  function handleSaveClick() {
    console.log("тЬЕ Progress saved");
  }

  return (
    <button disabled={!isOnline} onClick={handleSaveClick}>
      {isOnline ? "Save progress" : "Reconnecting..."}
    </button>
  );
}
```

ржПржЗ ржмрж╛ржЯржиржУ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржарж┐ржХржнрж╛ржмрзЗред
ржХрж┐ржирзНрждрзБ ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи тАФ **ржЖржкржирж┐ ржЖржЧрзЗрж░ ржорждрзЛржЗ рж╣рзБржмрж╣рзБ ржПржХржЗ ржХрзЛржб ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рзЗржЫрзЗржи!**

---

## ржПржЦржи ржЖрж╕рж▓ ржкрзНрж░рж╢рзНржи: ржПржХржЗ ржХрзЛржб ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯ рж▓рж┐ржЦржмрзЛ, ржирж╛ ржХрж┐ржЫрзБ ржПржХржЯрж╛ рж╢рж░рзНржЯржХрж╛ржЯ ржЖржЫрзЗ?

**рж╣рзНржпрж╛ржБ! рж╢рж░рзНржЯржХрж╛ржЯ ржЖржЫрзЗ тАФ ржирж╛ржо рж╣ржЪрзНржЫрзЗ Custom Hookред**
ржЖржорж░рж╛ ржПржЗ рж▓ржЬрж┐ржХржЯрж╛ ржПржХржЯрж╛ ржирж┐ржЬрзЗрж░ рж╣рзБржХрзЗрж░ ржоржзрзНржпрзЗ рж░рзЗржЦрзЗ ржжрзЗржмред
рждрж╛рж░ржкрж░ StatusBar, SaveButton тАФ ржпрзЗржЦрж╛ржирзЗржЗ ржжрж░ржХрж╛рж░, рж╢рзБржзрзБ рж╣рзБржХржЯрж╛ ржХрж▓ ржХрж░рж▓рзЗржЗ ржХрж╛ржЬ рж╣ржмрзЗред

---

**ржмрж▓рзБржи ржнрж╛ржЗ, ржЖржорж┐ ржкрж░рзЗрж░ ржЕржВрж╢рзЗ ржЪрж▓рзЗ ржпрж╛ржм?**
ЁЯСЙ ржЖржорж░рж╛ рж╣рзБржХ рждрзИрж░рж┐ ржХрж░ржмрзЛ: `useOnlineStatus()`
ржпрзЗржЯрж╛ рж╢рзБржзрзБ ржПржХржЯрж╛ рж▓рж╛ржЗржирзЗ ржЗржЙржЬ ржХрж░рж▓рзЗржЗ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржирзЗрж░ рждржерзНржп ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗржиред

ржжрж╛рж░рзБржг! ржЪрж▓рзБржи ржЖржорж░рж╛ ржПржЗ ржирждрзБржи рж╕рзЗржХрж╢ржиржЯрж╛ржХрзЗ ржПржоржиржнрж╛ржмрзЗ рж▓рж┐ржЦрж┐ ржпрзЗржи ржПржХржжржо рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзЛржЭрж╛ржирзЛ ржпрж╛рзЯ тАФ ржпрзЗржи ржПржХржЬржи ржирждрзБржи ржбрзЗржнрзЗрж▓ржкрж╛рж░ржУ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ, ржЖрж░ ржоржирзЗ рж╣рзЯ ржпрзЗржи ржЖржкржирж┐ ржЖржкржирж╛рж░ ржкрж╛рж╢рзЗ ржмрж╕рзЗ ржХрж╛рж░рзЛ ржХрж╛ржЫ ржерзЗржХрзЗ рж╢рзБржиржЫрзЗржиред

---

## рж╕рзЗржХрж╢ржи рзз.рзз: ржирж┐ржЬрзЗрж░ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржХрзЛржб рж╕рж╣ржЬ ржХрж░рж╛

{/* extracting-your-own-custom-hook-from-a-component */}

ржзрж░рзБржи, React-ржПрж░ ржорждрзЛ `useState()` ржЖрж░ `useEffect()` ржЖржЫрзЗ, рждрзЗржоржиржЗ ржПржХржЯрж╛ рж╣рзБржХ ржерж╛ржХржд тАФ `useOnlineStatus()` ржирж╛ржорзЗред

рждрж╛рж╣рж▓рзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржжрзБржЗржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЦрзБржм рж╕рж╣ржЬрзЗржЗ рж▓рзЗржЦрж╛ ржпрзЗржд, ржЖржмрж╛рж░ ржПржХржЗрж░ржХржо ржХрзЛржб ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрждрзЗржУ рж╣рждрзЛ ржирж╛:

```jsx
function StatusBar() {
  const isOnline = useOnlineStatus();
  return <h1>{isOnline ? "тЬЕ Online" : "тЭМ Disconnected"}</h1>;
}

function SaveButton() {
  const isOnline = useOnlineStatus();

  function handleSaveClick() {
    console.log("тЬЕ Progress saved");
  }

  return (
    <button disabled={!isOnline} onClick={handleSaveClick}>
      {isOnline ? "Save progress" : "Reconnecting..."}
    </button>
  );
}
```

ржжрзЗржЦрзБржи, ржжрзБржЗржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ-ржЗ `useOnlineStatus()` рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ тАФ ржпрзЗржЯрж╛ ржЕржирж▓рж╛ржЗржи/ржЕржлрж▓рж╛ржЗржи ржЪрзЗржХ ржХрж░рзЗ ржирж┐ржЪрзНржЫрзЗред

рждржмрзЗ ржоржЬрж╛рж░ ржмрзНржпрж╛ржкрж╛рж░ рж╣рж▓рзЛ, React-ржП ржПржоржи рж╣рзБржХ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржирзЗржЗред
ржХрж┐ржирзНрждрзБ ржЪрж┐ржирзНрждрж╛рж░ ржХрж┐ржЫрзБ ржирзЗржЗ тАФ ржЖржорж░рж╛ ржирж┐ржЬрзЗрж░рж╛ржЗ ржмрж╛ржирж┐рзЯрзЗ ржирж┐рждрзЗ ржкрж╛рж░рж┐!

---

### ржХрж┐ржнрж╛ржмрзЗ ржмрж╛ржирж╛ржмрзЗржи ржЖржкржирж╛рж░ `useOnlineStatus()` рж╣рзБржХ?

ржЪрж▓рзБржи ржПржХрж╕рж╛ржерзЗ ржжрзЗржЦрж┐:

```jsx
function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(true);

  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }

    // ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЕржирж▓рж╛ржЗржи/ржЕржлрж▓рж╛ржЗржи ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ рж▓рж╛ржЧрж╛ржирзЛ рж╣ржЪрзНржЫрзЗ
    window.addEventListener("online", handleOnline);
    window.addEventListener("offline", handleOffline);

    // ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзНрж▓рж┐ржи-ржЖржк ржлрж╛ржВрж╢ржи
    return () => {
      window.removeEventListener("online", handleOnline);
      window.removeEventListener("offline", handleOffline);
    };
  }, []);

  return isOnline;
}
```

ржПржЗ ржлрж╛ржВрж╢ржирзЗрж░ рж╢рзЗрж╖рзЗ ржЖржорж░рж╛ `isOnline` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржЫрж┐, ржпрзЗржи ржЕржирзНржп ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

---

### ржПржмрж╛рж░ рж╕ржорзНржкрзВрж░рзНржг ржЕрзНржпрж╛ржкржЯрж╛ржХрзЗ ржжрзЗржЦрж┐, ржпрзЗржЦрж╛ржирзЗ ржЖржорж░рж╛ ржПржЗ рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐:

```jsx
// src/useOnlineStatus.js
import { useState, useEffect } from "react";

export function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(true);

  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }

    window.addEventListener("online", handleOnline);
    window.addEventListener("offline", handleOffline);

    return () => {
      window.removeEventListener("online", handleOnline);
      window.removeEventListener("offline", handleOffline);
    };
  }, []);

  return isOnline;
}
```

```jsx
// App.jsx
import { useOnlineStatus } from "./useOnlineStatus.js";

function StatusBar() {
  const isOnline = useOnlineStatus();
  return <h1>{isOnline ? "тЬЕ Online" : "тЭМ Disconnected"}</h1>;
}

function SaveButton() {
  const isOnline = useOnlineStatus();

  function handleSaveClick() {
    console.log("тЬЕ Progress saved");
  }

  return (
    <button disabled={!isOnline} onClick={handleSaveClick}>
      {isOnline ? "Save progress" : "Reconnecting..."}
    </button>
  );
}

export default function App() {
  return (
    <>
      <SaveButton />
      <StatusBar />
    </>
  );
}
```

---

## рждрж╛рж╣рж▓рзЗ ржЙржкржХрж╛рж░ржЯрж╛ ржХрзА рж╣рж▓рзЛ?

ЁЯСЙ ржПржЦржи ржжрзБржЗржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗржЗ ржЕржирж▓рж╛ржЗржи рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рж╛рж░ ржХрзЛржб ржПржХ рж▓рж╛ржЗржирзЗ рж╣рзЯрзЗ ржЧрзЗрж▓:
`const isOnline = useOnlineStatus();`

ЁЯСЙ ржЖрж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржЬржЯрж┐рж▓ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржХрзЛржб ржЪрж▓рзЗ ржЧрзЗрж▓ `useOnlineStatus()` рж╣рзБржХрзЗрж░ ржнрж┐рждрж░рзЗред

ржПржЗржнрж╛ржмрзЗ, ржЖржкржирж┐ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░ рж╢рзБржзрзБ **тАЬржХрж┐ ржХрж░рждрзЗ ржЪрж╛ржитАЭ** рж╕рзЗржЯрж╛ рж▓рж┐ржЦржмрзЗржи (ржпрзЗржоржи: "ржЖржорж┐ ржЪрж╛ржЗ ржЗржЙржЬрж╛рж░ ржпржжрж┐ ржЕржирж▓рж╛ржЗржирзЗ ржерж╛ржХрзЗ рждржмрзЗржЗ Save ржмрж╛ржЯржи ржХрж╛ржЬ ржХрж░рзБржХ")ред
**ржХрж┐ржнрж╛ржмрзЗ ржХрж░ржм**, рж╕рзЗржЗ ржЭрж╛ржорзЗрж▓рж╛ рж╣рзБржХрзЗрж░ ржнрж┐рждрж░ржЗ ржерж╛ржХрж▓ред

---

ржЖржкржирж┐ ржпржжрж┐ ржмрж▓рзЗржи, ржЖржорж┐ ржПржЗ рж▓рзЗржЦрж╛рж░ ржкрж░рзЗрж░ ржЕржВрж╢ ржирж┐рзЯрзЗ ржкрж░ржмрж░рзНрждрзА рж╕рзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ тАФ
ржпрзЗржоржи:
ЁЯСЙ ржХрж┐ржнрж╛ржмрзЗ ржмрзЬ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржжрж┐рзЯрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рж╛ржЦрж╛ ржпрж╛рзЯ
ЁЯСЙ ржХрж┐ржнрж╛ржмрзЗ ржХрзЛржирзЛ ржЗржлрзЗржХрзНржЯрзЗрж░ ржнрзЗрждрж░рзЗрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕржВрж╢ржХрзЗ тАЬreactiveтАЭ ржирж╛ ржмрж╛ржирж┐рзЯрзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯ

## IMPORTANT ONE. MUST READ

рждрзЛржорж╛рж░ ржкрзНрж░рж╢рзНржиржЯрж╛ ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг тАФ
**`useEffect()` ржПржХржмрж╛рж░ржЗ рж░рж╛ржи рж╣ржЪрзНржЫрзЗ, рждрж╛рж╣рж▓рзЗ ржЕржирж▓рж╛ржЗржи/ржЕржлрж▓рж╛ржЗржирзЗрж░ ржЕржмрж╕рзНржерж╛ ржХрзАржнрж╛ржмрзЗ ржЕржЯрзЛ ржЖржкржбрзЗржЯ рж╣ржЪрзНржЫрзЗ?**

ржЪрж▓рзЛ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ, рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзНржпрж╛ржЦрж╛ ржХрж░рж┐:

---

### ЁЯФБ `useEffect()` рж╢рзБржзрзБ ржПржХржмрж╛рж░ржЗ ржЪрж▓рзЗ тАУ ржПржЯрж╛ ржарж┐ржХред

```js
useEffect(() => {
  // subscribe...
  return () => {
    // unsubscribe...
  };
}, []);
```

ржПржЦрж╛ржирзЗ `[]` (empty dependency array) ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗ, `useEffect()` **рж╢рзБржзрзБ ржкрзНрж░ржержоржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ ржорж╛ржЙржирзНржЯ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ** ржПржХржмрж╛рж░ ржЪрж▓рзЗред
**ржЖрж░ рж╢рзЗрж╖рзЗрж░ `return()` ржЕржВрж╢ ржЪрж▓рзЗ рждржЦржи, ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржиржорж╛ржЙржирзНржЯ рж╣рзЯред**

---

### тЬЕ рждрж╛рж╣рж▓рзЗ ржЬрж╛ржжрзБржЯрж╛ ржХрзЛржерж╛рзЯ? **`window.addEventListener`-ржП!**

рждрзБржорж┐ ржпржЦржи рж▓рж┐ржЦрзЛ:

```js
window.addEventListener("online", handleOnline);
window.addEventListener("offline", handleOffline);
```

ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛ тАФ **ржПржЗ ржХрзЛржбржЯрж╛ ржмрзНрж░рж╛ржЙржЬрж╛рж░ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ, "ржпржЦржиржЗ ржЗржЙржЬрж╛рж░ ржЕржирж▓рж╛ржЗржи ржмрж╛ ржЕржлрж▓рж╛ржЗржи рж╣ржмрзЗ, ржЖржорж╛ржХрзЗ ржЬрж╛ржирж╛ржУ!"**
ЁЯФФ ржПржЯрж╛ ржПржХрж░ржХржо рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржиред ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржпрзЗржХрзЛржирзЛ рж╕ржорзЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржмржжрж▓рж╛рж▓рзЗ, рж╕рзЗ `handleOnline()` ржмрж╛ `handleOffline()` ржлрж╛ржВрж╢ржиржХрзЗ ржирж┐ржЬрзЗ ржерзЗржХрзЗ ржХрж▓ ржХрж░рзЗред

---

### ЁЯза рждрж╛рж╣рж▓рзЗ `useEffect()` ржПржХржмрж╛рж░ржЗ ржЪрж▓рж▓рзЗржУ...

> ржПрж░ ржнрж┐рждрж░рзЗ `addEventListener()` ржХрж▓ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ,
> ржЖрж░ ржПржЗ ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ржЧрзБрж▓рзЛ **ржкрзБрж░рзЛ рж╕ржорзЯ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ**,
> ржХржЦржи `online` ржмрж╛ `offline` ржЗржнрзЗржирзНржЯ ржШржЯрзЗред

ЁЯЯв ржпржЦржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржи ржлрж┐рж░рзЗ ржЖрж╕рзЗ тЖТ `handleOnline()` ржЪрж▓рзЗ тЖТ `setIsOnline(true)`
ЁЯФ┤ ржпржЦржи ржХрж╛ржирзЗржХрж╢ржи ржпрж╛рзЯ тЖТ `handleOffline()` ржЪрж▓рзЗ тЖТ `setIsOnline(false)`

---

### ЁЯПБ ржкрзНрж░ржержо `useState()` ржХрзЗржи `navigator.onLine` ржжрж┐рзЯрзЗ ржХрж░рж╛ рж╣рж▓рзЛ?

```js
const [isOnline, setIsOnline] = useState(navigator.onLine);
```

тЮбя╕П `navigator.onLine` рж╣рж▓ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржПржХржЯрж╛ ржмрж┐рж▓рзНржЯ-ржЗржи ржкрзНрж░ржкрж╛рж░рзНржЯрж┐, ржпрзЗржЯрж╛ ржмрж▓рзЗ ржжрж┐ржЪрзНржЫрзЗ ржПржЦржи ржЗржЙржЬрж╛рж░ ржЕржирж▓рж╛ржЗржирзЗ ржЖржЫрзЗ ржХрж┐ ржирж╛ред
рждрж╛ржЗ ржкрзНрж░ржержо рж░рзЗржирзНржбрж╛рж░рзЗржЗ ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржЕржлрж▓рж╛ржЗржирзЗ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ рж╕рзЗржЯрж╛ ржзрж░рждрзЗ ржкрж╛рж░рж┐ред

---

### тЬЕ рж╕ржВржХрзНрж╖рзЗржкрзЗ, ржПржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:

1. `useState(navigator.onLine)` тАФ ржкрзНрж░ржержоржмрж╛рж░ ржЗржЙржЬрж╛рж░ ржЕржирж▓рж╛ржЗржирзЗ ржирж╛ржХрж┐ ржирж╛, рждрж╛ ржзрж░рзЗред
2. `useEffect()` тЖТ `addEventListener()` ржжрж┐рзЯрзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ тАЬlisteningтАЭ рж╢рзБрж░рзБ ржХрж░рзЗред
3. ржпржЦржиржЗ ржЗржЙржЬрж╛рж░ ржЕржирж▓рж╛ржЗржи/ржЕржлрж▓рж╛ржЗржи рж╣рзЯ тЖТ ржмрзНрж░рж╛ржЙржЬрж╛рж░ `handleOnline` ржмрж╛ `handleOffline` ржлрж╛ржВрж╢ржи ржЪрж╛рж▓рж╛рзЯред
4. рж╕рзЗржЗ ржлрж╛ржВрж╢ржирзЗ `setIsOnline()` ржХрж▓ рж╣рзЯ тЖТ ржлрж▓рзЗ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ ржЖржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗред

---

### ЁЯФЪ ржЙржкрж╕ржВрж╣рж╛рж░

рждрзБржорж┐ ржарж┐ржХ ржзрж░рзЗржЫрзЛ, `useEffect()` ржПржХржмрж╛рж░ржЗ ржЪрж▓рзЗред
**ржХрж┐ржирзНрждрзБ рж╕рзЗржЗ ржПржХржмрж╛рж░рзЗрж░ ржнрж┐рждрж░рзЗржЗ ржЖржорж░рж╛ ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ рж╕рзЗржЯ ржХрж░рзЗ ржжрж┐рзЯрзЗ ржЖрж╕рж┐, ржпрзЗржЧрзБрж▓рзЛ рж╕ржмрж╕ржорзЯ "ржХрж╛ржирзЗ рж╢рзБржирзЗ" ржерж╛ржХрзЗ** тАФ
ржпрждржмрж╛рж░ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржмржжрж▓рж╛ржмрзЗ, рждрждржмрж╛рж░ `setIsOnline()` рж╣ржмрзЗред

ржПржЗржЯрзБржХрзБ ржЬрж┐ржирж┐рж╕ ржирж╛ ржмрзБржЭрж▓рзЗ ржЕржирзЗржХрзЗрж░ржЗ ржоржирзЗ ржкрзНрж░рж╢рзНржи ржЖрж╕рзЗ тАФ **тАЬржПржХржмрж╛рж░ржЗ рждрзЛ ржЪрж▓рзЗ, рждрж╛рж╣рж▓рзЗ ржкрж░рзЗ ржЖржкржбрзЗржЯ рж╣ржЪрзНржЫрзЗ ржХрж┐ржнрж╛ржмрзЗ?тАЭ**
рждрзЛржорж╛рж░ ржПржЗ ржХрзМрждрзВрж╣рж▓ рж╕рждрзНржпрж┐ржЗ ржкрзНрж░рж╢ржВрж╕ржирзАрзЯред ЁЯТб

---

ржЪрж▓рзБржи, ржЖржорж░рж╛ **Section рзз.рзй: `use` ржжрж┐рзЯрзЗ рж╣рзБржХрзЗрж░ ржирж╛ржо рж╢рзБрж░рзБ ржХрж░рж╛ ржЙржЪрж┐ржд ржХрзЗржи** тАФ ржПржЗ рж╕рзЗржХрж╢ржиржЯрж╛ рж╕рж╣ржЬ, ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржПржмржВ ржПржХрзЗржмрж╛рж░рзЗ ржмрж╛ржВрж▓рж╛ржнрж╛рж╖рзАржжрзЗрж░ ржмрзЛржЭрж╛рж░ ржЙржкржпрзЛржЧрзА ржХрж░рзЗ рж▓рж┐ржЦрж┐ред

---

## рж╕рзЗржХрж╢ржи рзз.рзй: рж╣рзБржХрзЗрж░ ржирж╛ржо рж╕ржмрж╕ржорзЯ `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ рж╣ржмрзЗ ржХрзЗржи?

React-ржП ржЕрзНржпрж╛ржк ржмрж╛ржирж╛ржирзЛ рж╣рзЯ **ржХржорзНржкрзЛржирзЗржирзНржЯ ржжрж┐рзЯрзЗ**ред ржЖрж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░рзЗржЗ ржЖржорж░рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ **рж╣рзБржХ (Hook)** тАФ ржпрзЗржЧрзБрж▓рзЛ рж╣рзЯ React ржПрж░ ржжрзЗржУрзЯрж╛ рждрзИрж░рж┐ рж╣рзБржХ, ржирж╛ рж╣рзЯ ржЖржорж░рж╛ ржирж┐ржЬрзЗрж░рж╛ ржмрж╛ржирж╛ржирзЛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХред

React рж╣рзБржХ ржпржЦржиржЗ рж▓рж┐ржЦржмрзЗржи ржмрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи, рждржЦржи ржПржХржЯрж╛ ржирж┐рзЯржо ржорж╛ржерж╛рзЯ рж░рж╛ржЦржмрзЗржи:

### ржирж╛ржорзЗрж░ ржЖржЧрзЗ `use` ржмрж╕рж╛ржмрзЗржи, рждрж╛рж░ржкрж░ рж╣рзБржХрзЗрж░ ржХрж╛ржЬ ржмрзЛржЭрж╛рзЯ ржПржоржи ржПржХржЯрж╛ ржирж╛ржоред

---

### ржжрзБржЗржЯрж╛ ржирж╛ржорзЗрж░ ржирж┐рзЯржо ржЖржкржирж╛ржХрзЗ ржЕржмрж╢рзНржпржЗ ржорж╛ржирждрзЗ рж╣ржмрзЗ:

1. **React ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржирж╛ржо** рж╕ржмрж╕ржорзЯ ржмрзЬ рж╣рж╛рждрзЗрж░ ржЕржХрзНрж╖рж░ ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ рж╣ржмрзЗ, ржпрзЗржоржи: `ChatRoom`, `SaveButton`ред
   ржХрж╛рж░ржг React рж╢рзБржзрзБ ржмрзЬ рж╣рж╛рждрзЗрж░ ржирж╛ржоржЧрзБрж▓рзЛржХрзЗржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐ржирждрзЗ ржкрж╛рж░рзЗред

2. **React рж╣рзБржХрзЗрж░ ржирж╛ржо** рж╕ржмрж╕ржорзЯ `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ рж╣ржмрзЗ, рждрж╛рж░ржкрж░ ржмрзЬ рж╣рж╛рждрзЗрж░ ржЕржХрзНрж╖рж░рзЗ ржмрж╛ржХрж┐ржЯрж╛, ржпрзЗржоржи:
   ЁЯСЙ `useState` (React ржПрж░ рждрзИрж░рж┐ рж╣рзБржХ)
   ЁЯСЙ `useOnlineStatus` (ржЖржкржирж╛рж░ ржмрж╛ржирж╛ржирзЛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ)

---

ржПржЗ ржирж┐рзЯржо ржорж╛ржирж▓рзЗ ржПржХржЯрж╛ ржжрж╛рж░рзБржг рж╕рзБржмрж┐ржзрж╛ рж╣рзЯ:

ЁЯФН ржЖржкржирж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ рждрж╛ржХрж┐рзЯрзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи, ржХрзЛржи ржХрзЛржи ржлрж╛ржВрж╢ржирзЗрж░ ржоржзрзНржпрзЗ рж╕рзНржЯрзЗржЯ, ржЗржлрзЗржХрзНржЯ ржмрж╛ React-ржПрж░ ржлрж┐ржЪрж╛рж░ рж▓рзБржХрж┐рзЯрзЗ ржЖржЫрзЗред

ЁЯСЙ ржпрзЗржоржи ржзрж░рзБржи `getColor()` ржирж╛ржорзЗ ржПржХржЯрж╛ ржлрж╛ржВрж╢ржи тАФ ржЖржкржирж┐ ржЬрж╛ржирзЗржи, ржПржЯрж╛ ржХрзЛржирзЛ рж╣рзБржХ ржирж╛ред ржорж╛ржирзЗ ржПржЯрж╛ React ржПрж░ ржХрзЛржирзЛ рж╕рзНржкрзЗрж╢рж╛рж▓ ржирж┐рзЯржорзЗ ржЪрж▓рзЗ ржирж╛ред
ржХрж┐ржирзНрждрзБ `useOnlineStatus()` ржжрзЗржЦрж▓рзЗржЗ ржмрзЛржЭрж╛ ржпрж╛ржмрзЗ, ржПржЯрж╛ ржПржХржЯрж╛ рж╣рзБржХ тАФ ржПрж░ ржоржзрзНржпрзЗ рж╣рзЯрждрзЛ `useState`, `useEffect` ржмрж╛ `useContext` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

---

## ЁЯЫая╕П ржЯрж┐ржкрж╕: ржЖржкржирж╛рж░ ржХрзЛржб ржпржжрж┐ рж▓рж┐ржирзНржЯрж╛рж░ ржжрж┐рзЯрзЗ ржЪрзЗржХ ржХрж░рж╛ ржерж╛ржХрзЗ...

ржЖржкржирж╛рж░ ржпржжрж┐ React-friendly ржХрзЛржб ржПржбрж┐ржЯрж░ рж╕рзЗржЯржЖржк ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рж▓рж┐ржирзНржЯрж╛рж░ (ржпрзЗржЯрж╛ ржХрзЛржбрзЗ ржнрзБрж▓ ржзрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ) ржПржЗ ржирж╛ржорзЗрж░ ржирж┐рзЯржо enforce ржХрж░ржмрзЗред

ржЙржжрж╛рж╣рж░ржг: ржЖржкржирж┐ ржпржжрж┐ `useOnlineStatus` рж╣рзБржХрзЗрж░ ржирж╛ржо ржмржжрж▓рзЗ `getOnlineStatus` рж░рж╛ржЦрзЗржи, рждрж╛рж╣рж▓рзЗ рж▓рж┐ржирзНржЯрж╛рж░ ржЖрж░ `useState` ржмрж╛ `useEffect` ржЪрж╛рж▓рж╛рждрзЗ ржжрзЗржмрзЗ ржирж╛!
ржХрж╛рж░ржг рж╢рзБржзрзБ рж╣рзБржХ ржУ ржХржорзНржкрзЛржирзЗржирзНржЯ-ржЗ ржЕржирзНржп рж╣рзБржХ ржХрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

---

### ЁЯза ржПржХржЯрзБ ржЧржнрзАрж░рзЗ ржпрж╛ржЗ: рж╕ржм ржлрж╛ржВрж╢ржирзЗрж░ ржирж╛ржо ржХрж┐ `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд?

ржирж╛, ржорзЛржЯрзЗржУ ржирж╛ред

ржпржжрж┐ ржХрзЛржирзЛ ржлрж╛ржВрж╢ржи **рж╣рзБржХ ржирж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ**, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛рж░ ржирж╛ржорзЗрж░ ржЖржЧрзЗ `use` ржмрж╕рж╛ржирзЛ ржЙржЪрж┐ржд ржирж╛ред

ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрзБржи ЁЯСЗ

### тЭМ ржнрзБрж▓:

```js
function useSorted(items) {
  return items.slice().sort();
}
```

ржПржЗ ржлрж╛ржВрж╢ржирзЗ ржХрзЛржирзЛ рж╣рзБржХ ржирзЗржЗред рждрж╛рж╣рж▓рзЗ `use` ржХрзЗржи?

### тЬЕ ржарж┐ржХ:

```js
function getSorted(items) {
  return items.slice().sort();
}
```

ржПржЦржи ржПржЯрж╛ ржпрзЗ ржХрзЛржирзЛ ржЬрж╛рзЯржЧрж╛рзЯ, ржПржоржиржХрж┐ рж╢рж░рзНржд ржЕржирзБржпрж╛рзЯрзАржУ (if ржПрж░ ржнрж┐рждрж░) ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛ржмрзЗ, ржХрзЛржирзЛ React рж░рзБрж▓ ржнрж╛ржЩржмрзЗ ржирж╛ред

---

### рждрж╛рж╣рж▓рзЗ ржХржЦржи `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ ржХрж░ржм?

ржпржЦржи ржЖржкржирж╛рж░ ржлрж╛ржВрж╢ржирзЗрж░ ржнрж┐рждрж░рзЗ ржЕржирзНржп рж╣рзБржХ ржерж╛ржХрзЗ, рждржЦржи ржЕржмрж╢рзНржпржЗ `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ ржХрж░ржмрзЗржиред

тЬЕ ржЙржжрж╛рж╣рж░ржг:

```js
function useAuth() {
  return useContext(Auth);
}
```

ржПржЯрж╛ ржПржХржжржо ржкрж╛рж░ржлрзЗржХрзНржЯред ржХрж╛рж░ржг ржПржЯрж┐ React рж╣рзБржХ ржХрж▓ ржХрж░ржЫрзЗред

---

### тЪая╕П ржпржжрж┐ ржПржЦржи ржХрзЛржирзЛ рж╣рзБржХ ржирж╛ ржерж╛ржХрзЗ, ржХрж┐ржирзНрждрзБ ржнржмрж┐рж╖рзНржпрждрзЗ рж░рж╛ржЦрж╛рж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛ ржерж╛ржХрзЗ?

рждрж╛рж╣рж▓рзЗ рж╢рзБрж░рзБ ржерзЗржХрзЗржЗ `use` ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ ржХрж░рж╛ржЗ ржнрж╛рж▓рзЛред

```js
function useAuth() {
  // ржПржЦржи рж╢рзБржзрзБ ржбрзЗржорзЛ ржЗржЙржЬрж╛рж░ ржлрзЗрж░ржд ржжрж┐ржЪрзНржЫрзЗ
  return TEST_USER;

  // ржкрж░рзЗ ржПржЦрж╛ржирзЗ ржЖрж╕рж▓ рж╣рзБржХ ржЖрж╕ржмрзЗ:
  // return useContext(Auth);
}
```

ржПржЗ ржирж┐рзЯржорзЗ React ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЬржирзНржп ржкрзНрж░рж╕рзНрждрзБржд ржерж╛ржХржмрзЗред

---

**рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрж▓рж▓рзЗ:**

- `use` ржжрж┐рзЯрзЗ ржирж╛ржо рж╢рзБрж░рзБ ржХрж░рзБржи рж╢рзБржзрзБ рждржЦржиржЗ, ржпржЦржи ржлрж╛ржВрж╢ржиржЯрж╛ рж╕рждрзНржпрж┐ржЗ рж╣рзБржХред
- рж╣рзБржХ ржирж╛ рж╣рж▓рзЗ, рж╕рж╛ржзрж╛рж░ржг ржлрж╛ржВрж╢ржирзЗрж░ ржорждрзЛ рж░рж╛ржЦрзБржи тАФ `get`, `fetch`, `calculate` тАФ ржпрж╛ ржжрж░ржХрж╛рж░ред

---

ржЕрж╕рж╛ржзрж╛рж░ржг, ржорзЛржГ ржоржЬржирзБ ржорж┐ржпрж╝рж╛ ржнрж╛ржЗ!
ржЪрж▓рзБржи ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ React Bangla ржмржЗрзЯрзЗрж░ **рж╕рзЗржХрж╢ржи рзз.рзй** рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж┐ тАФ
рж╕рж╣ржЬ, ржкрзНрж░рж╛ржЮрзНржЬрж▓, ржЖрж░ ржЧрж▓рзНржкрзЗрж░ ржорждрзЛ ржнрж╛рж╖рж╛рзЯ ржпрзЗржи рж╕ржмрж╛ржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗред

---

## рж╕рзЗржХрж╢ржи рзз.рзй: ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржЖржкржирж╛ржХрзЗ рж╕рзНржЯрзЗржЯ рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржжрзЗрзЯ ржирж╛, ржжрзЗрзЯ рж╢рзБржзрзБ рж▓ржЬрж┐ржХ

React-ржП ржЖржорж░рж╛ ржкрзНрж░рж╛рзЯржЗ ржжрзЗржЦрж┐ ржПржХржЗ рж░ржХржо рж╕рзНржЯрзЗржЯ ржЖрж░ ржПржХржЗ рж░ржХржо рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрждрзЗ рж╣ржЪрзНржЫрзЗред рждржЦржи ржоржирзЗ рж╣рзЯ, тАЬржПржХржЗ ржХрзЛржб ржЖржмрж╛рж░ ржЖржмрж╛рж░ рж▓рж┐ржЦржЫрж┐ ржХрзЗржи?тАЭ тАФ
ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи рж╣рж▓рзЛ **Custom Hook**ред

ржХрж┐ржирзНрждрзБ ржПржХржЯрж╛ ржнрзБрж▓ ржзрж╛рж░ржирж╛ ржЕржирзЗржХрзЗржЗ ржХрж░рзЗ ржмрж╕рзЗ тАФ
тАЬржЖржорж┐ рждрзЛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж╛рж▓рж╛ржо, ржПржЦржи рж╣рзЯрждрзЛ рж╕ржм ржЬрж╛рзЯржЧрж╛рзЯ ржПржХржЗ рж╕рзНржЯрзЗржЯ рж╢рзЗрзЯрж╛рж░ рж╣ржЪрзНржЫрзЗ!тАЭ

ЁЯЫС ржирж╛ ржнрж╛ржЗ! ржХрж╛рж╕рзНржЯржо рж╣рзБржХ _рж▓ржЬрж┐ржХ_ рж╢рзЗрзЯрж╛рж░ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ _рж╕рзНржЯрзЗржЯ_ ржирж╛ред
ржЪрж▓рзБржи, ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрзЗ ржирж┐ржЗред

---

### ржЖржЧрзЗ ржпрж╛ ржЫрж┐рж▓: ржПржХржЗ рж▓ржЬрж┐ржХ ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрзЗржЫрж┐

```jsx
function StatusBar() {
  const [isOnline, setIsOnline] = useState(true);
  useEffect(() => {
    // ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ
  }, []);
}

function SaveButton() {
  const [isOnline, setIsOnline] = useState(true);
  useEffect(() => {
    // ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ
  }, []);
}
```

ржжрзЗржЦрзБржи, ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯ ржПржХржЗ ржЬрж┐ржирж┐рж╕ рж▓рж┐ржЦрзЗржЫрж┐ тАФ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ рж╕рзНржЯрзЗржЯ, ржЖрж▓рж╛ржжрж╛ ржЗржлрзЗржХрзНржЯред

---

### ржкрж░рзЗ ржпрж╛ ржХрж░рж▓рж╛ржо: ржПржХржЗ рж▓ржЬрж┐ржХ рждрзБрж▓рзЗ ржирж┐рж▓рж╛ржо ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗ

```jsx
function StatusBar() {
  const isOnline = useOnlineStatus();
  // ...
}

function SaveButton() {
  const isOnline = useOnlineStatus();
  // ...
}
```

ржПржЦржи ржХрзЛржб ржХржорзЗржЫрзЗ, ржкрж░рж┐рж╖рзНржХрж╛рж░ ржжрзЗржЦрж╛ржЪрзНржЫрзЗред
ржХрж┐ржирзНрждрзБ ржнрзБрж▓рзЗ ржпрж╛ржмрзЗржи ржирж╛ тАФ
ЁЯСЙ `StatusBar` ржЖрж░ `SaveButton` ржПржХрзЗржХржмрж╛рж░ **`useOnlineStatus()`** ржХрж▓ ржХрж░ржЫрзЗред
ЁЯСЙ ржкрзНрж░рждрж┐ржмрж╛рж░ ржХрж▓ ржорж╛ржирзЗржЗ **ржирждрзБржи ржПржХржЯрж╛ рж╕рзНржЯрзЗржЯ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗред**

рждрж╛ржЗ ржПржЗ ржжрзБржЗржЯрж╛ **рж╕рзНржЯрзЗржЯ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб ржирж╛ред** рж╢рзБржзрзБ ржПржХрж┐ рж░ржХржо **рж▓ржЬрж┐ржХ** ржлрж▓рзЛ ржХрж░ржЫрзЗред

---

### ржЪрж▓рзБржи ржПржмрж╛рж░ ржПржХржЯрж╛ ржлрж░рзНржо ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐

```jsx
export default function Form() {
  const [firstName, setFirstName] = useState("Mary");
  const [lastName, setLastName] = useState("Poppins");

  function handleFirstNameChange(e) {
    setFirstName(e.target.value);
  }

  function handleLastNameChange(e) {
    setLastName(e.target.value);
  }

  return (
    <>
      <label>
        First name:
        <input value={firstName} onChange={handleFirstNameChange} />
      </label>
      <label>
        Last name:
        <input value={lastName} onChange={handleLastNameChange} />
      </label>
      <p>
        <b>
          Good morning, {firstName} {lastName}.
        </b>
      </p>
    </>
  );
}
```

ржПржЗ ржлрж░рзНржорзЗ ржжрзБржЗржЯрж╛ ржЗржиржкрзБржЯ ржЖржЫрзЗ, ржЖрж░ ржжрзБржЗржмрж╛рж░ рж╕рзНржЯрзЗржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржХрж░рзЗржЫрж┐ред
ржПржЦржи ржПржЗ **ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХржорж╛рждрзЗ**, ржЖржорж░рж╛ ржПржХржЯрж╛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ рж▓рж┐ржЦржмрзЛред

---

### ржирждрзБржи ржХрж╛рж╕рзНржЯржо рж╣рзБржХ: `useFormInput()`

```jsx
// useFormInput.js
export function useFormInput(initialValue) {
  const [value, setValue] = useState(initialValue);

  function handleChange(e) {
    setValue(e.target.value);
  }

  return {
    value,
    onChange: handleChange,
  };
}
```

ржПржмрж╛рж░ `Form` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐:

```jsx
import { useFormInput } from "./useFormInput.js";

export default function Form() {
  const firstNameProps = useFormInput("Mary");
  const lastNameProps = useFormInput("Poppins");

  return (
    <>
      <label>
        First name:
        <input {...firstNameProps} />
      </label>
      <label>
        Last name:
        <input {...lastNameProps} />
      </label>
      <p>
        <b>
          Good morning, {firstNameProps.value} {lastNameProps.value}.
        </b>
      </p>
    </>
  );
}
```

ржПржЦрж╛ржирзЗ ржХрж┐ржирзНрждрзБ `useFormInput()` ржжрзБржЗржмрж╛рж░ ржХрж▓ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред
ЁЯСЙ рждрж╛ржЗ ржПржЯрж╛ ржжрзБржЗржЯрж╛ **ржЖрж▓рж╛ржжрж╛ рж╕рзНржЯрзЗржЯ** рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗред
ЁЯСЙ **рж╕рзНржЯрзЗржЯ рж╢рзЗрзЯрж╛рж░ рж╣рзЯ ржирж╛**, рж╢рзБржзрзБ **рж▓ржЬрж┐ржХ рж╢рзЗрзЯрж╛рж░ рж╣рзЯ**ред

---

## рж╢рзЗрж╖ ржХржерж╛

ЁЯФБ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржорж╛ржирзЗ ржмрж╛рж░ржмрж╛рж░ рж▓рзЗржЦрж╛ ржХрзЛржб ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржирж┐рзЯрзЗ ржЖрж╕рж╛ред

тЭдя╕П ржХрж┐ржирзНрждрзБ ржнрзБрж▓рзЗ ржпрзЗржУ ржирж╛, ржкрзНрж░рждрж┐ржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ, ржкрзНрж░рждрж┐ржмрж╛рж░ **ржирждрзБржи рж╕рзНржЯрзЗржЯ** рждрзИрж░рж┐ рж╣рзЯред

ржпржжрж┐ рж╕рждрзНржпрж┐ рж╕рждрзНржпрж┐ ржПржХрж╛ржзрж┐ржХ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ **ржПржХржЗ рж╕рзНржЯрзЗржЯ рж╢рзЗрзЯрж╛рж░** ржХрж░рждрзЗ ржЪрж╛ржУ тАФ
ЁЯСЙ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ рж╕рзНржЯрзЗржЯржХрзЗ **ржЙржкрж░рзЗ рждрзБрж▓рзЗ ржЖржирзЛ** (lift up)
ЁЯСЙ ржЖрж░ ржирж┐ржЪрзЗ **props ржжрж┐рзЯрзЗ ржкрж╛ржарж╛ржУ**ред

---

ржирж┐ржЪрзЗ рж╕рзЗржХрж╢ржи рзи-ржПрж░ ржкрзНрж░ржержо ржнрж╛ржЧрзЗрж░ ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржУ ржкрзНрж░рж╛ржЩрзНржХрзГржд ржмрж╛ржВрж▓рж╛ рж░рзВржк ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛтАФ**ржпрж╛рждрзЗ ржЕржирзБржмрж╛ржжрзЗрж░ ржЫрж╛ржк ржирж╛ ржерж╛ржХрзЗ ржмрж░ржВ ржкрж╛ржарзЗ рж╕рж╣ржЬржмрзЛржзрзНржпрждрж╛ ржУ рж╕рж╛ржмрж▓рзАрж▓рждрж╛ ржерж╛ржХрзЗред** ржкрзБрж░рзЛ рж╕рзЗржХрж╢ржиржЯрж┐ ржмрзЬ, рждрж╛ржЗ ржПржЯрж┐ржХрзЗ ржжрзБржЗржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржжрж┐ржмрзЛред ржирж┐ржЪрзЗ ржкрзНрж░ржержо ржЕржВрж╢:

---

## рж╕рзЗржХрж╢ржи рзи: рж░рж┐рзЯрзЗржХрзНржЯрж┐ржн ржорж╛ржи ржПржХ рж╣рзБржХ ржерзЗржХрзЗ ржЖрж░рзЗржХ рж╣рзБржХрзЗ ржкрж╛ржарж╛ржирзЛ {/* passing-reactive-values-between-hooks */}

рждрзЛржорж╛рж░ ржмрж╛ржирж╛ржирзЛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХржЧрзБрж▓рзЛтАФржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ ржпрждржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, ржарж┐ржХ рждрждржмрж╛рж░ржЗ ржкрзБржирж░рж╛рзЯ ржЪрж╛рж▓рзБ рж╣рзЯ (re-run)ред рждрж╛ржЗ ржПржЧрзБрж▓рзЛржХрзЗржУ ржарж┐ржХ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржорждрзЛржЗ **pure** рж░рж╛ржЦрждрзЗ рж╣рзЯред ржЕрж░рзНржерж╛рзО, ржмрж╛ржЗрж░рзЗрж░ ржЬржЧрждрзЗрж░ ржХрзЛржирзЛ ржкрзНрж░ржнрж╛ржм ржпрзЗржи ржирж╛ ржерж╛ржХрзЗтАФржПржХржЗ ржЗржиржкрзБржЯрзЗ рж╕ржмрж╕ржорзЯ ржПржХржЗ ржЖржЙржЯржкрзБржЯ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрж▓рж▓рзЗ, ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗрж░ ржХрзЛржбржЯрж╛ржУ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржмржбрж┐рж░ ржЕржВрж╢ рж╣рж┐рж╕рзЗржмрзЗржЗ ржнрж╛ржмрждрзЗ ржкрж╛рж░рзЛред

ржПржЗ ржХрж╛рж░ржгрзЗ, ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗрж░ ржнрж┐рждрж░рзЗ рждрзБржорж┐ рж╕ржмрж╕ржорзЯ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ **рж╕рж░рзНржмрж╢рзЗрж╖ ржкрзНрж░ржкрж╕ ржУ рж╕рзНржЯрзЗржЯрзЗрж░ ржорж╛ржи** ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗред ржПржХржЯрж╛ ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзЛржЭрж╛ржЗтАФржзрж░рзЛ, рждрзБржорж┐ ржПржХржЯрж╛ ржЪрзНржпрж╛ржЯ рж░рзБржо ржЕрзНржпрж╛ржк ржмрж╛ржирж╛ржЪрзНржЫрзЛред рж╕рзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░ ржЪрзНржпрж╛ржЯ рж░рзБржо ржмржжрж▓рж╛рждрзЗ ржкрж╛рж░рзЗ, ржЖржмрж╛рж░ ржЪрж╛ржЗрж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ URL-ржУ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ ржкрзНрж░ржержорзЗ ржЖржорж░рж╛ ржПржЗ рж▓ржЬрж┐ржХ рж╕рж░рж╛рж╕рж░рж┐ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░рзЗржЗ рж▓рж┐ржЦржЫрж┐:

```jsx
// App.js
import { useState } from "react";
import ChatRoom from "./ChatRoom.js";

export default function App() {
  const [roomId, setRoomId] = useState("general");

  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

```jsx
// ChatRoom.js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";
import { showNotification } from "./notifications.js";

export default function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  useEffect(() => {
    const options = { serverUrl, roomId };
    const connection = createConnection(options);
    connection.on("message", (msg) => {
      showNotification("New message: " + msg);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);

  return (
    <>
      <label>
        Server URL:
        <input
          value={serverUrl}
          onChange={(e) => setServerUrl(e.target.value)}
        />
      </label>
      <h1>Welcome to the {roomId} room!</h1>
    </>
  );
}
```

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, ржпржЦржиржЗ `roomId` ржмрж╛ `serverUrl` ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ, рждржЦржиржЗ `useEffect` ржирждрзБржи ржХрж░рзЗ ржЪрж▓рзЗ ржПржмржВ ржирждрзБржи ржХрж░рзЗ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВржпрзЛржЧ (connect) ржХрж░рзЗред рждрзБржорж┐ ржХржирж╕рзЛрж▓рзЗ рж▓ржЧ ржжрзЗржЦрж▓рзЗржЗ ржПржЯрж╛ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗред

ржПржЦржи ржПржЗ `useEffect`-ржПрж░ рж▓ржЬрж┐ржХржЯрзБржХрзБ рж╕рж░рж┐рзЯрзЗ ржЖржорж░рж╛ ржПржХржЯрж┐ ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗрж░ ржнрж┐рждрж░рзЗ ржирж┐рзЯрзЗ ржпрж╛ржЗ:

```js
// useChatRoom.js
import { useEffect } from "react";
import { createConnection } from "./chat.js";
import { showNotification } from "./notifications.js";

export function useChatRoom({ serverUrl, roomId }) {
  useEffect(() => {
    const options = { serverUrl, roomId };
    const connection = createConnection(options);
    connection.connect();
    connection.on("message", (msg) => {
      showNotification("New message: " + msg);
    });
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
}
```

ржПржмрж╛рж░ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ рж╣рзБржХржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐:

```jsx
// ChatRoom.js
import { useState } from "react";
import { useChatRoom } from "./useChatRoom.js";

export default function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  useChatRoom({ roomId, serverUrl });

  return (
    <>
      <label>
        Server URL:
        <input
          value={serverUrl}
          onChange={(e) => setServerUrl(e.target.value)}
        />
      </label>
      <h1>Welcome to the {roomId} room!</h1>
    </>
  );
}
```

рждрзБржорж┐ ржжрзЗржЦржмрзЗ, ржХрзЛржбржЯрж╛ ржПржЦржи ржЕржирзЗржХ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж▓рж╛ржЧржЫрзЗтАФржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░ рж╢рзБржзрзБ ржжрж░ржХрж╛рж░рж┐ ржЕржВрж╢ржЯрж╛ржЗ ржЖржЫрзЗред ржЖрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВржпрзЛржЧ ржмрж╛ ржмрж╛рж░рзНрждрж╛ ржЖрж╕рж╛ ржирж┐рзЯрзЗ ржХрзЛржирзЛ ржЪрж┐ржирзНрждрж╛ ржХрж░рждрзЗ рж╣ржЪрзНржЫрзЗ ржирж╛тАФрж╕ржм ржжрж╛рзЯрж┐рждрзНржм ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржирж┐рзЯрзЗржЫрзЗред

---

## ржзржирзНржпржмрж╛ржж ржоржирзЗ ржХрж░рж┐рзЯрзЗ ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржп, Md. Mojnu Miah ржнрж╛ржЗред ржПржЦржи ржЖржорж░рж╛ **Section 2: Passing reactive values between Hooks** ржПрж░ **рзирзЯ ржЕржВрж╢** ржмрж╛ржВрж▓рж╛рзЯ рж╕рж╣ржЬ ржУ ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржнрж╛рж╖рж╛рзЯ рж╢рзЗрж╖ ржХрж░рзЗ ржлрзЗрж▓рж┐ред

## рж╕рзЗржХрж╢ржи рзи: рж╣рзБржХрзЗрж░ ржоржзрзНржпрзЗ рж░рж┐ржПрзНржпрж╛ржХржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ ржкрж╛ржарж╛ржирзЛ (ржЪрж▓ржорж╛ржи...)

### ржкрзНрж░рждрж┐ржмрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗржЗ рж╣рзБржХ ржирждрзБржи ржнрзНржпрж╛рж▓рзБ ржкрж╛рзЯ

рждрзЛржорж╛рж░ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржпржЦржиржЗ `roomId` ржмрж╛ `serverUrl` ржмржжрж▓рж╛рзЯ, рждржЦржи ржкрзБрж░рзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред ржЖрж░ ржпрзЗрж╣рзЗрждрзБ `useChatRoom` рж╣рзБржХржЯрж╛ржУ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░рзЗржЗ ржХрж▓ ржХрж░рж╛, рждрж╛ржЗ рж╕рзЗржЯрж╛ржУ ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣рзЯтАФржирждрзБржи ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗред

ржПржЗ ржирждрзБржи ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ рж╣рзБржХрзЗрж░ ржоржзрзНржпрзЗ ржЧрзЗрж▓рзЗ `useEffect` ржжрзЗржЦрзЗ ржирзЗрзЯ, ржПржЧрзБрж▓рзЛрж░ ржХрзЛржирзЛржЯрж╛ ржЖржЧрзЗ ржерзЗржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж┐ ржирж╛ред ржпржжрж┐ ржнрж┐ржирзНржи рж╣рзЯ, рждржмрзЗ ржкрзБрж░ржирзЛ connection ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ ржирждрзБржиржнрж╛ржмрзЗ `connect()` ржХрж░рзЗред
ржХржирж╕рзЛрж▓рзЗ рждрзБржорж┐ ржжрзЗржЦржмрзЗ:

```
тЬЕ Connecting to "travel" room at https://localhost:1234...
```

ржЕржержмрж╛,

```
тЭМ Disconnected from "general" room at https://localhost:1234
```

### ржПржХржЯрж╛ рж╣рзБржХрзЗрж░ ржЖржЙржЯржкрзБржЯ ржЖрж░рзЗржХ рж╣рзБржХрзЗрж░ ржЗржиржкрзБржЯ рж╣рждрзЗ ржкрж╛рж░рзЗ

`useState()` рж╣рзБржХ ржжрж┐рзЯрзЗ рждрзБржорж┐ `serverUrl` ржмрж╛ржирж┐рзЯрзЗржЫрзЛ:

```js
const [serverUrl, setServerUrl] = useState("https://localhost:1234");
```

рждрж╛рж░ржкрж░ ржПржЗ `serverUrl` ржЯрж╛ рждрзБржорж┐ `useChatRoom()` рж╣рзБржХрзЗ ржжрж┐ржЪрзНржЫрзЛ:

```js
useChatRoom({
  roomId: roomId,
  serverUrl: serverUrl,
});
```

ржПржЦрж╛ржирзЗ `useState()` ржПрж░ ржЖржЙржЯржкрзБржЯ ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ `serverUrl` ржПржмржВ рж╕рзЗржЯрж╛ ржЖржмрж╛рж░ `useChatRoom()` ржПрж░ ржЗржиржкрзБржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред
ржПржЗ ржкрзНрж░рж╕рзЗрж╕ржХрзЗ ржЕржирзЗржХржЯрж╛ ржЕржбрж┐ржУ ржмрж╛ ржнрж┐ржбрж┐ржУ ржПржбрж┐ржЯрж┐ржВ рж╕ржлржЯржУрзЯрзНржпрж╛рж░рзЗрж░ ржорждрзЛ ржнрж╛ржмрждрзЗ ржкрж╛рж░рзЛтАФржпрзЗржЦрж╛ржирзЗ ржПржХржЯрж╛ ржПржлрзЗржХрзНржЯрзЗрж░ ржЖржЙржЯржкрзБржЯ ржЖрж░рзЗржХржЯрж╛ ржПржлрзЗржХрзНржЯрзЗ ржврзБржХрзЗ ржпрж╛рзЯред ржПржХржЗржнрж╛ржмрзЗ `useState()` ржПрж░ рж░рж┐ржПрзНржпрж╛ржХржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ ржврзБржХрзЗ ржпрж╛ржЪрзНржЫрзЗ `useChatRoom()` рж╣рзБржХрзЗред

### рж╕ржВржХрзНрж╖рзЗржкрзЗ ржорзВрж▓ ржкрзЯрзЗржирзНржЯ

тЬЕ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржпржЦржи рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ, рждржЦржи ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗржЗ рж╣рзБржХ ржЖржмрж╛рж░ ржЪрж▓рзЗред
тЬЕ рж╣рзБржХрзЗрж░ ржоржзрзНржпрзЗ ржпржжрж┐ `useEffect()` ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ рждрж╛рж░ dependency (ржпрзЗржоржи `roomId`, `serverUrl`) ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ ржкрзБржирж░рж╛рзЯ ржЪрж╛рж▓рзБ рж╣рзЯред
тЬЕ рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржПржХ рж╣рзБржХрзЗрж░ ржЖржЙржЯржкрзБржЯржХрзЗ ржЖрж░рзЗржХ рж╣рзБржХрзЗрж░ ржЗржиржкрзБржЯ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛред
тЬЕ ржПржЗржнрж╛ржмрзЗржЗ ржЖржорж░рж╛ рж╣рзБржХрзЗрж░ ржорж╛ржзрзНржпржорзЗ рж░рж┐ржПрзНржпрж╛ржХржЯрж┐ржн ржнрзНржпрж╛рж▓рзБ рж╕рж╣ржЬрзЗ рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

---

ржЕрж╕рж╛ржзрж╛рж░ржг! ржПржмрж╛рж░ рж╢рзБрж░рзБ ржХрж░ржЫрж┐ ржЖржорж╛ржжрзЗрж░ ржирждрзБржи рж╕рзЗржХрж╢ржи тАФ
**рж╕рзЗржХрж╢ржи рзи.рзз: ржХрж╛рж╕рзНржЯржо рж╣рзБржХ-ржП ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржкрж╛ржарж╛ржирзЛ**
ржЖржорж░рж╛ ржЖржЧрзЗрж░ ржорждрзЛржЗ ржкрзНрж░рж╛ржЮрзНржЬрж▓, рж╕рж╣ржЬ, ржирж┐ржЬрзЗрж░ ржнрж╛рж╖рж╛рзЯ рж▓рж┐ржЦржм ржпрзЗржи ржПржЯрж╛ ржЕржирзБржмрж╛ржж ржирж╛ ржоржирзЗ рж╣рзЯред

---

# рж╕рзЗржХрж╢ржи рзи.рзз: ржХрж╛рж╕рзНржЯржо рж╣рзБржХ-ржП ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржкрж╛ржарж╛ржирзЛ

ржзрж░рзБржи ржЖржкржирж┐ ржПржоржи ржПржХржЯрж╛ рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗржЫрзЗржи ржпрзЗржЯрж╛ ржЪрзНржпрж╛ржЯ рж░рзБржорзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ ржПржмржВ ржирждрзБржи ржорзЗрж╕рзЗржЬ ржПрж▓рзЗ ржПржХржЯрж╛ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржжрзЗржЦрж╛рзЯред ржПржЦржи ржЖржкржирж┐ ржЪрж╛ржЗржЫрзЗржи, ржПржЗ рж╣рзБржХржЯрж╛ ржпрзЗржи ржЕржирзНржп ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржПржмржВ ржорзЗрж╕рзЗржЬ ржЖрж╕рж▓рзЗ ржХрзА рж╣ржмрзЗ рж╕рзЗржЯрж╛ ржпрзЗржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржирж┐ржЬрзЗ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЯрж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ рж╣рзБржХ-ржП ржПржХржЯрж╛ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржкрж╛ржарж╛рждрзЗ рж╣ржмрзЗред

## ржЪрж▓рзЛ ржкрзНрж░ржержорзЗ ржжрзЗржЦрж┐ ржЖржЧрзЗрж░ ржХрзЛржбржЯрж╛ ржХрзЗржоржи ржЫрж┐рж▓

```js {9-11}
export function useChatRoom({ serverUrl, roomId }) {
  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId,
    };
    const connection = createConnection(options);
    connection.connect();
    connection.on("message", (msg) => {
      showNotification("New message: " + msg);
    });
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
}
```

ржПржЦрж╛ржирзЗ ржорзЗрж╕рзЗржЬ ржПрж▓рзЗ ржХрзА рж╣ржмрзЗ рж╕рзЗржЯрж╛ рж╣рзБржХ-ржПрж░ ржнрж┐рждрж░рзЗ ржарж┐ржХ ржХрж░рж╛ ржЖржЫрзЗ тАФ ржПржЯрж╛ ржХрж┐ржирзНрждрзБ ржЦрзБржмржЗ ржХржарж┐ржи ржХрж░рзЗ ржжрзЗрзЯ рж╣рзБржХ-ржХрзЗ рж░рж┐ржЗржЙржЬ ржХрж░рж╛ред
ржЖржорж░рж╛ ржЪрж╛ржЗ, ржорзЗрж╕рзЗржЬ ржПрж▓рзЗ ржХрзА рж╣ржмрзЗ рж╕рзЗржЯрж╛ ржпрзЗржи **ржХржорзНржкрзЛржирзЗржирзНржЯ**-ржЗ ржмрж▓рзЗ ржжрзЗрзЯред

---

## рждрж╛рж╣рж▓рзЗ рж╣рзБржХ-ржПрж░ ржмрзНржпржмрж╣рж╛рж░рзЗ ржХрж┐ржЫрзБ ржкрж░рж┐ржмрж░рзНрждржи ржЖржирждрзЗ рж╣ржмрзЗ

```js {7-9}
export default function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  useChatRoom({
    roomId: roomId,
    serverUrl: serverUrl,
    onReceiveMessage(msg) {
      showNotification("New message: " + msg);
    },
  });
}
```

ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ `useChatRoom`-ржП ржПржХржЯрж╛ **`onReceiveMessage`** рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржкрж╛ржарж╛рж▓рж╛ржоред ржПржЦржи рж╣рзБржХржЯрж╛ ржПржЗ ржлрж╛ржВрж╢ржиржЯрж╛ ржХрж▓ ржХрж░ржмрзЗ ржпржЦржиржЗ ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЖрж╕ржмрзЗред

---

## ржПржмрж╛рж░ рж╣рзБржХржЯрж╛ ржПржХржЯрзБ ржЖржкржбрзЗржЯ ржХрж░рж┐

```js {1,10,13}
export function useChatRoom({ serverUrl, roomId, onReceiveMessage }) {
  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId,
    };
    const connection = createConnection(options);
    connection.connect();
    connection.on("message", (msg) => {
      onReceiveMessage(msg);
    });
    return () => connection.disconnect();
  }, [roomId, serverUrl, onReceiveMessage]); // рж╕ржм dependency ржарж┐ржХржарж╛ржХ
}
```

ржПржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ ржарж┐ржХржЗ, ржХрж┐ржирзНрждрзБ ржПржХржЯрж╛ рж╕ржорж╕рзНржпрж╛ ржерзЗржХрзЗ ржпрж╛ржЪрзНржЫрзЗ тАФ
`onReceiveMessage` ржпржжрж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржирждрзБржи рж╣рзЯ, рждрж╛рж╣рж▓рзЗ `useEffect` ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣ржмрзЗ, ржЖрж░ ржЪрзНржпрж╛ржЯ рж░рж┐-ржХрж╛ржирзЗржХрзНржЯ рж╣ржмрзЗред ржПржЯрж╛ ржЖржорж░рж╛ ржЪрж╛ржЗ ржирж╛ред

---

## рж╕ржорж╛ржзрж╛ржи: useEffectEvent ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐

React-ржПрж░ ржПржХржЯрж╛ experimental API ржЖржЫрзЗ тАФ **`useEffectEvent`**ред ржПржЯрж╛ ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ржХрзЗ Effect-ржПрж░ ржмрж╛ржЗрж░рзЗрж░ dependency ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рж┐ред

```js {1,4,5,15,18}
import { useEffect, useEffectEvent } from "react";

export function useChatRoom({ serverUrl, roomId, onReceiveMessage }) {
  const onMessage = useEffectEvent(onReceiveMessage);

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId,
    };
    const connection = createConnection(options);
    connection.connect();
    connection.on("message", (msg) => {
      onMessage(msg); // ржПржЦржирзЛ ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
    });
    return () => connection.disconnect();
  }, [roomId, serverUrl]); // тЬЕ onReceiveMessage ржЖрж░ dependency-рждрзЗ ржирзЗржЗ
}
```

ржПржЦржи, `ChatRoom` рж░рзЗржирзНржбрж╛рж░ ржпрждржмрж╛рж░ржЗ рж╣рзЛржХ ржирж╛ ржХрзЗржи, ржЪрзНржпрж╛ржЯ рж░рзБржо рж░рж┐-ржХрж╛ржирзЗржХрзНржЯ рж╣ржмрзЗ ржирж╛ тАФ ржХрж╛рж░ржг `onReceiveMessage` dependency-рждрзЗ ржЖрж░ ржирзЗржЗред

---

## ржПржЗ рж╕рзБржмрж┐ржзрж╛ ржХрзА?

- ржПржЦржи ржЖржкржирж┐ рж╕рж╣ржЬрзЗржЗ ржПржЗ рж╣рзБржХржЯрж╛ ржЕржирзНржп ржЬрж╛рзЯржЧрж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
- ржорзЗрж╕рзЗржЬ ржПрж▓рзЗ ржХрзА рж╣ржмрзЗ рж╕рзЗржЯрж╛ ржирж┐ржЬрзЗ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
- ржЪрзНржпрж╛ржЯ рж░рзБржо ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ рж░рж┐-ржХрж╛ржирзЗржХрзНржЯ рж╣рзЯ ржирж╛

---

## рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:

| ржмрж┐рж╖рзЯ              | ржмрзНржпрж╛ржЦрзНржпрж╛                                                |
| ----------------- | ------------------------------------------------------- |
| ржХрж╛рж╕рзНржЯржо рж╣рзБржХ        | `useChatRoom` ржпрж╛ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржирзЗрзЯ                  |
| ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ | `onReceiveMessage` тАУ ржЪрзНржпрж╛ржЯ ржорзЗрж╕рзЗржЬ ржПрж▓рзЗ ржХрзА рж╣ржмрзЗ рждрж╛ ржарж┐ржХ ржХрж░рзЗ  |
| рж╕ржорж╕рзНржпрж╛            | рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ рж╣рзБржХ ржЖржмрж╛рж░ ржЪрж▓рзЗ, ржХрж╛рж░ржг ржлрж╛ржВрж╢ржи ржирждрзБржи рж╣рзЯ            |
| рж╕ржорж╛ржзрж╛ржи            | `useEffectEvent` ржжрж┐рзЯрзЗ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржарж┐ржХ рж░рж╛ржЦрж╛ ржпрж╛рзЯ |

---

ржзржирзНржпржмрж╛ржж ржнрж╛ржЗ, ржЪрж▓рзЛ ржПржХржжржо ржЖржЧрзЗрж░ ржорждрзЛ ржХрж░рзЗ **ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржУ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ** рж╕рзЗржХрж╢ржи рзи.рзз рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж┐ред
ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп тАФ ржпрзЗржи React рж╢рзЗржЦрж╛ рж╣рзЯ ржмржирзНржзрзБрж░ ржорждрзЛ ржЖрж░рж╛ржоржжрж╛рзЯржХ ржЕржнрж┐ржЬрзНржЮрждрж╛ред

---

## рж╕рзЗржХрж╢ржи рзи.рзз: ржХржЦржи ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

React-ржП ржХрзЛржб рж▓рж┐ржЦрждрзЗ ржЧрзЗрж▓рзЗ ржЕржирзЗржХ рж╕ржорзЯ ржПржХржЗ рж░ржХржо ржХрзЛржб ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрждрзЗ рж╣рзЯред
ржкрзНрж░ржержорзЗржЗ ржоржирзЗ рж░рж╛ржЦрзЛ тАФ
**рж╕ржмржХрж┐ржЫрзБржЗ ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗ ржнрж╛ржЩрж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред**

ржПржХржЗ `useState()` ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж▓рзЗ ржХрзНрж╖рждрж┐ ржирзЗржЗред ржПрждрзЗ ржХрзЛржб ржЬржЯрж┐рж▓ рж╣рзЯ ржирж╛ред

рждржмрзЗ ржпрзЗржЗ ржорзБрж╣рзВрж░рзНрждрзЗ рждрзБржорж┐ **`useEffect()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ**, рждржЦржи ржПржХржЯрзБ ржнрж╛ржмрждрзЗ рж╣ржмрзЗред

ЁЯСЙ ржЖржорж░рж╛ `useEffect()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ ржпржЦржи React-ржПрж░ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржирзЛ ржЬрж┐ржирж┐рж╕рзЗрж░ рж╕ржЩрзНржЧрзЗ "рж╕рж┐ржЩрзНржХ" ржХрж░рждрзЗ рж╣рзЯ тАФ ржпрзЗржоржи: API ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржЖржирж╛, рж▓рзЛржХрж╛рж▓ рж╕рзНржЯрзЛрж░рзЗржЬрзЗ ржХрж┐ржЫрзБ рж░рж╛ржЦрж╛, ржЯрж╛ржЗржорж╛рж░ рж╕рзЗржЯ ржХрж░рж╛ ржЗрждрзНржпрж╛ржжрж┐ред

ржПржоржи рж╕ржорзЯ ржпржжрж┐ ржЖржорж░рж╛ `useEffect()` ржПрж░ ржХрж╛ржЬржЯрж╛ ржПржХржЯрж╛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗ рж░рзЗржЦрзЗ ржжрж┐ржЗ, рждрж╛рж╣рж▓рзЗ ржкрзБрж░рзЛ рж▓ржЬрж┐ржХржЯрж╛ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж╣рзЯрзЗ ржпрж╛рзЯред

---

### ржПржХржЯрж╛ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐

ржзрж░рзЛ рждрзБржорж┐ ржПржХржЯрж╛ `ShippingForm` ржмрж╛ржирж╛ржЪрзНржЫрзЛред
ржПржЗ ржлрж░рзНржорзЗ ржжрзБржЗржЯрж╛ ржбрзНрж░ржкржбрж╛ржЙржи ржерж╛ржХржмрзЗ:

- ржкрзНрж░ржержоржЯрж╛ тАФ рж╢рж╣рж░рзЗрж░ ржирж╛ржо (ржпрзЗржЯрж╛ ржирж┐рж░рзНржнрж░ ржХрж░ржмрзЗ ржжрзЗрж╢рзЗрж░ ржУржкрж░)
- ржжрзНржмрж┐рждрзАрзЯржЯрж╛ тАФ ржПрж▓рж╛ржХрж╛рж░ ржирж╛ржо (ржпрзЗржЯрж╛ ржирж┐рж░рзНржнрж░ ржХрж░ржмрзЗ рж╢рж╣рж░рзЗрж░ ржУржкрж░)

ржкрзНрж░ржержорзЗ рждрзБржорж┐ ржХрзЛржб рж▓рзЗржЦрж▓рзЗ ржПржоржиржнрж╛ржмрзЗ:

```jsx
function ShippingForm({ country }) {
  const [cities, setCities] = useState(null);

  useEffect(() => {
    let ignore = false;
    fetch(`/api/cities?country=${country}`)
      .then((res) => res.json())
      .then((json) => {
        if (!ignore) {
          setCities(json);
        }
      });
    return () => {
      ignore = true;
    };
  }, [country]);

  const [city, setCity] = useState(null);
  const [areas, setAreas] = useState(null);

  useEffect(() => {
    if (city) {
      let ignore = false;
      fetch(`/api/areas?city=${city}`)
        .then((res) => res.json())
        .then((json) => {
          if (!ignore) {
            setAreas(json);
          }
        });
      return () => {
        ignore = true;
      };
    }
  }, [city]);

  // ...
}
```

ржПржЦрж╛ржирзЗ рждрзБржорж┐ рж▓ржХрзНрж╖рзНржп ржХрж░рж▓рзЗ ржжрзЗржЦржмрзЗ, **ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯ ржПржХржЗ ржзрж░ржгрзЗрж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ** тАФ API ржХрж▓ ржХрж░рзЗ ржбрзЗржЯрж╛ ржЖржирж╛ ржЖрж░ рж╕рзЗржЯ ржХрж░рж╛ред

ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ `useEffect()` ржарж┐ржХржЗ ржЖржЫрзЗ, ржХрж╛рж░ржг рждрж╛рж░рж╛ ржЖрж▓рж╛ржжрж╛ ржХрж╛ржЬ ржХрж░ржЫрзЗред
рждржмрзЗ рждрж╛ржжрзЗрж░ ржнрзЗрждрж░рзЗрж░ рж▓ржЬрж┐ржХ ржкрзНрж░рж╛рзЯ ржПржХрж░ржХржоред ржПржЯрж╛ржЗ ржЖржорж░рж╛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗ рждрзБрж▓рзЗ ржЖржирждрзЗ ржкрж╛рж░рж┐ред

---

### ржПржмрж╛рж░ ржжрзЗржЦрж┐ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржжрж┐рзЯрзЗ ржХрзАржнрж╛ржмрзЗ ржХрзЛржбржЯрж╛ рж╕рж╣ржЬ рж╣рзЯ:

```jsx
function useData(url) {
  const [data, setData] = useState(null);

  useEffect(() => {
    if (url) {
      let ignore = false;
      fetch(url)
        .then((res) => res.json())
        .then((json) => {
          if (!ignore) {
            setData(json);
          }
        });
      return () => {
        ignore = true;
      };
    }
  }, [url]);

  return data;
}
```

ржПржмрж╛рж░ ржорзВрж▓ ржлрж░рзНржорзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ:

```jsx
function ShippingForm({ country }) {
  const cities = useData(`/api/cities?country=${country}`);
  const [city, setCity] = useState(null);
  const areas = useData(city ? `/api/areas?city=${city}` : null);
  // ...
}
```

---

### ржХрзА рж▓рж╛ржн рж╣рж▓рзЛ?

- ржХрзЛржб ржЫрзЛржЯ рж╣рж▓рзЛ тЬЕ
- ржмрзЛржЭрж╛ рж╕рж╣ржЬ рж╣рж▓рзЛ тЬЕ
- ржбрзЗржЯрж╛ ржХрзЛржерж╛ ржерзЗржХрзЗ ржЖрж╕рзЗ, ржХрзЛржерж╛рзЯ ржпрж╛рзЯ тАФ рж╕рзЗржЯрж╛ ржПржХржжржо рж╕рзНржкрж╖рзНржЯ тЬЕ
- ржнржмрж┐рж╖рзНржпрждрзЗ ржХрзЗржЙ ржПрж╕рзЗ ShippingForm-ржПрж░ ржнрж┐рждрж░ ржШрж╛ржЯрж╛ржШрж╛ржЯрж┐ ржХрж░рж▓рзЗржУ, ржнрзБрж▓ ржХрж░рзЗ `useEffect()`-ржП ржмрж╛рзЬрждрж┐ dependency ржпрзЛржЧ ржХрж░ржмрзЗ ржирж╛ тЬЕ

рж╕ржорзЯ ржЧрзЗрж▓рзЗ ржЧрзЗрж▓рзЗ рждрзБржорж┐ ржжрзЗржЦржмрзЗ, рждрзЛржорж╛рж░ ржкрзНрж░рж╛рзЯ рж╕ржм `useEffect()`-ржЗ **ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗрж░ ржнрзЗрждрж░рзЗ** ржЪрж▓рзЗ ржЧрзЗржЫрзЗред

---

ржЪрж▓рзБржи ржнрж╛ржЗ, ржЖржорж░рж╛ рж╕рзЗржХрж╢ржи рзи.рзй рж╢рзБрж░рзБ ржХрж░рж┐ ржПржХржжржо ржЖржЧрзЗрж░ ржзрж╛ржБржЪрзЗтАФ**рж╕рж╣ржЬ, ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржУ ржмрж╛рж╕рзНрждржмржорзБржЦрзА ржмрж╛ржВрж▓рж╛рзЯ**ред ржпрзЗржи React рж╢рзЗржЦрж╛ рж╣рзЯ ржирж┐ржЬрзЗрж░ ржнрж╛рж╖рж╛рзЯ, ржирж┐ржЬрзЗрж░ ржорждрзЛ ржХрж░рзЗред

---

## рж╕рзЗржХрж╢ржи рзи.рзй: ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж╛ржи ржХрж╛ржЬрзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ, ржЬрзАржмржирзЗрж░ ржорждрзЛ рж╕рзНржкрж╖рзНржЯ ржХрж░рзЗ

ЁЯУМ _\[keep-your-custom-hooks-focused-on-concrete-high-level-use-cases]_

React ржП ржЖржорж░рж╛ ржЕржирзЗржХ рж╕ржорзЯ ржПржоржи рж╣рзБржХ ржмрж╛ржирж╛ржЗ ржпрж╛ рж╢рзБржзрзБ ржЖржорж╛ржжрзЗрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ тАФ ржпрзЗржоржи ржбрж╛ржЯрж╛ ржЖржирж╛, рж╕рзНржХрзНрж░рж▓ ржжрзЗржЦрж╛, ржХрж┐ржВржмрж╛ ржЪрзНржпрж╛ржЯ рж░рзБржорзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛ред
ржПржЗрж░ржХржо рж╣рзБржХржХрзЗ ржмрж▓рзЗ **ржХрж╛рж╕рзНржЯржо рж╣рзБржХ**ред

ржХрж┐ржирзНрждрзБ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж╛рждрзЗ ржЧрж┐рзЯрзЗ ржЕржирзЗржХрзЗржЗ ржПржХржЯрж╛ ржнрзБрж▓ ржХрж░рзЗржи тАФ рж╣рзБржХ ржмрж╛ржирж╛рзЯ ржЦрзБржм **ржЕрзНржпрж╛ржмрж╕рзНржЯрзНрж░рж╛ржХрзНржЯ** ржмрж╛ ржЕрж╕рзНржкрж╖рзНржЯ ржХрж╛ржЬрзЗрж░ ржЬржирзНржпред ржПрждрзЗ ржХрзЛржб ржпрзЗржоржи ржмрзБржЭрждрзЗ ржХрж╖рзНржЯ рж╣рзЯ, рждрзЗржоржирж┐ bug-ржУ рж╣рзЯ ржмрзЗрж╢рж┐ред

---

ржЕрж╕рж╛ржзрж╛рж░ржг, ржПржЦржи ржЖржорж░рж╛ рж╢рзБрж░рзБ ржХрж░ржЫрж┐ тАФ

## рж╕рзЗржХрж╢ржи рзи.рзй: **Custom Hook рждрзИрж░рж┐ ржХрж░рзБржи ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржУ ржмрж╛рж╕рзНрждржм ржХрж╛ржЬрзЗрж░ ржЬржирзНржп**

_(ржкрзНрж░рж╛ржЮрзНржЬрж▓, ржХрзНрж▓рж┐рзЯрж╛рж░, ржЖрж░рж╛ржоржжрж╛рзЯржХ ржмрж╛ржВрж▓рж╛рзЯ)_

---

React-ржП ржЖржорж░рж╛ ржЕржирзЗржХ рж╕ржорзЯ ржХрж┐ржЫрзБ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржХрж░рж┐тАФ ржпрзЗржоржи: рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛, рж▓ржЧ ржкрж╛ржарж╛ржирзЛ, ржмрж╛ рж╕рзНржХрзНрж░рж┐ржи рж╕рж╛ржЗржЬ ржжрзЗржЦрж╛ред

ржПржЗрж╕ржм ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржирж╛ рж▓рж┐ржЦрзЗ ржПржХржмрж╛рж░рзЗржЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ рж▓рж┐ржЦрзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ ржЖржорж░рж╛ Custom Hook ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред
ржХрж┐ржирзНрждрзБ рж╢рзБржзрзБ Hook ржмрж╛ржирж╛рж▓рзЗржЗ рж╣ржмрзЗ ржирж╛тАФ **рж╕рзЗржЗ Hook-ржПрж░ ржЙржжрзНржжрзЗрж╢рзНржп, ржирж╛ржоржХрж░ржг, ржЖрж░ ржмрзНржпржмрж╣рж╛рж░ ржпрзЗржи рж╕рзНржкрж╖рзНржЯ рж╣рзЯ**, рж╕рзЗржЯрж╛ржУ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣рзЯред

---

### ЁЯОп ржкрзНрж░ржержо ржХрж╛ржЬ: ржирж╛ржо ржарж┐ржХ ржХрж░рзБржи

Custom Hook ржмрж╛ржирж╛рждрзЗ ржЧрзЗрж▓рзЗ ржЖржЧрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржи, **ржПржЗ Hook ржЯрж╛ ржЖрж╕рж▓рзЗ ржХрзА ржХрж╛ржЬ ржХрж░ржЫрзЗ?**

ржпржжрж┐ ржХрж╛ржЬржЯрж╛ ржорж╛ржерж╛рзЯ рж╕рзНржкрж╖рзНржЯ ржирж╛ рж╣рзЯ, ржмрж╛ ржпржжрж┐ ржПржХржЯрж╛ ржнрж╛рж▓рзЛ ржирж╛ржо ржорж╛ржерж╛рзЯ ржирж╛ ржЖрж╕рзЗтАФ рждрж╛рж╣рж▓рзЗ ржмрзБржЭржмрзЗржи, ржПржЗ ржХрзЛржбржЯрж╛ ржПржЦржирзЛ ржЕржирзНржпржжрзЗрж░ ржерзЗржХрзЗ ржЦрзБржм ржмрзЗрж╢рж┐ ржЬржЯрж┐рж▓ржнрж╛ржмрзЗ ржЬрзЬрж╛ржирзЛред ржорж╛ржирзЗ ржПржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛рж░ ржорждрзЛ ржкрж░рж┐ржкржХрзНржм рж╣рзЯржирж┐ред

ржПржХржЯрж╛ ржнрж╛рж▓рзЛ Hook-ржПрж░ ржирж╛ржо рж╢рзБржирзЗржЗ ржпрзЗржи ржмрзЛржЭрж╛ ржпрж╛рзЯ, ржПржЯрж╛ ржХрзА ржХрж░рзЗ, ржХрзА ржЗржиржкрзБржЯ ржирзЗрзЯ, ржЖрж░ ржХрзА рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред

тЬЕ ржнрж╛рж▓рзЛ ржирж╛ржорзЗрж░ ржХрж┐ржЫрзБ ржЙржжрж╛рж╣рж░ржг:

```js
useData(url);
useImpressionLog(eventName, extraData);
useChatRoom(options);
```

ржПржЧрзБрж▓рзЛрж░ ржирж╛ржо ржжрзЗржЦрж▓рзЗржЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ, ржПржЧрзБрж▓рзЛ ржХрзА ржХрж╛ржЬ ржХрж░ржЫрзЗред ржПржоржиржХрж┐ ржпрж┐ржирж┐ ржХрзЛржбрж╛рж░ ржиржи, рждрж┐ржирж┐ржУ ржПржХржЯрж╛ ржЖржирзНржжрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

---

### ЁЯЫая╕П ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржирж╛ржо ржПржХржЯрзБ ржЖрж▓рж╛ржжрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ

ржпржжрж┐ ржЖржкржирж┐ ржПржоржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржЩрзНржЧрзЗ ржХрж╛ржЬ ржХрж░рзЗржи ржпрзЗржЯрж╛ ржПржХржЯрзБ ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ (ржпрзЗржоржи: socket, media query ржЗрждрзНржпрж╛ржжрж┐), рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржмрж┐рж╖рзЯрзЗ ржЕржнрж┐ржЬрзНржЮ ржХрзЗржЙ ржпрзЗржи рж╕рж╣ржЬрзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗтАФржПржоржи ржирж╛ржо ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред

тЬЕ ржпрзЗржоржи:

```js
useMediaQuery(query);
useSocket(url);
useIntersectionObserver(ref, options);
```

ржПржЗ ржирж╛ржоржЧрзБрж▓рзЛ рж╕рзНржкрж╖рзНржЯ, ржПржмржВ ржпрзЗ ржПржЧрзБрж▓рзЛ ржмрзЛржЭрзЗ, рж╕рзЗ ржмрзБржЭржмрзЗ ржПржЧрзБрж▓рзЛрж░ ржХрзА ржХрж╛ржЬред

---

## тЭМ ржЦрж╛рж░рж╛ржк ржЕржнрзНржпрж╛рж╕: тАЬрж▓рж╛ржЗржлрж╕рж╛ржЗржХрзЗрж▓тАЭ рж╣рзБржХ ржмрж╛ржирж╛ржирзЛ

ржЕржирзЗржХрзЗржЗ ржЪрж╛рзЯ `useEffect` ржХрзЗ рж╢рж░рзНржЯржХрж╛рж░рзНржЯрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗред ржпрзЗржоржи:

```js
useMount(fn);
useEffectOnce(fn);
useUpdateEffect(fn);
```

ржПржЗ ржзрж░ржирзЗрж░ рж╣рзБржХ ржмрж╛ржирж╛ржирзЛ ржнрж╛рж▓рзЛ ржЕржнрзНржпрж╛рж╕ ржирж╛ред ржХрж╛рж░ржг ржПрждрзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржнрзЗрждрж░рзЗ ржнрзЗрждрж░рзЗ ржЬржЯ ржкрж╛ржХрж╛рждрзЗ рж╢рзБрж░рзБ ржХрж░рзЗред

ржЪрж▓рзБржи, ржжрзЗржЦрж┐ `useMount` ржирж╛ржорзЗ ржПржХржЯрж╛ рж╣рзБржХ ржХрзАржнрж╛ржмрзЗ React-ржПрж░ ржорзВрж▓ ржирж┐рзЯржо ржнрж╛ржЩрзЗ:

```js
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  // ЁЯФ┤ рж╕ржорж╕рзНржпрж╛: useMount ржЗржЙржЬ ржХрж░рж▓рзЗ React ржарж┐ржХржнрж╛ржмрзЗ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛
  useMount(() => {
    const connection = createConnection({ roomId, serverUrl });
    connection.connect();
    post("/analytics/event", { eventName: "visit_chat" });
  });
}

// ЁЯФ┤ рж╕ржорж╕рзНржпрж╛: ржПржЯрж╛ рж╢рзБржзрзБ ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛рзЯ, ржХрж┐ржирзНрждрзБ roomId ржмрж╛ serverUrl ржмржжрж▓рж╛рж▓рзЗ ржЪрж╛рж▓рж╛рзЯ ржирж╛!
function useMount(fn) {
  useEffect(() => {
    fn();
  }, []);
}
```

ржПржЗ `useMount` рж╣рзБржХ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржарж┐ржХржЗ, ржХрж┐ржирзНрждрзБ ржПрж░ ржнрзЗрждрж░рзЗ ржпржжрж┐ `roomId` ржмрж╛ `serverUrl` ржмржжрж▓рзЗ ржпрж╛рзЯтАФ рж╕рзЗржЯрж╛ ржмрзБржЭрзЗ рж░рж┐ржЕрзНржпрж╛ржХрзНржЯ ржХрж░ржмрзЗ ржирж╛ред **React ржПрж░ рж▓рж┐ржирзНржЯрж╛рж░ржУ ржХрж┐ржЫрзБ ржмрж▓ржмрзЗ ржирж╛**, ржХрж╛рж░ржг ржПржЯрж╛ рж╕рж░рж╛рж╕рж░рж┐ `useEffect` ржирж╛ред

---

## тЬЕ ржарж┐ржХржнрж╛ржмрзЗ ржХрж░рж╛ рж╣рж▓рзЗ ржХрзЗржоржи рж╣рзЯ?

React ржПрж░ ржирж┐ржЬрж╕рзНржм API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи, ржкрж░рж┐рж╖рзНржХрж╛рж░ржнрж╛ржмрзЗред Example:

```js
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  // тЬЕ ржЪрзНржпрж╛ржЯ рж░рзБржорзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛
  useEffect(() => {
    const connection = createConnection({ roomId, serverUrl });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);

  // тЬЕ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕рзЗ рж▓ржЧ ржкрж╛ржарж╛ржирзЛ
  useEffect(() => {
    post("/analytics/event", { eventName: "visit_chat", roomId });
  }, [roomId]);
}
```

ржПржЦрж╛ржирзЗ ржжрзБржЗржЯрж╛ ржХрж╛ржЬ ржжрзБржЗржЯрж╛ `useEffect`-ржП ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗтАФ ржпрж╛рж░ ржпрж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╕рзНржкрж╖рзНржЯред

---

### ржПрж░ржкрж░ ржЪрж╛ржЗрж▓рзЗ Custom Hook ржП ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржирж┐рждрзЗ ржкрж╛рж░рзЗржи:

```js
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState("https://localhost:1234");

  // тЬЕ ржЖрж▓рж╛ржжрж╛ рж╣рзБржХ, ржпрж╛рж░ ржирж╛ржорзЗржЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ ржХрж╛ржЬржЯрж╛ ржХрзА
  useChatRoom({ serverUrl, roomId });
  useImpressionLog("visit_chat", { roomId });
}
```

ржПржЗржнрж╛ржмрзЗ ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ ржорзВрж▓ ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржерж╛ржХрзЗ, ржЖрж░ ржкрзНрж░рждрж┐ржЯрж╛ ржХрж╛ржЬ ржЖрж▓рж╛ржжрж╛ Hook ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ рж╣рзЯред

---

## ЁЯУМ рж╢рзЗрж╖ ржХржерж╛

ржПржХржЯрж╛ ржнрж╛рж▓рзЛ Custom HookтАФ
тЬЕ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж╛ ржХрж╛ржЬржЗ ржХрж░рзЗ
тЬЕ ржЦрзБржм ржмрзЗрж╢рж┐ ржЕрзНржпрж╛ржмрж╕рзНржЯрзНрж░рж╛ржХрзНржЯ ржирж╛
тЬЕ ржирж╛ржо ржерзЗржХрзЗржЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ ржХрзА ржХрж╛ржЬ ржХрж░рзЗ
тЬЕ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж▓рж╛ржирзЛ рж╣рж▓рзЗ рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржкрж░рж┐ржЪрж┐рждржжрзЗрж░ ржЬржирзНржп ржмрзЛржзржЧржорзНржп рж╣рзЯ

> ржЖржкржирж╛рж░ рж╣рзБржХ ржпржжрж┐ тАЬрж╕ржмржХрж┐ржЫрзБрждрзЗржЗ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржптАЭ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ рж╣рзЯрждрзЛ **ржХрзЛржирзЛ ржХрж┐ржЫрзБрж░ ржЬржирзНржпржЗ ржЙржкржпрзБржХрзНржд ржирж╛**ред

---

ржЕрж╕рж╛ржзрж╛рж░ржг! ржПржмрж╛рж░ ржЖржорж░рж╛ Section 2.4 рж▓рж┐ржЦржЫрж┐ тАФ
**"Custom Hooks help you migrate to better patterns"** тАФ ржмрж╛ржВрж▓рж╛рзЯ ржкрзНрж░рж╛ржЮрзНржЬрж▓ржнрж╛ржмрзЗ, ржпрзЗржи ржЕржирзБржмрж╛ржж ржирж╛ рж▓рж╛ржЧрзЗ, ржпрзЗржи ржмржирзНржзрзБрж░ ржорзБржЦрзЗ рж╢рзЛржирж╛ ржХрзЛржирзЛ рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛ред

---

## рж╕рзЗржХрж╢ржи рзи.рзк: ржХрж╛рж╕рзНржЯржо рж╣рзБржХрж╕ ржХрзЗржи ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ, ржЖрж░ ржХрзАржнрж╛ржмрзЗ ржнрж╛рж▓рзЛ ржкрзНржпрж╛ржЯрж╛рж░рзНржирзЗ ржпрзЗрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ

React-ржП ржЗржлрзЗржХрзНржЯ рж╣рж▓рзЛ ржПржХржЯрж╛ **ржмрж╛ржЗрж░рзЗ ржпрж╛ржУрзЯрж╛рж░ ржжрж░ржЬрж╛** тАФ ржорж╛ржирзЗ, ржЖржкржирж┐ ржпржЦржи ржжрзЗржЦрзЗржи, React-ржПрж░ ржнрж┐рждрж░рзЗрж░ ржирж┐рзЯржорзЗ ржЖржкржирж╛рж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ ржирж╛, рждржЦржи ржЖржкржирж┐ `useEffect()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржиред

тЭЧ ржХрж┐ржирзНрждрзБ, React ржЯрж┐ржо ржЪрж╛рзЯ ржЖржкржирж┐ ржпрждржЯрж╛ рж╕ржорзНржнржм ржХржо ржЗржлрзЗржХрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржХрж╛рж░ржг ржЗржлрзЗржХрзНржЯ ржЬрж┐ржирж┐рж╕ржЯрж╛ ржПржХржЯрзБ ржХржо ржирж┐рзЯржирзНрждрзНрж░рж┐ржд тАФ ржПрждрзЗ ржЕржирзЗржХ ржнрзБрж▓ рж╣ржУрзЯрж╛рж░ ржЭрзБржБржХрж┐ ржерж╛ржХрзЗред

рждрж╛ржЗ React ржЯрж┐ржо ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржПржоржи рж╕ржм ржлрж┐ржЪрж╛рж░ ржпрзЛржЧ ржХрж░ржЫрзЗ, ржпрж╛рждрзЗ ржЗржлрзЗржХрзНржЯ ржЫрж╛рзЬрж╛ ржЖржкржирж╛рж░ ржХрж╛ржЬ рж╣рзЯрзЗ ржпрж╛рзЯред

ржПржЦржи ржХржерж╛ рж╣рж▓рзЛ тАФ ржЖржЬржХрзЗ ржпрзЗржЯрж╛ ржЖржкржирж┐ `useEffect` ржжрж┐рзЯрзЗ ржХрж░ржЫрзЗржи,
ржнржмрж┐рж╖рзНржпрждрзЗ ржпржжрж┐ рж╕рзЗржЗ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп React ржЖрж▓рж╛ржжрж╛ ржХрзЛржирзЛ ржнрж╛рж▓рзЛ рж╕рж╛ржкрзЛрж░рзНржЯ ржжрзЗрзЯ,
рждржЦржи ржЖржкржирж╛ржХрзЗ ржпржжрж┐ рззрзжржЯрж╛ ржЬрж╛рзЯржЧрж╛рзЯ ржЧрж┐рзЯрзЗ ржХрзЛржб ржмржжрж▓рж╛рждрзЗ рж╣рзЯ тАФ ржХрзЗржоржи рж▓рж╛ржЧржмрзЗ?

**ржПржЗ ржЭрж╛ржорзЗрж▓рж╛ ржПрзЬрж╛рждрзЗржЗ ржХрж╛рж╕рзНржЯржо рж╣рзБржХрж╕ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗред**

---

### ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржорж╛ржирзЗ?

ржЖржорж░рж╛ ржЗржлрзЗржХрзНржЯ ржмрж╛ ржЕржирзНржп ржЬржЯрж┐рж▓ рж▓ржЬрж┐ржХржХрзЗ ржПржХржЯрж╛ ржлрж╛ржВрж╢ржирзЗрж░ ржнрж┐рждрж░ ржврзБржХрж┐рзЯрзЗ ржлрзЗрж▓рж┐, ржпрж╛рж░ ржирж╛ржо рж╢рзБрж░рзБ рж╣рзЯ `use` ржжрж┐рзЯрзЗред

ржпрзЗржоржи тАФ ржЖржорж░рж╛ ржПржХржЯрж╛ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж╛рж▓рж╛ржо `useOnlineStatus()` ржирж╛ржорзЗред ржПржЗ рж╣рзБржХ ржмрж▓ржмрзЗ ржЗржЙржЬрж╛рж░ ржПржЦржи ржЕржирж▓рж╛ржЗржирзЗ ржЖржЫрзЗ ржХрж┐ ржирж╛ред

ржЪрж▓рзБржи ржжрзЗржЦрж┐ ржХрзАржнрж╛ржмрзЗ:

---

### ржзрж╛ржк рзз: ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржжрж┐рзЯрзЗ ржмрзНржпржмрж╣рж╛рж░

```jsx
import { useOnlineStatus } from "./useOnlineStatus.js";

function StatusBar() {
  const isOnline = useOnlineStatus();
  return <h1>{isOnline ? "тЬЕ ржЕржирж▓рж╛ржЗржирзЗ" : "тЭМ ржХрж╛ржирзЗржХрж╢ржи ржирзЗржЗ"}</h1>;
}

function SaveButton() {
  const isOnline = useOnlineStatus();

  function handleSaveClick() {
    console.log("тЬЕ ржкрзНрж░ржЧрзНрж░рзЗрж╕ рж╕рзЗржн рж╣рзЯрзЗржЫрзЗ");
  }

  return (
    <button disabled={!isOnline} onClick={handleSaveClick}>
      {isOnline ? "рж╕рзЗржн ржХрж░рзБржи" : "рж░рж┐ржЗржХрж╛ржирзЗржХрзНржЯ рж╣ржЪрзНржЫрзЗ..."}
    </button>
  );
}
```

ржЙржкрж░рзЗ ржЖржорж░рж╛ рж╢рзБржзрзБ `useOnlineStatus()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐, ржХрж┐ржирзНрждрзБ ржПрж░ ржнрж┐рждрж░рзЗ ржХрзА ржЖржЫрзЗ рж╕рзЗржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржЬрж╛ржирж╛рж░ ржжрж░ржХрж╛рж░ рж╣рзЯржирж┐ред
ржПржЗ ржЬрж┐ржирж┐рж╕ржЯрж╛ржЗ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЬржирзНржп ржЦрзБржм ржЙржкржХрж╛рж░рзАред

---

### ржзрж╛ржк рзи: ржХрж╛рж╕рзНржЯржо рж╣рзБржХрзЗрж░ ржнрж┐рждрж░рзЗ ржЖржЧрзЗрж░ ржЗржлрзЗржХрзНржЯ ржХрзЛржб

```js
import { useState, useEffect } from "react";

export function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(true);

  useEffect(() => {
    function handleOnline() {
      setIsOnline(true);
    }
    function handleOffline() {
      setIsOnline(false);
    }

    window.addEventListener("online", handleOnline);
    window.addEventListener("offline", handleOffline);

    return () => {
      window.removeEventListener("online", handleOnline);
      window.removeEventListener("offline", handleOffline);
    };
  }, []);

  return isOnline;
}
```

ржПржЗ рж╣рзБржХ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржарж┐ржХржарж╛ржХ тАФ ржХрж┐ржирзНрждрзБ ржПржЯрж╛ ржирж┐ржЦрзБржБржд ржирж╛ред
ржпрзЗржоржи тАФ ржЖржорж░рж╛ ржзрж░рзЗржЗ ржирж┐ржЪрзНржЫрж┐ ржЗржЙржЬрж╛рж░ рж╢рзБрж░рзБрждрзЗржЗ ржЕржирж▓рж╛ржЗржирзЗ ржЖржЫрзЗ, ржХрж┐ржирзНрждрзБ рж╣рзЯрждрзЛ ржЕржлрж▓рж╛ржЗржирзЗ ржЫрж┐рж▓ред

ржнржмрж┐рж╖рзНржпрждрзЗ ржпржжрж┐ ржПрж░ ржЖрж░ ржнрж╛рж▓рзЛ рж╕ржорж╛ржзрж╛ржи ржЖрж╕рзЗ тАФ ржЖржорж░рж╛ рж╢рзБржзрзБ рж╣рзБржХржЯрж╛рж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб ржЖржкржбрзЗржЯ ржХрж░ржм, ржХрж┐ржирзНрждрзБ ржпрзЗрж╕ржм ржХржорзНржкрзЛржирзЗржирзНржЯ рж╣рзБржХржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐рж▓, рж╕рзЗржЧрзБрж▓рзЛ ржПржХржжржоржЗ ржЕржкрж░рж┐ржмрж░рзНрждрж┐ржд ржерж╛ржХржмрзЗред ржПржЯрж╛ ржЕржирзЗржХ ржмрзЬ рж╕рзБржмрж┐ржзрж╛ред

---

### ржзрж╛ржк рзй: React ржПрж░ ржирждрзБржи рж╣рзЗрж▓рзНржкрж╛рж░ API ржжрж┐рзЯрзЗ ржХрж░рж╛ (ржЖрж░рзЛ ржнрж╛рж▓рзЛ рж╕ржорж╛ржзрж╛ржи)

React 18 ржерзЗржХрзЗ ржПржХржЯрж╛ ржирждрзБржи рж╣рзБржХ ржПрж╕рзЗржЫрзЗ тАФ `useSyncExternalStore`
ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржЙржкрж░рзЗрж░ рж╕ржм рж╕ржорж╕рзНржпрж╛рж░ рж╕рзБржирзНржжрж░ рж╕ржорж╛ржзрж╛ржи ржжрзЗрзЯред

```js
import { useSyncExternalStore } from "react";

function subscribe(callback) {
  window.addEventListener("online", callback);
  window.addEventListener("offline", callback);
  return () => {
    window.removeEventListener("online", callback);
    window.removeEventListener("offline", callback);
  };
}

export function useOnlineStatus() {
  return useSyncExternalStore(
    subscribe,
    () => navigator.onLine, // ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗ рж╕рзНржЯрзЗржЯ ржкрзЬрж╛
    () => true // рж╕рж╛рж░рзНржнрж╛рж░рзЗ fallback ржорж╛ржи (ржзрж░рзЗ ржирзЗржЗ always online)
  );
}
```

---

### рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ ржХрзА рж╢рж┐ржЦрж▓рж╛ржо?

тЬЕ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ рждрзИрж░рж┐ ржХрж░рж▓рзЗ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржХрж┐ржЫрзБржЗ ржмржжрж▓рж╛рждрзЗ рж╣рзЯ ржирж╛
тЬЕ рж╣рзБржХрзЗрж░ ржнрж┐рждрж░ ржЪрж╛ржЗрж▓рзЗ ржЖржЧрзЗрж░ `useEffect` рж░рж╛ржЦрзБржи, ржЪрж╛ржЗрж▓рзЗ ржирждрзБржи API
тЬЕ ржнржмрж┐рж╖рзНржпрждрзЗ React ржпржжрж┐ ржнрж╛рж▓рзЛ рж╕ржорж╛ржзрж╛ржи ржжрзЗрзЯ тАФ рж╢рзБржзрзБ рж╣рзБржХ ржЖржкржбрзЗржЯ ржХрж░рж▓рзЗржЗ ржЪрж▓ржмрзЗ

---

## ржПржХржЯрзБ ржнрж╛ржмрзБржи

ржЖржкржирж┐ ржпржжрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржоржзрзНржпрзЗ ржмрж╛рж░ржмрж╛рж░ `useEffect` рж▓рж┐ржЦрзЗ ржпрж╛ржи, рждрж╛рж╣рж▓рзЗ рж╕ржм ржЬрж╛рзЯржЧрж╛рзЯ ржЧрж┐рзЯрзЗ ржХрзЛржб ржарж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗред

ржЖрж░ ржЖржкржирж┐ ржпржжрж┐ рж╕рж╛ржзрж╛рж░ржг ржХрж╛ржЬржЧрзБрж▓рзЛ `useSomething` рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржХрж╛ржЬ ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржерж╛ржХрж▓ тАФ
ржпрзЗржЯрж╛ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЬржирзНржп ржЕржирзЗржХ рж╕рзБржмрж┐ржзрж╛ржЬржиржХред

**ржарж┐ржХ ржпрзЗржоржи ржбрж┐ржЬрж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржоржзрзНржпрзЗ ржмрж╛ржЯржирзЗрж░ рж░ржВ ржарж┐ржХ ржХрж░рж╛ ржерж╛ржХрзЗ, рждрзЗржоржиржнрж╛ржмрзЗржЗ ржЖржкржирж╛рж░ рж╣рзБржХржЧрзБрж▓рзЛ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржорж╛ржерж╛ рж╣рзЯрзЗ ржжрж╛ржБрзЬрж╛рзЯред**

---

## ржПржХ ржЭрж▓ржХрзЗ ржЙржкржХрж╛рж░рж┐рждрж╛

1. ржХржорзНржкрзЛржирзЗржирзНржЯ ржерж╛ржХрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░, рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ
2. ржЗржлрзЗржХрзНржЯ рж▓ржЬрж┐ржХ ржерж╛ржХрзЗ ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ
3. ржнржмрж┐рж╖рзНржпрждрзЗ ржЖржкржбрзЗржЯ ржжрж┐рждрзЗ рж╣рж▓рзЗ ржХрзЗржмрж▓ рж╣рзБржХржЯрж╛ ржмржжрж▓рж╛рж▓рзЗржЗ рж╣рзЯ
4. ржЖржкржирж┐ ржирж┐ржЬрзЗржЗ ржПржХржЯрж╛ ржЫрзЛржЯ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрж╛ржирж┐рзЯрзЗ ржлрзЗрж▓рж▓рзЗржи ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржЬржирзНржп

---

ржЪрж▓, ржЖржорж░рж╛ рж╕рзЗржХрж╢ржи рзи.рзл: **There is more than one way to do it** тАФ ржмрж╛ржВрж▓рж╛рзЯ рж╕рж╣ржЬ, ржкрзНрж░рж╛ржЮрзНржЬрж▓ ржПржмржВ ржмрзНржпрж╛ржЦрзНржпрж╛рж╕ржорзГржжрзНржзржнрж╛ржмрзЗ рж╢рзБрж░рзБ ржХрж░рж┐ред ржпрзЗрж╣рзЗрждрзБ ржПржЯрж╛ рж╢рзЗрж╖ ржПржмржВ рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржмрзЬ рж╕рзЗржХрж╢ржи, рждрж╛ржЗ ржЖржорж┐ ржПржХрзЗ рждрж┐ржиржЯрж┐ ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рзЗ рж▓рж┐ржЦржмрзЛ:

---

## рж╕рзЗржХрж╢ржи рзи.рзл (рззржо ржнрж╛ржЧ): ржПржХрзЗрж░ ржЕржзрж┐ржХ ржЙржкрж╛рзЯ ржерж╛ржХрзЗ рж╕ржм ржХрж╛ржЬрзЗрж░

ржЕржирзЗржХ рж╕ржорзЯ рждрзБржорж┐ ржпржЦржи ржХрж┐ржЫрзБ ржмрж╛ржирж╛рждрзЗ ржмрж╕рзЛ, рж╕рзЗржЯрж╛ ржмрж╛ржирж╛ржирзЛрж░ ржЙржкрж╛рзЯ ржПржХржЯрж╛ржЗ ржирж╛ тАФ ржмрж░ржВ ржПржХрж╛ржзрж┐ржХ ржкржерзЗржЗ рж╕рзЗржЯрж╛ рж╕ржорзНржнржмред ржпрзЗржоржи ржзрж░рзЛ, рждрзБржорж┐ ржЪрж╛ржУ ржХрзЛржирзЛ ржЯрзЗржХрзНрж╕ржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржлрзЗржб-ржЗржи рж╣рзЛржХ тАФ ржорж╛ржирзЗ рж╢рзБрж░рзБрждрзЗ ржЕржкрж╛рж╕рж┐ржЯрж┐ ржерж╛ржХржмрзЗ рзж (ржЕржжрзГрж╢рзНржп), рждрж╛рж░ржкрж░ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржмрж╛рзЬрждрзЗ ржмрж╛рзЬрждрзЗ рзз (рж╕ржорзНржкрзВрж░рзНржг ржжрзГрж╢рзНржпржорж╛ржи) рж╣ржмрзЗред

ржПржЗ ржХрж╛ржЬржЯрж╛ рждрзБржорж┐ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЛ React ржПрж░ `useEffect()` рж╣рзБржХрзЗрж░ ржорж╛ржзрзНржпржорзЗ, ржпрзЗржЦрж╛ржирзЗ рждрзБржорж┐ ржирж┐ржЬрзЗ рж╣рж╛рждрзЗ ржПржХржЯрж╛ ржПржирж┐ржорзЗрж╢ржи рж▓рзБржк рж▓рж┐ржЦржмрзЗред ржЖржорж░рж╛ ржПржЦрж╛ржирзЗ `requestAnimationFrame()` API ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ, ржпрж╛ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржмрж┐рж▓рзНржЯ-ржЗржи API тАФ ржПржЯрж╛ ржмрж╛рж░ржмрж╛рж░ рж╕рзНржХрзНрж░рж┐ржирзЗ ржлрзНрж░рзЗржо ржЖржБржХрж╛рж░ ржЬржирзНржп ржХрж▓ рж╣рзЯред

ржкрзНрж░ржержорзЗ ржжрзЗржЦрзЗ ржирж┐ржЗ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржХрзЛржб ржЙржжрж╛рж╣рж░ржг:

```js
import { useEffect, useRef } from "react";

function Welcome() {
  const ref = useRef(null);

  useEffect(() => {
    const node = ref.current;
    const duration = 1000; // ржПржирж┐ржорзЗрж╢ржи ржХржд рж╕ржорзЯ ржЪрж▓ржмрзЗ (ржорж┐рж▓рж┐рж╕рзЗржХрзЗржирзНржбрзЗ)
    let startTime = performance.now();
    let frameId = null;

    function onFrame(now) {
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      node.style.opacity = progress;

      if (progress < 1) {
        frameId = requestAnimationFrame(onFrame);
      }
    }

    node.style.opacity = 0;
    frameId = requestAnimationFrame(onFrame);

    return () => cancelAnimationFrame(frameId);
  }, []);

  return (
    <h1 className="welcome" ref={ref}>
      Welcome
    </h1>
  );
}
```

ржПржЗ ржХрзЛржбрзЗ ржпрж╛ рж╣ржЪрзНржЫрзЗ:

- ржЖржорж░рж╛ `ref` ржжрж┐рзЯрзЗ DOM ржирзЛржб ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░ржЫрж┐ред
- рждрж╛рж░ржкрж░ `useEffect()` ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж╛ ржлрзНрж░рзЗржо-рж▓рзБржк ржЪрж╛рж▓рж╛ржЪрзНржЫрж┐ред
- ржкрзНрж░рждрж┐ ржлрзНрж░рзЗржорзЗ ржЕржкрж╛рж╕рж┐ржЯрж┐ ржмрж╛рзЬрж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржзрзАрж░рзЗ ржзрзАрж░рзЗред
- ржпржЦржи ржЕржкрж╛рж╕рж┐ржЯрж┐ рзз ржП ржкрзМржБржЫрж╛рзЯ, рждржЦржи ржПржирж┐ржорзЗрж╢ржи ржмржирзНржз рж╣рзЯред

### ржЖрж░ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░ржнрж╛ржмрзЗ рж▓рж┐ржЦрж┐ `useFadeIn` ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ

рждрзБржорж┐ ржЪрж╛ржУ ржпржжрж┐ ржХрзЛржбржХрзЗ ржЖрж░ржУ рж░рж┐ржбрзЗржмрж▓ ржПржмржВ ржкрзБржиржГржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп ржХрж░рждрзЗ, рждрж╛рж╣рж▓рзЗ `useFadeIn()` ржирж╛ржорзЗ ржПржХржЯрж┐ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ ржмрж╛ржирж┐рзЯрзЗ ржирж┐рждрзЗ ржкрж╛рж░рзЛред

```js
// useFadeIn.js
import { useEffect } from "react";

export function useFadeIn(ref, duration = 1000) {
  useEffect(() => {
    const node = ref.current;
    let startTime = performance.now();
    let frameId = null;

    function onFrame(now) {
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      node.style.opacity = progress;

      if (progress < 1) {
        frameId = requestAnimationFrame(onFrame);
      }
    }

    node.style.opacity = 0;
    frameId = requestAnimationFrame(onFrame);

    return () => cancelAnimationFrame(frameId);
  }, [ref, duration]);
}
```

ржПржЦржи ржЖржорж░рж╛ `Welcome` ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ:

```js
import { useRef } from "react";
import { useFadeIn } from "./useFadeIn";

function Welcome() {
  const ref = useRef(null);
  useFadeIn(ref, 1000);

  return (
    <h1 className="welcome" ref={ref}>
      Welcome
    </h1>
  );
}
```

ржПржЦржи ржХрзЛржбржЯрж╛ ржЕржирзЗржХ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж╣рж▓рзЛ, рждрж╛ржЗ ржирж╛?

---

ржЕржмрж╢рзНржпржЗ Md. Mojnu Miah ржнрж╛ржЗред ржирж┐ржЪрзЗ **рж╕рзЗржХрж╢ржи рзи.рзл-ржПрж░ рзирзЯ ржнрж╛ржЧ** (There is more than one way to do it) ржмрж╛ржВрж▓рж╛рзЯ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣рж▓рзЛ, ржпрзЗржЦрж╛ржирзЗ ржЖржорж░рж╛ ржжрзЗржЦржЫрж┐ ржХрзАржнрж╛ржмрзЗ JavaScript class ржжрж┐рзЯрзЗ fade-in animation рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛рзЯ ржПржмржВ ржХржмрзЗ CSS ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ржЗ ржмрзЗрж╢рж┐ ржнрж╛рж▓рзЛ:

---

### ЁЯза рзи.рзл ржПрж░ рзирзЯ ржнрж╛ржЧ: ржХрзНрж▓рж╛рж╕ ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи ржПржмржВ ржЖрж░ржУ ржнрж╛рж▓рзЛ ржмрж┐ржХрж▓рзНржк

ржЖржорж░рж╛ ржЖржЧрзЗрж░ ржЕржВрж╢рзЗ ржжрзЗржЦрждрзЗ ржкрзЗрж▓рж╛ржо ржХрж┐ржнрж╛ржмрзЗ `useEffect` ржПржмржВ `requestAnimationFrame` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржлрзЗржЗржб-ржЗржи ржПржирж┐ржорзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛рзЯред

ржПржЦржи ржнрж╛ржмрзБржитАФржПржЗ ржЬржЯрж┐рж▓рждрж╛ ржХрж┐ ржЖржорж░рж╛ ржХржорж╛рждрзЗ ржкрж╛рж░рж┐?

#### тЬЕ рж╕ржорж╛ржзрж╛ржи рзй: JavaScript ржХрзНрж▓рж╛рж╕ ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛

React ржПрж░ `useEffect` рж╣рзБржХрзЗрж░ ржнрж┐рждрж░рзЗ рж▓ржЬрж┐ржХ ржирж╛ рж░рзЗржЦрзЗ ржпржжрж┐ ржЖржорж░рж╛ рж╕ржм imperative (ржирж┐рж░рзНржжрзЗрж╢ржорзВрж▓ржХ) ржХрзЛржб ржПржХржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржХрзНрж▓рж╛рж╕рзЗ ржирж┐рзЯрзЗ ржпрж╛ржЗ, рждрж╛рж╣рж▓рзЗ ржХрзЛржбржЯрж╛ ржЕржирзЗржХ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж╣рзЯред

ЁЯз╛ `FadeInAnimation` ржирж╛ржорзЗ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ ржмрж╛ржирж┐рзЯрзЗ ржЖржорж░рж╛ opacity ржмрж╛рзЬрж╛ржирзЛрж░ ржХрж╛ржЬржЯрж╛ рждрж╛рж░ ржЙржкрж░ ржЫрзЗрзЬрзЗ ржжрж┐рзЯрзЗржЫрж┐:

```js
export class FadeInAnimation {
  constructor(node) {
    this.node = node;
  }

  start(duration) {
    this.duration = duration;
    this.onProgress(0);
    this.startTime = performance.now();
    this.frameId = requestAnimationFrame(() => this.onFrame());
  }

  onFrame() {
    const timePassed = performance.now() - this.startTime;
    const progress = Math.min(timePassed / this.duration, 1);
    this.onProgress(progress);

    if (progress === 1) {
      this.stop();
    } else {
      this.frameId = requestAnimationFrame(() => this.onFrame());
    }
  }

  onProgress(progress) {
    this.node.style.opacity = progress;
  }

  stop() {
    cancelAnimationFrame(this.frameId);
    this.startTime = null;
    this.frameId = null;
  }
}
```

ЁЯОп ржЙржкржХрж╛рж░рж┐рждрж╛ ржХрзА?

- ржЖржкржирж╛рж░ `useFadeIn` рж╣рзБржХ ржЫрзЛржЯ ржЖрж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржерж╛ржХрзЗред
- ржПржирж┐ржорзЗрж╢ржи рж▓ржЬрж┐ржХ ржХрзНрж▓рж╛рж╕рзЗрж░ ржнрзЗрждрж░рзЗ ржЪрж▓рзЗ ржпрж╛рзЯ тАФ ржпрзЗржи ржПржХржЯрж╛ ржЫрзЛржЯ ржПржирж┐ржорзЗрж╢ржи ржЗржЮрзНржЬрж┐ржи рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗред
- ржпржжрж┐ ржнржмрж┐рж╖рзНржпрждрзЗ fade-in ржЫрж╛рзЬрж╛ржУ fade-out, bounce, scale ржЗрждрзНржпрж╛ржжрж┐ ржмрж╛ржирж╛рждрзЗ ржЪрж╛ржи тАФ ржХрзНрж▓рж╛рж╕ ржмрж╛ржирж┐рзЯрзЗ рж╕рж╣ржЬрзЗржЗ ржХрж░рж╛ ржпрж╛ржмрзЗред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи рзк: CSS ржжрж┐рзЯрзЗ fade-in тАФ рж╕ржмржЪрзЗрзЯрзЗ рж╕рж╣ржЬ ржУ ржжрзНрж░рзБржд рж╕ржорж╛ржзрж╛ржи

ржЖржкржирж┐ ржПржд ржХрж╖рзНржЯ ржХрж░рзЗ JavaScript ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи ржмрж╛ржирж╛ржЪрзНржЫрзЗржи, ржХрж┐ржирзНрждрзБ ржПржоржи ржЕржирзЗржХ ржПржирж┐ржорзЗрж╢ржи ржЖржЫрзЗ ржпрзЗржЧрзБрж▓рзЛ CSS ржжрж┐рзЯрзЗржЗ ржХрж░рж╛ ржпрж╛рзЯред ржпрзЗржоржи, fade-in animationред

```css
.welcome {
  animation: fadeIn 1000ms;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
```

ЁЯСЙ ржПржЗ рж╕рзЛржЬрж╛рж╕рж╛ржкрзНржЯрж╛ CSS animation ржЕржирзЗржХ ржжрзНрж░рзБржд, ржорж╕рзГржг (smooth), ржПржмржВ performance-friendlyред

**React component ржП:**

```jsx
function Welcome() {
  return <h1 className="welcome">Welcome</h1>;
}
```

**ржХрзЛржирзЛ Hook ржмрж╛ `ref` рж▓рж╛ржЧрзЗ ржирж╛!**

---

### ЁЯза рждрж╛рж╣рж▓рзЗ ржХрзЛржиржЯрж╛ ржмрзЗржЫрзЗ ржирзЗржм?

| ржкржжрзНржзрждрж┐                              | ржХржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?                                                       |
| ----------------------------------- | ------------------------------------------------------------------------ |
| JavaScript `useEffect` ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи | ржпржжрж┐ ржПржирж┐ржорзЗрж╢ржи dynamic рж╣рзЯ ржмрж╛ complex рж▓ржЬрж┐ржХ рж▓рж╛ржЧрзЗ                              |
| JavaScript ржХрзНрж▓рж╛рж╕ ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи       | ржпржжрж┐ ржПржирж┐ржорзЗрж╢ржи repeat рж╣рзЯ ржмрж╛ reusable ржХрж░рждрзЗ ржЪрж╛ржи                               |
| CSS ржПржирж┐ржорзЗрж╢ржи                         | ржпржжрж┐ рж╕рж╣ржЬ ржПржирж┐ржорзЗрж╢ржи рж╣рзЯ (fade, slide, scale ржЗрждрзНржпрж╛ржжрж┐) ржПржмржВ performance ржжрж░ржХрж╛рж░ рж╣рзЯ |

---

ЁЯФЪ **ржПржЗ ржЕржВрж╢рзЗрж░ ржорзВрж▓ ржХржерж╛:**
Effect ржжрж┐рзЯрзЗ ржЖржкржирж┐ ржмрж╛ржЗрж░рзЗрж░ ржЬржЧрждрзЗрж░ рж╕рж╛ржерзЗ React ржХрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзЗржиред ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ рж╕ржорзЯ ржПржЗ Effect ржЧрзБрж▓рзЛрж░ рж▓ржЬрж┐ржХ ржмрж╛ржЗрж░рзЗ ржХрзНрж▓рж╛рж╕ ржмрж╛ ржЖрж▓рж╛ржжрж╛ рж╣рзБржХрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐рж▓рзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржЕржирзЗржХ рж╕рзБржирзНржжрж░ ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж╣рзЯред

рждржмрзЗ ржпржжрж┐ ржХрзЛржирзЛ ржПржирж┐ржорзЗрж╢ржи CSS ржжрж┐рзЯрзЗржЗ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ JavaScript ржжрж┐рзЯрзЗ ржХрж░рждрзЗ ржпрж╛ржмрзЗржи ржирж╛тАФ**тАЬSometimes, you donтАЩt even need a Hook!тАЭ**

---

ржЕржмрж╢рзНржпржЗ Md. Mojnu Miah ржнрж╛ржЗ! ржирж┐ржЪрзЗ **рж╕рзЗржХрж╢ржи рзи.рзл: There is more than one way to do it** ржПрж░ **рзйрзЯ ржУ рж╢рзЗрж╖ ржЕржВрж╢** ржмрж╛ржВрж▓рж╛рзЯ рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣рж▓рзЛ:

---

## тЬЕ рзи.рзл ржПрж░ рзйрзЯ ржнрж╛ржЧ: рж╕рж╛рж░рж╛ржВрж╢ ржУ ржЯрзЗржХржЕрзНржпрж╛ржУ

ржПржЗ ржкрзБрж░рзЛ рж╕рзЗржХрж╢ржирзЗ ржЖржорж░рж╛ ржжрзЗржЦрж▓рж╛ржотАФReact Component-ржПрж░ ржнрж┐рждрж░рзЗ ржХрзАржнрж╛ржмрзЗ ржХрзЛржи ржХрж╛ржЬ ржЖржорж░рж╛ ржЕржирзЗржХржнрж╛ржмрзЗ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред React ржЖржорж╛ржжрзЗрж░ рж╢рзБржзрзБ declarative UI рж▓рзЗржЦрж╛рж░ рж╕рзБржмрж┐ржзрж╛ ржжрзЗрзЯ ржирж╛, ржмрж░ржВ ржмрж╛ржЗрж░рзЗрж░ "imperative world" ржПрж░ рж╕ржЩрзНржЧрзЗ ржпрзБржХрзНржд рж╣ржУрзЯрж╛рж░ рж╕рж╣ржЬ ржЙржкрж╛рзЯржУ ржжрзЗрзЯ `useEffect` ржПрж░ ржорж╛ржзрзНржпржорзЗред

---

### ЁЯУМ ржорзВрж▓ ржкрзЯрзЗржирзНржЯржЧрзБрж▓рзЛ ржПржХ ржиржЬрж░рзЗ:

#### рзз. **Effect ржжрж┐рзЯрзЗ ржмрж╛ржЗрж░рзЗрж░ ржЬржЧрждрзЗрж░ рж╕рж╛ржерзЗ React ржХрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рж╛ ржпрж╛рзЯ**

React ржирж┐ржЬрзЗ рж╢рзБржзрзБ UI ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░рзЗред ржХрж┐ржирзНрждрзБ ржпржЦржи DOM ржкрж░рж┐ржмрж░рзНрждржи, Timer рж╕рзЗржЯ ржХрж░рж╛, API ржХрж▓ ржХрж░рж╛, ржмрж╛ ржПржирж┐ржорзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛрж░ ржорждрзЛ ржмрж╛ржЗрж░рзЗрж░ ржЬржЧрждрзЗрж░ ржХрж╛ржЬ ржжрж░ржХрж╛рж░ рж╣рзЯ, рждржЦржи `useEffect()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

#### рзи. **React-ржПрж░ ржнрж┐рждрж░рзЗ ржПржирж┐ржорзЗрж╢ржи ржХрж░рж╛рж░ ржЕржирзЗржХ ржЙржкрж╛рзЯ ржЖржЫрзЗ**

- `useEffect` + `requestAnimationFrame` ржжрж┐рзЯрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржПржирж┐ржорзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯред
- рж╕рзЗржЗ рж▓ржЬрж┐ржХ ржПржХрзНрж╕ржЯрзНрж░рзНржпрж╛ржХрзНржЯ ржХрж░рзЗ ржЖрж▓рж╛ржжрж╛ JavaScript ржХрзНрж▓рж╛рж╕ ржмрж╛ ржлрж╛ржВрж╢ржирзЗ ржирзЗржУрзЯрж╛ ржпрж╛рзЯред
- ржЕржержмрж╛ рж╕ржмржЪрзЗрзЯрзЗ ржнрж╛рж▓рзЛ тАФ ржпржжрж┐ рж╕ржорзНржнржм рж╣рзЯ, CSS ржжрж┐рзЯрзЗ ржПржирж┐ржорзЗрж╢ржи ржХрж░рж╛ ржЙржЪрж┐рждред

#### рзй. **JavaScript ржХрзНрж▓рж╛рж╕ ржжрж┐рзЯрзЗ ржХрзЛржбрзЗрж░ ржЬржЯрж┐рж▓рждрж╛ ржХржорж╛ржирзЛ ржпрж╛рзЯ**

ржХрзЛржирзЛ ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржХрж░рждрзЗ рж╣рж▓рзЗ ржмрж╛ ржЬржЯрж┐рж▓ рж╣рж▓рзЗ, рж╕рзЗржЗ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ ржХрзНрж▓рж╛рж╕ ржмрж╛ржирж╛рж▓рзЗ ржХрзЛржб ржкрж░рж┐рж╖рзНржХрж╛рж░, рж░рж┐ржЗржЙржЬрзЗржмрж▓ ржУ ржЯрзЗрж╕рзНржЯржпрзЛржЧрзНржп рж╣рзЯред

#### рзк. **рж╕ржм рж╕ржорзЯ Hook ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛**

ржЕржирзЗржХ рж╕ржорзЯ ржХрж╛ржЬржЯрж╛ CSS ржмрж╛ ржЕржирзНржп ржЙржкрж╛рзЯрзЗ ржХрж░рж╛ рж╕ржорзНржнржм тАФ рждржЦржи ржЕржпржерж╛ `useEffect` ржмрж╛ `useRef` ржжрж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржЙржЪрж┐ржд ржирзЯред

---

### ЁЯУШ ржЖржкржирж┐ ржпрж╛ рж╢рж┐ржЦрж▓рзЗржи:

React рж╢рзБржзрзБржорж╛рждрзНрж░ JSX ржжрж┐рзЯрзЗ UI рждрзИрж░рж┐ ржХрж░рж╛рж░ ржЯрзБрж▓ ржирзЯтАФржПржЯрж╛ ржмрж╛ржЗрж░рзЗрж░ ржЬржЧрждрзЗрж░ рж╕рж╛ржерзЗржУ рж╕рзНржорж╛рж░рзНржЯржнрж╛ржмрзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рж╛рж░ ржПржХржЯрж┐ ржорж╛ржзрзНржпржоред ржЖрж░ ржЖржкржирж┐ ржпржЦржиржЗ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржпрж╛ржмрзЗржи, ржоржирзЗ рж░рж╛ржЦржмрзЗржи:

> тАЬThere is more than one way to do it.тАЭ
> ЁЯСЙ ржЖржкржирж╛рж░ ржХрж╛ржЬрзЗрж░ ржзрж░ржи ржмрзБржЭрзЗ рж╕ржарж┐ржХ ржЙржкрж╛рзЯржЯрж╛ ржмрзЗржЫрзЗ ржирж┐ржиред

---

### ЁЯОп ржкрзНрж░рзНржпрж╛ржХржЯрж┐рж╕ ржЯрж┐ржк:

React-ржП ржХрзЛржирзЛ ржирждрзБржи ржлрж┐ржЪрж╛рж░ ржмрж╛ рж╕ржорж╕рзНржпрж╛ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржЖржЧрзЗ ржирж┐ржЬрзЗржХрзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзБржи:

- ржПржЯрж╛ ржХрж┐ purely UI concern?
- ржПржЯрж╛ ржХрж┐ time-based ржмрж╛ external system-ржПрж░ рж╕рж╛ржерзЗ ржЬрзЬрж┐ржд?
- ржПржЯрж╛ ржХрж┐ reusable ржХрж░рж╛ ржпрж╛ржмрзЗ?
- ржПржЯрж╛ ржХрж┐ CSS ржжрж┐рзЯрзЗржЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛рзЯ?

ржПржЗ ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛрж░ ржЙрждрзНрждрж░ ржжрж┐рж▓рзЗ ржЖржкржирж┐ ржирж┐ржЬрзЗрж░ ржЬржирзНржп рж╕рзЗрж░рж╛ рж╕ржорж╛ржзрж╛ржи ржмрзЗржЫрзЗ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗржиред

---
