## рж╢рж┐рж░рзЛржирж╛ржо: тАШEffects ржжрж┐рзЯрзЗ Synchronize ржХрж░рж╛тАЩ

ржХрж┐ржЫрзБ ржХрж┐ржЫрзБ React ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржЩрзНржЧрзЗ ржХрж╛ржЬ ржХрж░рж╛рждрзЗ рж╣рзЯред ржпрзЗржоржи ржзрж░рзЗржи, ржЖржкржирж┐ React рж╕рзНржЯрзЗржЯ ржжрж┐рзЯрзЗ ржПржХржЯрж╛ non-React ржХржорзНржкрзЛржирзЗржирзНржЯ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ ржЪрж╛ржи, ржЕржержмрж╛ ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрж╢ржи ржХрж░рждрзЗ ржЪрж╛ржи, ржЕржержмрж╛ ржпржЦржи ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖрж╕рзЗ рждржЦржи ржПржХржЯрж╛ рж░рж┐ржкрзЛрж░рзНржЯ (analytics log) ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржиред _Effect_ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржЖржкржирж┐ рж░рзЗржирзНржбрж╛рж░рж┐ржВ рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ ржХрж┐ржЫрзБ ржХрзЛржб ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗржи, ржпрж╛рждрзЗ ржХрж░рзЗ React-ржПрж░ ржмрж╛ржЗрж░рзЗ ржпрзЗржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржорж┐рж▓рж┐рзЯрзЗ ржирзЗржУрзЯрж╛ (synchronize) ржпрж╛рзЯред

ржПржЗ ржкрж░рзНржмрзЗ ржЖржкржирж┐ рж╢рж┐ржЦржмрзЗржи:

- Effect ржХрзА ржЬрж┐ржирж┐рж╕
- Event ржЖрж░ Effect ржПрж░ ржкрж╛рж░рзНржержХрзНржп
- ржХрж┐ржнрж╛ржмрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ Effect рж▓рж┐ржЦрждрзЗ рж╣рзЯ
- ржХрж┐ржнрж╛ржмрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржмрж╛рж░ржмрж╛рж░ Effect ржЪрж╛рж▓рж╛ржирзЛ ржмржирзНржз ржХрж░ржмрзЗржи
- ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржХрзЗржи Effect ржжрзБржЗржмрж╛рж░ ржЪрж▓рзЗ ржПржмржВ ржПржЯрж╛ ржарж┐ржХ ржХрж░рж╛рж░ ржЙржкрж╛рзЯ

## Effect ржХрзА? ржЖрж░ Event ржерзЗржХрзЗ ржПржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржХрзЗржи?

Effect ржмрзБржЭрждрзЗ рж╣рж▓рзЗ ржЖржЧрзЗ React ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржжрзБржЗ ржзрж░ржирзЗрж░ ржХрзЛржбрзЗрж░ ржХржерж╛ ржЬрж╛ржирждрзЗ рж╣ржмрзЗ:

- **Rendering ржХрзЛржб**: ржПржЗ ржХрзЛржбржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржЙржкрж░рзЗрж░ ржжрж┐ржХрзЗ ржерж╛ржХрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж┐ props ржЖрж░ state ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрзЗржЯрж╛ рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛рждрзЗ ржЪрж╛ржи рж╕рзЗржЯрж╛ рждрзИрж░рж┐ ржХрж░рзЗржиред ржПржЗ ржХрзЛржбржЯрж╛ рж╢рзБржзрзБ рж╣рж┐рж╕рж╛ржм-ржирж┐ржХрж╛рж╢ (calculation) ржХрж░рзЗ, ржХрзЛржирзЛ ржХрж╛ржЬ (action) ржХрж░рзЗ ржирж╛ред ржпрзЗржоржи ржЧрж╛ржгрж┐рждрж┐ржХ ржлрж░рзНржорзБрж▓рж╛ред

- **Event handler**: ржПржЗ ржХрзЛржбржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░рзЗ ржерж╛ржХрзЗ, ржПржмржВ ржПржЯрж╛ ржЖрж╕рж▓рзЗ ржХрж┐ржЫрзБ ржХрж░рзЗред ржпрзЗржоржи ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржб ржЖржкржбрзЗржЯ ржХрж░рж╛, рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржирзЛ, ржмрж╛ ржЕржирзНржп ржкрзЗржЗржЬрзЗ ржирзЗржУрзЯрж╛ред ржПржЗржЧрзБрж▓рж╛ user action (ржпрзЗржоржи ржХрзНрж▓рж┐ржХ ржмрж╛ ржЯрж╛ржЗржк ржХрж░рж╛) ржПрж░ ржкрж░рзЗ ржЪрж▓рзЗред

ржХрж┐ржирзНрждрзБ рж╕ржм рж╕ржорзЯ user action ржерж╛ржХрзЗржЗ ржирж╛ред ржзрж░рзЗржи, ржПржХржЯрж╛ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржЫрзЗ, ржпрзЗржЯрж╛ рж╕рзНржХрзНрж░рж┐ржирзЗ ржПрж▓рзЗржЗ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣рждрзЗ рж╣ржмрзЗред ржПржЯрж╛ ржХрзЛржирзЛ рж╣рж┐рж╕рж╛ржм-ржирж┐ржХрж╛рж╢ ржирж╛ (side effect), ржЖрж░ ржПржЯрж╛ ржХрзЛржирзЛ ржХрзНрж▓рж┐ржХрзЗржУ рж╣рзЯ ржирж╛тАФржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржПрж▓рзЗржЗ рж╣рзЯред

**ржПржЗ ржЬрж╛рзЯржЧрж╛рждрзЗржЗ Effect ржжрж░ржХрж╛рж░ рж╣рзЯред** ржорж╛ржирзЗ, Effect ржПржоржи ржХрзЛржб ржЪрж╛рж▓рж╛рзЯ ржпрзЗржЯрж╛ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ ржХрж╛рж░ржгрзЗ рж╣рзЯ, ржирж╛ ржпрзЗ user ржХрж┐ржЫрзБ ржХрж░рж▓рзЛ ржмрж▓рзЗред ржпрзЗржоржи, ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛ ржорж╛ржирзЗ user ржПржХржЯрж╛ ржХрзНрж▓рж┐ржХ ржХрж░рзЗржЫрзЗтАФржПржЯрж╛ eventред ржЖрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛ ржорж╛ржирзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржПрж╕рзЗржЫрзЗтАФржПржЯрж╛ effectред

Effect рж░рзЗржирзНржбрж╛рж░ рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ ржЪрж▓рзЗред рждржЦржиржЗ React-ржПрж░ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо (ржпрзЗржоржи рж╕рж╛рж░рзНржнрж╛рж░, ржерж╛рж░рзНржб ржкрж╛рж░рзНржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐) ржПрж░ рж╕ржЩрзНржЧрзЗ ржпрзБржХрзНржд ржХрж░рж╛ ржпрж╛рзЯред

ржПржЦрж╛ржирзЗ "Effect" ржорж╛ржирзЗ React-ржПрж░ рж╕рзНржкрзЗрж╢рж╛рж▓ ржХрзЛржб ржпрзЗржЯрж╛ рж░рзЗржирзНржбрж╛рж░рж┐ржВ рж╢рзЗрж╖ рж╣рж▓рзЗ ржЪрж▓рзЗред ржЖрж░ рж╕рж╛ржзрж╛рж░ржг ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ-ржП ржпрзЗржЯрж╛ржХрзЗ side effect ржмрж▓рзЗ, рж╕рзЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ред

ржирж┐рж╢рзНржЪрж┐рждржнрж╛ржмрзЗржЗ! ржирж┐ржЪрзЗ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзЗрж░ ржорж╛ржирзБрж╖ ржпрзЗржи рж╕рж╣ржЬрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ, рж╕рзЗржнрж╛ржмрзЗ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржЕржирзБржмрж╛ржж ржХрж░рж▓рж╛ржо:

---

## рж╕ржмрж╕ржорзЯ Effect ржжрж░ржХрж╛рж░ рж╣рзЯ ржирж╛ {/* you-might-not-need-an-effect */}

**ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ Effect ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЖржЧрзЗ ржПржХржЯрзБ ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржиред** ржоржирзЗ рж░рж╛ржЦржмрзЗржи, Effect рж╕рж╛ржзрж╛рж░ржгржд рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржпржЦржи ржЖржкржирж╛ржХрзЗ React-ржПрж░ ржХрзЛржбрзЗрж░ ржмрж╛ржЗрж░рзЗ ржЧрж┐рзЯрзЗ ржХрзЛржирзЛ _ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░_ (ржпрзЗржоржи: ржмрзНрж░рж╛ржЙржЬрж╛рж░ API, ржерж╛рж░рзНржб ржкрж╛рж░рзНржЯрж┐ ржЯрзБрж▓рж╕, ржмрж╛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ) рж╕рж╛ржерзЗ ржорж┐рж▓рж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ рж╣рзЯред

ржпржжрж┐ ржЖржкржирж╛рж░ Effect рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХ state ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржЖрж░рзЗржХржЯрж╛ state рж╕рзЗржЯ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ рж╣рзЯрждрзЛ Effect ржжрж░ржХрж╛рж░ржЗ ржирзЗржЗред ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ [ржПржЗ рж▓рж┐ржВржХржЯрж┐ ржжрзЗржЦрзБржи](/learn/you-might-not-need-an-effect)ред

---

## ржХрж┐ржнрж╛ржмрзЗ ржПржХржЯрж┐ Effect рж▓рж┐ржЦржмрзЗржи {/* how-to-write-an-effect */}

Effect рж▓рзЗржЦрж╛рж░ ржЬржирзНржп ржПржЗ рждрж┐ржиржЯрж┐ ржзрж╛ржк ржЕржирзБрж╕рж░ржг ржХрж░рзБржи:

1. **Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рзБржиред** ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ, ржЖржкржирж╛рж░ Effect ржкрзНрж░рждрж┐ржмрж╛рж░ [commit](/learn/render-and-commit) рж╣ржУрзЯрж╛рж░ ржкрж░ ржЪрж▓ржмрзЗред

2. **Effect-ржПрж░ dependency ржжрж┐ржиред** ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ Effect ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ ржкрж░ ржЪрж╛рж▓рж╛ржирзЛ ржарж┐ржХ ржирж╛ред ржмрж░ржВ рждржЦржиржЗ ржЪрж▓рж╛ ржЙржЪрж┐ржд ржпржЦржи рж╕рждрзНржпрж┐ржЗ ржкрзНрж░рзЯрзЛржЬржиред ржпрзЗржоржи: ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖрж╕рж▓рзЗ fade-in animation ржЪрж▓ржмрзЗред ржЖржмрж╛рж░ ржЪрзНржпрж╛ржЯрж░рзБржорзЗ ржХрж╛ржирзЗржХрзНржЯ/ржбрж┐рж╕ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд рждржЦржиржЗ, ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖрж╕рзЗ ржмрж╛ ржЪрж▓рзЗ ржпрж╛рзЯ, ржЕржержмрж╛ ржЪрзНржпрж╛ржЯрж░рзБржо ржмржжрж▓рж╛рзЯред ржПржнрж╛ржмрзЗ ржХржЦржи Effect ржЪрж▓ржмрзЗ рж╕рзЗржЯрж╛ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рждрзЗ dependency ржжрж┐рждрзЗ рж╣рзЯред

3. **ржкрзНрж░рзЯрзЛржЬржи рж╣рж▓рзЗ cleanup ржлрж╛ржВрж╢ржи ржжрж┐ржиред** ржХрж┐ржЫрзБ Effect ржПржоржи рж╣рзЯ ржпрзЗржЧрзБрж▓рж╛ рж╢рзЗрж╖ ржХрж░рж╛рж░, undo ржХрж░рж╛рж░ ржмрж╛ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛рж░ ржирж┐рзЯржо ржерж╛ржХрж╛ ржжрж░ржХрж╛рж░ред ржпрзЗржоржи: "connect" ржПрж░ ржмрж┐ржкрж░рзАрждрзЗ "disconnect" ржерж╛ржХрж╛ ржжрж░ржХрж╛рж░, "subscribe" ржПрж░ ржмрж┐ржкрж░рзАрждрзЗ "unsubscribe", ржЖрж░ "fetch" ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ рж╣рзЯ "cancel" ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛ рж╣рзЯ "ignore" ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЯрж╛ ржХрж░рждрзЗ рж╣рж▓рзЗ Effect ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж╛ _cleanup function_ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЗ рж╣рзЯред

ржЪрж▓рзБржи, ржПржмрж╛рж░ ржПржЗ рждрж┐ржиржЯрж╛ ржзрж╛ржк ржПржХрзЗ ржПржХрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржжрзЗржЦрж┐ред

ржЕржмрж╢рзНржпржЗ! ржирж┐ржЪрзЗ рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзЗрж░ ржорж╛ржирзБрж╖рзЗрж░ ржжрзГрж╖рзНржЯрж┐ржнржЩрзНржЧрж┐ ржЕржирзБржпрж╛рзЯрзА ржЕржирзБржмрж╛ржж ржХрж░рж╛ рж╣рж▓рзЛ:

---

### ржзрж╛ржк рзз: Effect ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рзБржи {/* step-1-declare-an-effect */}

ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ Effect ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рж▓рзЗ, ржкрзНрж░ржержорзЗ React ржерзЗржХрзЗ [`useEffect` рж╣рзБржХ](/reference/react/useEffect) ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзБржи:

```js
import { useEffect } from "react";
```

рждрж╛рж░ржкрж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░рзЗ, ржПржХржжржо ржУржкрж░рзЗржЗ `useEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржПржмржВ ржПрж░ ржнрзЗрждрж░рзЗ ржХрж┐ржЫрзБ ржХрзЛржб рж▓рж┐ржЦрзБржи:

```js {2-4}
function MyComponent() {
  useEffect(() => {
    // ржПржЗ ржХрзЛржбржЯрж╛ *ржкрзНрж░рждрж┐ржмрж╛рж░* рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ ржкрж░ ржЪрж╛рж▓рзБ рж╣ржмрзЗ
  });
  return <div />;
}
```

React ржпржЦржиржЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ, ржкрзНрж░ржержорзЗ рж╕рзНржХрзНрж░рж┐ржи ржЖржкржбрзЗржЯ ржХрж░рзЗ, рждрж╛рж░ржкрж░ `useEffect` ржПрж░ ржХрзЛржб ржЪрж╛рж▓рж╛рзЯред ржЕрж░рзНржерж╛рзО, **`useEffect` ржорзВрж▓ржд ржХрзЛржб ржЪрж╛рж▓рж╛ржирзЛрж░ ржХрж╛ржЬржЯрж╛ржХрзЗ ржПржХржЯрзБ ржжрзЗрж░рж┐рждрзЗ ржХрж░рзЗ, ржпрзЗржи рж╕рзНржХрзНрж░рж┐ржи ржЖржкржбрзЗржЯ рж╢рзЗрж╖ рж╣рж▓рзЗ рждрж╛рж░ржкрж░ ржХрзЛржбржЯрж╛ ржЪрж▓рзЗред**

ржЪрж▓рзБржи ржжрзЗржЦрж┐ ржХрзАржнрж╛ржмрзЗ Effect ржжрж┐рзЯрзЗ ржХрзЛржирзЛ ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛рзЯред ржзрж░рзБржи, ржПржХржЯрж╛ `<VideoPlayer>` ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржЫрзЗред ржЖржкржирж┐ ржЪрж╛ржЗржЫрзЗржи `isPlaying` ржирж╛ржорзЗ ржПржХржЯрж┐ prop ржжрж┐рзЯрзЗ ржнрж┐ржбрж┐ржУ ржЪрж╛рж▓рзБ ржмрж╛ ржмржирзНржз ржХрж░рждрзЗ:

```js
<VideoPlayer isPlaying={isPlaying} />
```

ржПржЗ `VideoPlayer` ржХржорзНржкрзЛржирзЗржирзНржЯ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржмрж┐рж▓рзНржЯ-ржЗржи [`<video>` ржЯрзНржпрж╛ржЧ](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:

```js
function VideoPlayer({ src, isPlaying }) {
  // TODO: ржПржЦрж╛ржирзЗ isPlaying ржЕржирзБржпрж╛рзЯрзА ржХрж┐ржЫрзБ ржХрж░рждрзЗ рж╣ржмрзЗ
  return <video src={src} />;
}
```

ржХрж┐ржирзНрждрзБ `<video>` ржЯрзНржпрж╛ржЧрзЗ `isPlaying` ржирж╛ржорзЗ ржХрзЛржирзЛ prop ржирзЗржЗред ржнрж┐ржбрж┐ржУ ржЪрж╛рж▓рзБ ржмрж╛ ржмржирзНржз ржХрж░рждрзЗ рж╣рж▓рзЗ ржЖржкржирж╛ржХрзЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗрж░ ржЙржкрж░ `play()` ржЕржержмрж╛ `pause()` ржорзЗржержб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

**ржПржЦрж╛ржирзЗ ржЖржкржирж╛ржХрзЗ `isPlaying` prop ржПрж░ ржорж╛ржи ржЕржирзБржпрж╛рзЯрзА ржнрж┐ржбрж┐ржУ ржЪрж╛рж▓рзБ ржмрж╛ ржмржирзНржз ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЬржирзНржп ржнрж┐ржбрж┐ржУ ржЯрзНржпрж╛ржЧрзЗрж░ DOM ржП ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ рж▓рж╛ржЧржмрзЗред**

ржкрзНрж░ржержорзЗ ржнрж┐ржбрж┐ржУ ржПрж▓рж┐ржорзЗржирзНржЯрзЗрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржкрзЗрждрзЗ `useRef` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

ржЕржирзЗржХрзЗ ржнрзБрж▓ ржХрж░рзЗ `play()` ржмрж╛ `pause()` рж╕рж░рж╛рж╕рж░рж┐ рж░рзЗржирзНржбрж╛рж░рзЗрж░ рж╕ржорзЯрзЗржЗ ржХрж▓ ржХрж░рждрзЗ ржЪрж╛рзЯ, ржХрж┐ржирзНрждрзБ ржПржЯрж╛ ржарж┐ржХ ржирж╛:

```js
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play(); // рж░рзЗржирзНржбрж╛рж░рзЗрж░ рж╕ржорзЯ ржХрж▓ ржХрж░рж╛ ржарж┐ржХ ржирж╛
  } else {
    ref.current.pause(); // ржПржЯрж╛ ржХрж░рж▓рзЗ error рж╣рждрзЗ ржкрж╛рж░рзЗ
  }

  return <video ref={ref} src={src} loop playsInline />;
}
```

**ржХрзЗржи ржПржЯрж╛ ржарж┐ржХ ржирж╛?** ржХрж╛рж░ржг рж░рзЗржирзНржбрж╛рж░рзЗрж░ рж╕ржорзЯ ржнрж┐ржбрж┐ржУ DOM ржПржЦржирзЛ рждрзИрж░рж┐ рж╣рзЯржирж┐! JSX рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛рж░ ржЖржЧрзЗ DOM рждрзИрж░рж┐ рж╣рзЯ ржирж╛, рждрж╛ржЗ `ref.current` рждржЦржи `null` ржерж╛ржХрзЗред

### тЬЕ рж╕ржарж┐ржХ рж╕ржорж╛ржзрж╛ржи:

рж░рзЗржирзНржбрж╛рж░ рж╢рзЗрж╖ рж╣рж▓рзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржЬржирзНржп `useEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

```js
import { useEffect, useRef } from "react";

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

ржПржЦрж╛ржирзЗ React ржЖржЧрзЗ DOM рждрзИрж░рж┐ ржХрж░рзЗ, рждрж╛рж░ржкрж░ `useEffect` ржЪрж▓рзЗ ржПржмржВ `play()` ржмрж╛ `pause()` ржХрж▓ ржХрж░рзЗред

ржпржЦржиржЗ `VideoPlayer` ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ (ржкрзНрж░ржержоржмрж╛рж░ ржЕржержмрж╛ ржЖржкржбрзЗржЯ рж╣рж▓рзЗ), ржПржЗ ржзрж╛ржкржЧрзБрж▓рзЛ рж╣рзЯ:

1. React рж╕рзНржХрзНрж░рж┐ржирзЗ `<video>` ржжрзЗржЦрж╛рзЯред
2. рждрж╛рж░ржкрж░ `useEffect` ржЪрж▓рзЗред
3. `isPlaying` ржЕржирзБржпрж╛рзЯрзА `play()` ржмрж╛ `pause()` рж╣рзЯред

ржПржнрж╛ржмрзЗ `isPlaying` ржПрж░ ржорж╛ржирзЗрж░ рж╕рж╛ржерзЗ ржнрж┐ржбрж┐ржУрж░ ржЕржмрж╕рзНржерж╛ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржорж┐рж▓рж┐рзЯрзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯред

---

### тЪая╕П ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрзНржпрж╛ржкрж╛рж░ (Pitfall):

`useEffect` ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ **ржкрзНрж░рждрж┐ржмрж╛рж░** рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржкрж░ ржЪрж▓рзЗред ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ **ржЕрж╕рзАржо рж▓рзБржк (infinite loop)** рждрзИрж░рж┐ ржХрж░ржмрзЗ:

```js
const [count, setCount] = useState(0);
useEffect(() => {
  setCount(count + 1); // ржПржЯрж╛ ржмрж╛рж░ржмрж╛рж░ ржЪрж▓ржмрзЗ
});
```

ржПржЦрж╛ржирзЗ `setCount()` state ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ тЖТ ржирждрзБржи рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ тЖТ ржЖржмрж╛рж░ `useEffect()` ржЪрж▓рзЗ тЖТ ржЖржмрж╛рж░ `setCount()`... ржПржнрж╛ржмрзЗ рж▓рзБржк ржЪрж▓рзЗред

рж╕рж╛ржзрж╛рж░ржгржнрж╛ржмрзЗ, `useEffect` ржмрж╛ржЗрж░рзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо (ржпрзЗржоржи ржнрж┐ржбрж┐ржУ, API, ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржЗрждрзНржпрж╛ржжрж┐) ржПрж░ рж╕рж╛ржерзЗ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ sync ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред рж╢рзБржзрзБ state ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржЬржирзНржп Effect рж▓рж╛ржЧрзЗржЗ ржирж╛ред [ржПржЦрж╛ржирзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржжрзЗржЦрзБржи](/learn/you-might-not-need-an-effect)ред

---

ржПржЦрж╛ржирзЗ React-ржПрж░ `useEffect` рж╣рзБржХрзЗрж░ ржжрзНржмрж┐рждрзАрзЯ ржзрж╛ржктАФ**Effect dependencies ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рж╛**тАФрж╕ржорзНржкрж░рзНржХрзЗ ржПржХржЯрж┐ рж╕рж╣ржЬ ржУ рж╕рзНржкрж╖рзНржЯ ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

### ржзрж╛ржк рзи: Effect dependencies ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рж╛ {/* step-2-specify-the-effect-dependencies */}

ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ, `useEffect` **ржкрзНрж░рждрж┐ рж░рзЗржирзНржбрж╛рж░рзЗржЗ ржЪрж▓рзЗ**ред ржХрж┐ржирзНрждрзБ ржкрзНрж░рж╛рзЯ рж╕ржорзЯ, **ржЖржкржирж┐ ржПржЯрж╛ ржЪрж╛ржЗржмрзЗржи ржирж╛**, ржХрж╛рж░ржг:

- ржХржЦржиржУ ржПржЯрж╛ ржзрзАрж░ рж╣рзЯред ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХ ржХрж░рждрзЗ рж╕ржорзЯ рж▓рж╛ржЧрзЗ, рждрж╛ржЗ ржПржЯрж╛ рждржЦржиржЗ ржХрж░рж╛ ржЙржЪрж┐ржд ржпржЦржи рж╕рждрзНржпрж┐ржЗ ржкрзНрж░рзЯрзЛржЬржиред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржЖржкржирж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЯрж╛ржЗржк ржХрж░рж▓рзЗ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж┐ржХрж╛ржирзЗржХрзНржЯ ржХрж░рждрзЗ ржЪрж╛ржи ржирж╛ред
- ржХржЦржиржУ ржПржЯрж╛ ржнрзБрж▓ рж╣рзЯред ржзрж░рзБржи ржЖржкржирж┐ ржПржХржЯрж┐ fade-in ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржи ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржержоржмрж╛рж░ ржЖрж╕рзЗ, ржХрж┐ржирзНрждрзБ рж╕рзЗржЯрж╛ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЯрж╛ржЗржк ржХрж░рж▓рзЗ ржЪрж▓рж▓рзЗ рж╕рзЗржЯрж╛ ржнрзБрж▓ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред

ржПржЗ рж╕ржорж╕рзНржпрж╛ ржмрзЛржЭрж╛рждрзЗ ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржХрзЛржб ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗржЦрж╛ржирзЗ `console.log` ржжрж┐рзЯрзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ ржпрзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржЗржиржкрзБржЯрзЗ ржЯрж╛ржЗржк ржХрж░рж▓рзЗ `useEffect` ржЖржмрж╛рж░ ржЪрж▓рзЗ:

```js
import { useState, useRef, useEffect } from "react";

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log("Calling video.play()");
      ref.current.play();
    } else {
      console.log("Calling video.pause()");
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState("");
  return (
    <>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? "Pause" : "Play"}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

ржПржЗ ржорзБрж╣рзВрж░рзНрждрзЗ `useEffect` ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржЪрж▓рзЗред ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЯрж┐ржХрзЗ **ржкрзНрж░рзЯрзЛржЬржи ржЫрж╛рзЬрж╛ ржЪрж╛рж▓рж╛ржирзЛ ржерзЗржХрзЗ ржмрж┐рж░ржд** рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржитАФржПржЗржЬржирзНржп `useEffect`-ржПрж░ ржжрзНржмрж┐рждрзАрзЯ ржЖрж░рзНржЧрзБржорзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржПржХржЯрж┐ _dependency array_ ржжрж┐рждрзЗ рж╣ржмрзЗред

рж╢рзБрж░рзБрждрзЗ ржЖржкржирж┐ ржпржжрж┐ ржЦрж╛рж▓рж┐ `[]` ржжрзЗржи:

```js
useEffect(() => {
  // ...
}, []);
```

рждрж╛рж╣рж▓рзЗ React ржЖржкржирж╛ржХрзЗ ржПржХржЯрж┐ ржПрж░рж░ ржжрзЗржЦрж╛ржмрзЗ:

```
React Hook useEffect has a missing dependency: 'isPlaying'
```

ржХрж╛рж░ржг `useEffect` ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб `isPlaying`-ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ рж╕рзЗржЯрж╛ `[]` ржПрж░ ржоржзрзНржпрзЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣рзЯржирж┐ред рж╕ржорж╛ржзрж╛ржи рж╣рж┐рж╕рзЗржмрзЗ ржЖржкржирж╛ржХрзЗ `isPlaying` array-рждрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ:

```js
useEffect(() => {
  if (isPlaying) {
    // ...
  } else {
    // ...
  }
}, [isPlaying]); // ржирж┐рж░рзНржнрж░рж╢рзАрж▓рждрж╛ ржШрзЛрж╖ржгрж╛ ржХрж░рж╛ рж╣рж▓рзЛ
```

ржПржЦржи `useEffect` ржХрзЗржмрж▓ рждржЦржиржЗ ржЪрж▓ржмрзЗ ржпржЦржи `isPlaying`-ржПрж░ ржорж╛ржи ржЖржЧрзЗрж░ рж░рзЗржирзНржбрж╛рж░рзЗрж░ ржЪрзЗрзЯрзЗ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯред ржЯрж╛ржЗржк ржХрж░рж▓рзЗ ржПржЦржи Effect ржЖрж░ ржЪрж▓ржмрзЗ ржирж╛, ржХрж┐ржирзНрждрзБ Play/Pause ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржЪрж▓ржмрзЗред

React ржПржЗ dependency ржЧрзБрж▓рзЛ `Object.is` ржкржжрзНржзрждрж┐рждрзЗ рждрзБрж▓ржирж╛ ржХрж░рзЗред ржЖржкржирж┐ ржпржжрж┐ ржнрзБрж▓ржнрж╛ржмрзЗ dependency ржмрж╛ржж ржжрзЗржи, React lint error ржжрзЗржЦрж┐рзЯрзЗ рж╕рждрж░рзНржХ ржХрж░ржмрзЗред

ЁЯСЙ **ржоржирзЗ рж░рж╛ржЦржмрзЗржи:** ржЖржкржирж┐ ржирж┐ржЬрзЗрж░ ржЗржЪрзНржЫрж╛ржорждрзЛ dependency ржмрзЗржЫрзЗ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред ржпржжрж┐ ржЖржкржирж┐ ржЪрж╛ржи ржХрзЛржирзЛ dependency ржмрж╛ржж ржжрж┐рждрзЗ, рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛рж░ Effect ржХрзЛржб ржПржоржиржнрж╛ржмрзЗ рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ рж╕рзЗржЗ ржорж╛ржиржЯрж┐рж░ ржкрзНрж░рзЯрзЛржЬржи ржирж╛ ржкрзЬрзЗред

#### ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж╛рж░рзНржержХрзНржп

```js
useEffect(() => {
  // ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржЪрж▓рзЗ
});

useEffect(() => {
  // ржХрзЗржмрж▓ ржкрзНрж░ржержоржмрж╛рж░ component ржЖрж╕рж▓рзЗ (mount) ржЪрж▓рзЗ
}, []);

useEffect(() => {
  // ржкрзНрж░ржержоржмрж╛рж░ ржПржмржВ ржпржЦржи a ржмрж╛ b ржмржжрж▓рж╛рзЯ рждржЦржи ржЪрж▓рзЗ
}, [a, b]);
```

ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржЖржорж░рж╛ тАЬmountтАЭ ржмрж▓рждрзЗ ржХрзА ржмрзЛржЭрж╛рзЯ рждрж╛ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржжрзЗржЦржмрзЛред

---

#### рж░рзЗржлрж╛рж░рзЗржирзНрж╕ (ref) ржХрзЗржи dependency array ржерзЗржХрзЗ ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ? {/* why-was-the-ref-omitted-from-the-dependency-array */}

ржПржЗ Effect-ржП `ref` ржПржмржВ `isPlaying`тАФржжрзБржЯрзЛржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржХрж┐ржирзНрждрзБ рж╢рзБржзрзБржорж╛рждрзНрж░ `isPlaying`-ржХрзЗржЗ dependency рж╣рж┐рж╕рзЗржмрзЗ ржШрзЛрж╖ржгрж╛ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);
```

ржПрж░ ржХрж╛рж░ржг рж╣рж▓рзЛ, `ref` ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржПржХржЯрж┐ **рж╕рзНржерж┐рж░ ржкрж░рж┐ржЪрзЯ (stable identity)** ржерж╛ржХрзЗ: React ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ, ржкрзНрж░рждрж┐ржмрж╛рж░ `useRef` ржХрж▓ ржХрж░рж▓рзЗ ржЖржкржирж┐ ржПржХржЗ ржЕржмржЬрзЗржХрзНржЯржЗ ржкрж╛ржмрзЗржиред ржПржЯрж┐ ржХржЦржирзЛ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯ ржирж╛, рждрж╛ржЗ ржПржЯрж┐ ржХржЦржирзЛржЗ ржПржХрж╛ ржПржХрж╛ Effect ржкрзБржирж░рж╛рзЯ ржЪрж╛рж▓рж╛ржирзЛрж░ ржХрж╛рж░ржг рж╣ржмрзЗ ржирж╛ред рж╕рзБрждрж░рж╛ржВ ржЖржкржирж┐ ржПржЯрж┐ include ржХрж░рзЗржи ржмрж╛ ржирж╛ ржХрж░рзЗржитАФржжрзБржЗржнрж╛ржмрзЗржЗ ржарж┐ржХ ржЖржЫрзЗред

ржЪрж╛ржЗрж▓рзЗржУ ржЖржкржирж┐ ржПржоржиржнрж╛ржмрзЗ рж▓рж┐ржЦрждрзЗ ржкрж╛рж░рзЗржи:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying, ref]);
```

`useState` ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ [`set` ржлрж╛ржВрж╢ржиржЧрзБрж▓рзЛ](/reference/react/useState#setstate) ржПрж░ржУ ржПржХржЗржнрж╛ржмрзЗ рж╕рзНржерж┐рж░ ржкрж░рж┐ржЪрзЯ ржерж╛ржХрзЗ, рждрж╛ржЗ рж╕рзЗржЧрзБрж▓рзЛржУ ржЕржирзЗржХ рж╕ржорзЯ dependency array-ржП ржмрж╛ржж ржерж╛ржХрзЗред ржпржжрж┐ рж▓рж┐ржирзНржЯрж╛рж░ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ ржирж╛ ржжрзЗржЦрж╛рзЯ, рждржмрзЗ ржПржЗ ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржирж┐рж░рж╛ржкржжред

рждржмрзЗ ржПржЗ ржзрж░ржирзЗрж░ **рж╕рзНржерж┐рж░ dependency ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржХрзЗржмрж▓ рждржЦржиржЗ ржХрж╛ржЬ ржХрж░рзЗ**, ржпржЦржи рж▓рж┐ржирзНржЯрж╛рж░ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржпрзЗ ржЕржмржЬрзЗржХрзНржЯржЯрж┐ ржЖрж╕рж▓рзЗржЗ рж╕рзНржерж┐рж░ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржпржжрж┐ `ref` ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ ржерзЗржХрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ, рждржмрзЗ ржЖржкржирж╛ржХрзЗ рждрж╛ dependency array-ржП ржЕржмрж╢рзНржпржЗ ржжрж┐рждрзЗ рж╣ржмрзЗред ржХрж╛рж░ржг ржЖржкржирж┐ ржирж┐рж╢рзНржЪрж┐ржд ржиржи ржпрзЗ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕ржмрж╕ржорзЯ ржПржХржЗ `ref` ржкрж╛ржарж╛ржмрзЗ, ржирж╛ржХрж┐ рж╢рж░рзНржд ржЕржирзБржпрж╛рзЯрзА ржмрж┐ржнрж┐ржирзНржи `ref` ржкрж╛ржарж╛ржмрзЗред рждрж╛ржЗ, ржП ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЖржкржирж╛рж░ Effect ржирж┐рж░рзНржнрж░рж╢рзАрж▓ рж╣рзЯрзЗ ржкрзЬрзЗ ржарж┐ржХ ржХрзЛржи `ref` ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ рждрж╛рж░ ржУржкрж░ред
ржирж┐ржЪрзЗ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ ржЕржирзБржмрж╛ржжржЯрж┐ рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ:

---

### ржзрж╛ржк рзй: ржкрзНрж░рзЯрзЛржЬржи рж╣рж▓рзЗ Cleanup ржпрзЛржЧ ржХрж░рзБржи {/* step-3-add-cleanup-if-needed */}

ржЪрж▓рзБржи ржПржЦржи ржнрж┐ржирзНржи ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж┐ред ржЖржкржирж┐ ржПржХржЯрж┐ `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░ржЫрзЗржи, ржпрж╛ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖрж╕рж╛рж░ рж╕ржорзЯ ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рждрзЗ рж╣ржмрзЗред ржЖржкржирж╛ржХрзЗ ржПржХржЯрж┐ `createConnection()` API ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ, ржпрж╛ ржПржоржи ржПржХржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржпрж╛рж░ ржоржзрзНржпрзЗ `connect()` ржПржмржВ `disconnect()` ржорзЗржержб ржерж╛ржХрзЗред ржПржЦржи ржкрзНрж░рж╢рзНржи рж╣рж▓рзЛ: ржЗржЙржЬрж╛рж░ ржпржЦржи рж╕рзНржХрзНрж░рж┐ржирзЗ ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржжрзЗржЦржЫрзЗ, рждржЦржи ржХрзАржнрж╛ржмрзЗ ржХрж╛ржирзЗржХрж╢ржи ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛ ржпрж╛рзЯ?

ржкрзНрж░ржержорзЗ Effect ржПрж░ ржнрж┐рждрж░рзЗ ржПржЗ ржХрзЛржб рж▓рж┐ржЦрзБржи:

```js
useEffect(() => {
  const connection = createConnection();
  connection.connect();
});
```

ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ ржкрж░ ржирждрзБржи ржХрж░рзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж▓рзЗ рж╕рзЗржЯрж╛ ржзрзАрж░ржЧрждрж┐рж░ рж╣ржмрзЗ, рждрж╛ржЗ ржЖржорж░рж╛ dependency array ржпрзЛржЧ ржХрж░рж┐:

```js {4}
useEffect(() => {
  const connection = createConnection();
  connection.connect();
}, []);
```

**ржПржЦрж╛ржирзЗ Effect ржПрж░ ржнрж┐рждрж░рзЗрж░ ржХрзЛржб ржХрзЛржирзЛ ржкрзНрж░ржкрж╕ ржмрж╛ рж╕рзНржЯрзЗржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ ржирж╛, рждрж╛ржЗ dependency array ржЦрж╛рж▓рж┐ `[]` рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред ржПрж░ ржорж╛ржирзЗ React ржХрзЗржмрж▓ рждржЦржиржЗ ржПржЗ ржХрзЛржб ржЪрж╛рж▓рж╛ржмрзЗ ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржержоржмрж╛рж░ рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛ржмрзЗ (mount рж╣ржмрзЗ)ред**

ржЪрж▓рзБржи ржПржмрж╛рж░ ржПржЗ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж┐рзЯрзЗ ржжрзЗржЦрж┐:

```js
import { useEffect } from "react";
import { createConnection } from "./chat.js";

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  // ржмрж╛рж╕рзНрждржм ржЪрзНржпрж╛ржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛рж░ ржорждрзЛ ржХрж░рзЗ ржмрж╛ржирж╛ржирзЛ
  return {
    connect() {
      console.log("тЬЕ Connecting...");
    },
    disconnect() {
      console.log("тЭМ Disconnected.");
    },
  };
}
```

ржПржЗ Effect ржХрзЗржмрж▓ ржкрзНрж░ржержоржмрж╛рж░ ржЪрж▓рж╛рж░ ржХржерж╛, рждрж╛ржЗ ржЖржкржирж┐ рж╣рзЯрждрзЛ ржЖрж╢рж╛ ржХрж░ржЫрзЗржи `"тЬЕ Connecting..."` ржПржХржмрж╛рж░ржЗ ржХржирж╕рзЛрж▓рзЗ ржжрзЗржЦрж╛ржмрзЗред
**ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржжрзЗржЦржмрзЗржи ржПржЯрж╛ ржжрзБ'ржмрж╛рж░ ржХржирж╕рзЛрж▓рзЗ ржжрзЗржЦрж╛ржЪрзНржЫрзЗред ржХрзЗржи?**

ржнрж╛ржмрзБржи, `ChatRoom` ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ ржмрзЬ ржПржХржЯрж┐ ржЕрзНржпрж╛ржкрзЗрж░ ржЕржВрж╢ред ржЗржЙржЬрж╛рж░ ржкрзНрж░ржержорзЗ ржЪрзНржпрж╛ржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖрж╕рзЗржи, рждржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржорж╛ржЙржирзНржЯ рж╣рзЯ ржПржмржВ `connect()` ржХрж▓ рж╣рзЯред рждрж╛рж░ржкрж░ ржЗржЙржЬрж╛рж░ ржЕржирзНржп ржкрзЗржЗржЬрзЗ ржпрж╛ржи, ржпрзЗржоржи `Settings`ред рждржЦржи `ChatRoom` ржЖржиржорж╛ржЙржирзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯред ржкрж░рзЗ ржЗржЙржЬрж╛рж░ ржЖржмрж╛рж░ ржмрзНржпрж╛ржХ ржХрж░рзЗ `ChatRoom` ржП ржлрзЗрж░рзЗтАФржПржмрж╛рж░ ржЖржмрж╛рж░ `connect()` ржЪрж▓рзЗред ржХрж┐ржирзНрждрзБ ржЖржЧрзЗрж░ ржХрж╛ржирзЗржХрж╢ржиржЯрж┐ ржХржЦржирзЛ ржмржирзНржз ржХрж░рж╛ рж╣рзЯржирж┐! ржПрждрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж╣рждрзЗ ржерж╛ржХрзЗ ржпрж╛ ржЕрзНржпрж╛ржкрзЗрж░ ржЬржирзНржп рж╕ржорж╕рзНржпрж╛ рж╕рзГрж╖рзНржЯрж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ ржзрж░ржгрзЗрж░ ржмрж╛ржЧ рж╕рж╣ржЬрзЗ ржзрж░рж╛ ржкрзЬрзЗ ржирж╛ред рждрж╛ржЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ React **ржкрзНрж░ржержоржмрж╛рж░ ржорж╛ржЙржирзНржЯ ржХрж░рж╛рж░ ржкрж░ ржЖржмрж╛рж░ рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ ржЖржиржорж╛ржЙржирзНржЯ ржУ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗ**, ржпрзЗржи ржЖржкржирж┐ ржПржоржи рж╕ржорж╕рзНржпрж╛ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржзрж░рзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗржиред

ржпржЦржи ржЖржкржирж┐ ржХржирж╕рзЛрж▓рзЗ `"тЬЕ Connecting..."` ржжрзБтАЩржмрж╛рж░ ржжрзЗржЦрзЗржи, рждржЦржиржЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ ржЖржкржирж┐ `disconnect()` ржХрж▓ ржХрж░рзЗржиржирж┐ред ржПржЯрж┐ ржарж┐ржХ ржХрж░рждрзЗ Effect ржПрж░ ржнрж┐рждрж░ ржерзЗржХрзЗ ржПржХржЯрж┐ **cleanup function** рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзБржи:

```js {4-6}
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  return () => {
    connection.disconnect();
  };
}, []);
```

React ржкрзНрж░рждрж┐ржмрж╛рж░ Effect ржЪрж╛рж▓рж╛ржирзЛрж░ ржЖржЧрзЗ ржПржмржВ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржиржорж╛ржЙржирзНржЯ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржПржЗ cleanup ржлрж╛ржВрж╢ржи ржЪрж╛рж▓рж╛рзЯред ржПржЦржи ржжрзЗржЦрж╛ ржпрж╛ржХ ржХрзА рж╣рзЯ:

```js
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  return {
    connect() {
      console.log("тЬЕ Connecting...");
    },
    disconnect() {
      console.log("тЭМ Disconnected.");
    },
  };
}
```

ржПржЦржи ржЖржкржирж┐ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржХржирж╕рзЛрж▓рзЗ рждрж┐ржиржЯрж┐ рж▓ржЧ ржкрж╛ржмрзЗржи:

1. `"тЬЕ Connecting..."`
2. `"тЭМ Disconnected."`
3. `"тЬЕ Connecting..."`

**ржПржЯрж╛ржЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ рж╕ржарж┐ржХ ржЖржЪрж░ржгред** React ржЗржЪрзНржЫрж╛ржХрзГрждржнрж╛ржмрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржпрзЗржи ржЖржкржирж┐ ржирж┐рж╢рзНржЪрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗржи cleanup ржарж┐ржХржорждрзЛ ржХрж╛ржЬ ржХрж░ржЫрзЗред ржПржЯрж┐ ржжрзЗржЦрждрзЗ ржпрзЗржоржиржЗ рж╣рзЛржХ, production-ржП ржПржЯрж┐ ржПржХржмрж╛рж░ржЗ ржЪрж▓ржмрзЗред

**Production-ржП ржЖржкржирж┐ ржХрзЗржмрж▓ `"тЬЕ Connecting..."` ржПржХржмрж╛рж░ржЗ ржжрзЗржЦржмрзЗржиред** ржПржЗ рж░рж┐ржорж╛ржЙржирзНржЯ ржХрзЗржмрж▓ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ рж╣рзЯ ржмрж╛ржЧ ржзрж░рж╛рж░ ржЬржирзНржпред ржЪрж╛ржЗрж▓рзЗ ржЖржкржирж┐ [Strict Mode](/reference/react/StrictMode) ржмржирзНржз ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржХрж┐ржирзНрждрзБ React ржПржЯрж┐ ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛рж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗрзЯ ржпрж╛рждрзЗ ржПржоржи ржмрж╛ржЧ ржжрзНрж░рзБржд ржзрж░рж╛ ржпрж╛рзЯред

---

ржирж┐ржЪрзЗ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

## ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ Effect ржжрзБржЗржмрж╛рж░ ржЪрж▓рж▓рзЗ ржХрзАржнрж╛ржмрзЗ рж╕рж╛ржорж▓рж╛ржмрзЗржи? {/* how-to-handle-the-effect-firing-twice-in-development */}

React ржЗржЪрзНржЫрзЗ ржХрж░рзЗржЗ **ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ** ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржкрзБржирж░рж╛рзЯ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржпрж╛рждрзЗ ржЖржЧрзЗрж░ ржорждрзЛ ржмрж╛ржЧ ржзрж░рж╛ ржпрж╛рзЯред
**ржарж┐ржХ ржкрзНрж░рж╢рзНржи рж╣ржЪрзНржЫрзЗ ржирж╛ "Effect ржПржХржмрж╛рж░ ржХрж┐ржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛ржмрзЛ?" ржмрж░ржВ "Effect ржпрзЗржи рж░рж┐ржорж╛ржЙржирзНржЯрзЗрж░ ржкрж░рзЗржУ ржарж┐ржХржарж╛ржХ ржХрж╛ржЬ ржХрж░рзЗ, рж╕рзЗржЯрж╛ ржХрж┐ржнрж╛ржмрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЛ?"**

рж╕рж╛ржзрж╛рж░ржгржд ржПрж░ ржЙрждрзНрждрж░ рж╣рж▓рзЛ **cleanup ржлрж╛ржВрж╢ржи ржарж┐ржХржорждрзЛ рж▓рж┐ржЦрж╛ред** ржПржЗ ржлрж╛ржВрж╢ржирзЗрж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ Effect ржпрж╛ ржХрж░ржЫрзЗ рж╕рзЗржЯрж╛ ржмржирзНржз ржмрж╛ ржЙрж▓рзНржЯрзЗ ржжрзЗржУрзЯрж╛ред ржПржХржЯрж╛ рж╕рж╣ржЬ ржирж┐рзЯржо рж╣рж▓рзЛ:
ржЗржЙржЬрж╛рж░ ржпрзЗржи ржмрзБржЭрждрзЗ ржирж╛ ржкрж╛рж░рзЗ ржпрзЗ Effect ржПржХржмрж╛рж░ржЗ ржЪрж╛рж▓рж┐рзЯрзЗржЫрзЗ (ржпрзЗржоржи ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╣рзЯ) ржирж╛ржХрж┐ ржЪрж╛рж▓рж┐рзЯрзЗ ржмржирзНржз ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрж╛рж▓рж┐рзЯрзЗржЫрзЗ (ржпрзЗржоржи ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ рж╣рзЯ)ред

ржЖржкржирж╛рж░ ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ Effect ржирж┐ржЪрзЗрж░ рж╕рж╛ржзрж╛рж░ржг ржзрж╛ржБржЪрзЗрж░ (pattern) ржнрзЗрждрж░рзЗ ржкрзЬрзЗред

#### `ref` ржжрж┐рзЯрзЗ Effect ржмржирзНржз ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗржи ржирж╛ {/* dont-use-refs-to-prevent-effects-from-firing */}

ржЕржирзЗржХрзЗржЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ Effect ржжрзБржЗржмрж╛рж░ ржЪрж▓рж╛ ржарзЗржХрж╛рждрзЗ `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗтАФржПржЯрж╛ ржПржХржЯрж╛ ржмрзЬ ржнрзБрж▓ред
ржЙржжрж╛рж╣рж░ржг рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рзБржи ржЖржкржирж┐ ржирж┐ржЪрзЗрж░ ржХрзЛржб рж▓рж┐ржЦрж▓рзЗржи:

```js {1,3-4}
const connectionRef = useRef(null);
useEffect(() => {
  // ЁЯЪй ржПржЗржнрж╛ржмрзЗ ржмрж╛ржЧ ржарж┐ржХ рж╣ржмрзЗ ржирж╛!!!
  if (!connectionRef.current) {
    connectionRef.current = createConnection();
    connectionRef.current.connect();
  }
}, []);
```

ржПржнрж╛ржмрзЗ ржЖржкржирж┐ рж╣рзЯрждрзЛ ржХржирж╕рзЛрж▓рзЗ `"тЬЕ Connecting..."` ржПржХржмрж╛рж░ржЗ ржжрзЗржЦржЫрзЗржи, ржХрж┐ржирзНрждрзБ ржЖрж╕рж▓рзЗ ржмрж╛ржЧржЯрж┐ ржПржЦржирзЛ ржарж┐ржХ рж╣рзЯржирж┐ред

ржпржЦржи ржЗржЙржЬрж╛рж░ ржЕржирзНржп ржкрзЗржЗржЬрзЗ ржпрж╛рзЯ, рждржЦржи ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз рж╣рзЯ ржирж╛ред ржЖрж░ ржпржЦржи рждрж╛рж░рж╛ ржЖржмрж╛рж░ ржлрж┐рж░рзЗ ржЖрж╕рзЗ, рждржЦржи ржирждрзБржи ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж╣рзЯред ржлрж▓рзЗ ржЖржЧрзЗрж░ ржорждрзЛржЗ ржЕржирзЗржХ ржХрж╛ржирзЗржХрж╢ржи ржЬржорзЗ ржпрж╛рзЯред ржПржЗ "fix" ржЖрж╕рж▓рзЗ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рзЗ ржирж╛ред

ржмрж╛ржЧ ржарж┐ржХ ржХрж░рждрзЗ рж╢рзБржзрзБ Effect ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржпржерзЗрж╖рзНржЯ ржирж╛ред
Effect ржпрзЗржи **рж░рж┐ржорж╛ржЙржирзНржЯрзЗрж░ ржкрж░рзЗржУ ржарж┐ржХржарж╛ржХ ржХрж╛ржЬ ржХрж░рзЗ**, ржЕрж░рзНржерж╛рзО ржкрзБрж░рж╛рждржи ржХрж╛ржЬржЧрзБрж▓рзЛ (ржпрзЗржоржи ржХрж╛ржирзЗржХрж╢ржи) ржарж┐ржХржнрж╛ржмрзЗ **ржмржирзНржз ржХрж░рж╛ рж╣рзЯ**, рж╕рзЗржЯрж╛ржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред

ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛрждрзЗ ржПржЗ ржзрж░ржирзЗрж░ рж╕рж╛ржзрж╛рж░ржг рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржжрзЗржЦрж╛ржирзЛ ржЖржЫрзЗред

---

ржирж┐ржЪрзЗ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрж╛ржВрж▓рж╛рзЯ ржЕржирзБржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

### React ржирзЯ ржПржоржи ржЙржЗржЬрзЗржЯ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛ {/* controlling-non-react-widgets */}

ржХржЦржирзЛ ржХржЦржирзЛ ржПржоржи ржХрж┐ржЫрзБ UI ржЙржЗржЬрзЗржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ ржпрзЗржЧрзБрж▓рзЛ React ржжрж┐рзЯрзЗ ржмрж╛ржирж╛ржирзЛ ржирж╛ред ржзрж░рзБржи, ржЖржкржирж┐ ржПржХржЯрж╛ ржорзНржпрж╛ржк ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзЗржЬрзЗ ржпрзЛржЧ ржХрж░ржЫрзЗржиред ржПрждрзЗ `setZoomLevel()` ржирж╛ржорзЗ ржПржХржЯрж╛ ржорзЗржержб ржЖржЫрзЗ, ржПржмржВ ржЖржкржирж┐ ржЪрж╛ржи ржПржЯрж╛ ржпрзЗржи React-ржПрж░ `zoomLevel` state-ржПрж░ рж╕рж╛ржерзЗ рж╕ржмрж╕ржорзЯ ржорж┐рж▓ рж░рзЗржЦрзЗ ржЪрж▓рзЗред рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛рж░ `useEffect` ржПржоржи рж╣ржмрзЗ:

```js
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржХрзЛржирзЛ cleanup ржжрж░ржХрж╛рж░ ржирзЗржЗред ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ React `useEffect` ржжрзБржЗржмрж╛рж░ ржЪрж╛рж▓рж╛ржмрзЗ, ржХрж┐ржирзНрждрзБ ржПрждрзЗ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗ ржирж╛ ржХрж╛рж░ржг `setZoomLevel` ржпржжрж┐ ржПржХржЗ ржнрзНржпрж╛рж▓рзБ ржжрж┐рзЯрзЗ ржжрзБржЗржмрж╛рж░ ржбрж╛ржХрж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржХрж┐ржЫрзБржЗ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ ржирж╛ред рж╣рзЯрждрзЛ ржПржХржЯрзБ ржзрзАрж░ ржЧрждрж┐рж░ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржПржЯрж╛ ржПржХржмрж╛рж░ржЗ ржЪрж▓ржмрзЗ, рждрж╛ржЗ рж╕ржорж╕рзНржпрж╛ ржирзЗржЗред

рждржмрзЗ ржХрж┐ржЫрзБ API ржЖржЫрзЗ ржпрзЗржЧрзБрж▓рзЛ ржПржХрж╕рж╛ржерзЗ ржжрзБржЗржмрж╛рж░ ржХрж▓ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред ржЙржжрж╛рж╣рж░ржг: ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржмрж┐рж▓рзНржЯ-ржЗржи [`<dialog>`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement) ржПрж▓рж┐ржорзЗржирзНржЯрзЗрж░ [`showModal()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/showModal) ржорзЗржержб ржпржжрж┐ ржжрзБржЗржмрж╛рж░ ржПржХрж╕рж╛ржерзЗ ржХрж▓ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржПрж░рж░ ржжрзЗрзЯред ржПржЗ ржЕржмрж╕рзНржерж╛рзЯ ржЖржкржирж╛ржХрзЗ cleanup ржлрж╛ржВрж╢ржи рж▓рж┐ржЦрзЗ `dialog.close()` ржХрж░рждрзЗ рж╣ржмрзЗ:

```js {4}
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ `showModal()` тЖТ `close()` тЖТ `showModal()` ржПржЗржнрж╛ржмрзЗ ржЪрж▓ржмрзЗред ржПрждрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржЪрзЛржЦрзЗ ржПржЯрж╛ ржПржХржмрж╛рж░ржЗ ржЦрзЛрж▓рж╛рж░ ржорждрзЛ ржоржирзЗ рж╣ржмрзЗтАФржпрзЗржоржиржЯрж╛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╣рзЯред

---

### ржЗржнрзЗржирзНржЯ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рж╛ {/* subscribing-to-events */}

ржЖржкржирж╛рж░ Effect ржпржжрж┐ ржХрзЛржирзЛ ржЗржнрзЗржирзНржЯрзЗ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ cleanup ржлрж╛ржВрж╢ржирзЗ ржЖржкржирж╛ржХрзЗ ржЖржирж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рждрзЗ рж╣ржмрзЗ:

```js {6}
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener("scroll", handleScroll);
  return () => window.removeEventListener("scroll", handleScroll);
}, []);
```

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ `addEventListener()` тЖТ `removeEventListener()` тЖТ `addEventListener()` ржПржЗржнрж╛ржмрзЗ ржЪрж▓ржмрзЗред ржлрж▓рзЗ ржПржХ рж╕ржорзЯ рж╢рзБржзрзБ ржПржХржЯрж┐ рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржи ржЕрзНржпрж╛ржХржЯрж┐ржн ржерж╛ржХржмрзЗред ржЗржЙржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржПржЯрж╛ржУ ржПржХржмрж╛рж░ржЗ ржЪрж▓рж╛рж░ ржорждрзЛржЗ ржоржирзЗ рж╣ржмрзЗтАФржпрзЗржоржиржЯрж╛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╣рзЯред

---

### ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛ {/* triggering-animations */}

ржЖржкржирж╛рж░ Effect ржпржжрж┐ ржХрж┐ржЫрзБ ржЕрзНржпрж╛ржирж┐ржорзЗржЯ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ cleanup ржлрж╛ржВрж╢ржирзЗ рж╕рзЗржЗ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржиржХрзЗ рж╢рзБрж░рзБ ржЕржмрж╕рзНржерж╛рзЯ ржлрж┐рж░рж┐рзЯрзЗ ржЖржирждрзЗ рж╣ржмрзЗ:

```js {4-6}
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи ржЪрж╛рж▓рзБ ржХрж░рж╛
  return () => {
    node.style.opacity = 0; // ржЖржмрж╛рж░ рж╢рзБрж░рзБ ржЕржмрж╕рзНржерж╛рзЯ ржлрзЗрж░ржд ржЖржирж╛
  };
}, []);
```

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ opacity рж╣ржмрзЗ `1`, ржкрж░рзЗ `0`, ржкрж░рзЗ ржЖржмрж╛рж░ `1`ред ржПрждрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржЪрзЛржЦрзЗ рж╢рзБржзрзБ `1` ржжрзЗржЦрж╛ржмрзЗтАФржпрзЗржоржиржЯрж╛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╣рзЯред
ржпржжрж┐ ржЖржкржирж┐ ржХрзЛржирзЛ ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи ржпрзЗржЯрж╛рждрзЗ ржЯрзБржЗржирж┐ржВ (tweening) рж╕рж╛ржкрзЛрж░рзНржЯ ржЖржЫрзЗ, рждрж╛рж╣рж▓рзЗ cleanup ржлрж╛ржВрж╢ржирзЗ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржирзЗрж░ ржЯрж╛ржЗржорж▓рж╛ржЗржи рж░рж┐рж╕рзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗред

### ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рж╛ {/* fetching-data */}

<video width="700" controls>
  <source
    src="/videos/sync-useEffect/fetchData-in-production.webm"
    type="video/webm"
  />
  Your browser does not support the video tag.
</video>

ржпржжрж┐ ржЖржкржирж╛рж░ `useEffect` ржХрзЛржирзЛ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржирзЗ ржПржЗ ржлрзЗржЪржЯрж╛ **ржмрж╛рждрж┐рж▓ ржХрж░рзЗ ржжрзЗржУрзЯрж╛** ржЙржЪрж┐ржд ржмрж╛ ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ **ржЗржЧржирзЛрж░ ржХрж░рж╛** ржЙржЪрж┐ржд:

```js {2,6,13-15}
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

ржЖржкржирж┐ ржПржоржи ржХрзЛржирзЛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ "ржЖржиржбрзБ" ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ ржпрзЗржЯрж╛ ржПржХржмрж╛рж░ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред ржХрж┐ржирзНрждрзБ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЗ ржпрзЗржи рж╕рзЗржЗ ржлрзЗржЪ рж░рзЗрж╕ржкржирзНрж╕тАФржпрзЗржЯрж╛ ржПржЦржи ржЖрж░ ржжрж░ржХрж╛рж░ ржирзЗржЗтАФржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ ржкрзНрж░ржнрж╛ржм ржирж╛ ржлрзЗрж▓рзЗред

ржЙржжрж╛рж╣рж░ржг: ржпржжрж┐ `userId` `'Alice'` ржерзЗржХрзЗ `'Bob'`-ржП ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ, рждрж╛рж╣рж▓рзЗ `'Alice'` ржПрж░ ржЬржирзНржп ржЖрж╕рж╛ рж░рзЗрж╕ржкржирзНрж╕ `setTodos()` ржП ржпрж╛ржмрзЗ ржирж╛, ржХрж╛рж░ржг ржЖржорж░рж╛ ржЖржЧрзЗржЗ `ignore = true` ржХрж░рзЗ ржжрж┐рзЯрзЗржЫрж┐ред

ЁЯФ╣ **ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржЖржкржирж┐ ржжрзБржЯрж┐ ржлрзЗржЪ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред** ржПржЯрж╛ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХред ржкрзНрж░ржержо `Effect` рж░рж╛ржи рж╣ржУрзЯрж╛рж░ ржкрж░ржЗ ржХрзНрж▓рж┐ржиржЖржк рж╣рзЯрзЗ ржпрж╛рзЯ, рждрж╛ржЗ `ignore = true` рж╣рзЯрзЗ ржпрж╛рзЯ ржПржмржВ ржУржЗ рж░рзЗрж╕ржкржирзНрж╕ ржЗржЧржирзЛрж░ рж╣рзЯрзЗ ржпрж╛рзЯред

ЁЯФ╣ **ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╢рзБржзрзБ ржПржХржЯрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╣рзЯред** ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржмрж╛рж░ржмрж╛рж░ ржлрзЗржЪ рж╣ржУрзЯрж╛ржЯрж╛ ржмрж┐рж░ржХрзНрждрж┐ржХрж░ ржоржирзЗ рж╣рж▓рзЗ ржЖржкржирж┐ ржХрзНржпрж╛рж╢рж┐ржВ ржПржмржВ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржбрж┐ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи ржпрзБржХрзНржд ржХрзЛржирзЛ рж╕рж▓рж┐ржЙрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```js
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
```

ржПрждрзЗ рж╢рзБржзрзБ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржПржХрзНрж╕ржкрзЗрж░рж┐рзЯрзЗржирзНрж╕ ржнрж╛рж▓рзЛ рж╣ржмрзЗ ржирж╛, ржЕрзНржпрж╛ржкржУ ржжрзНрж░рзБржд ржЕржирзБржнржм рж╣ржмрзЗред ржпрзЗржоржи, ржЗржЙржЬрж╛рж░ ржпржжрж┐ Back ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржЖржЧрзЗрж░ ржкрзЗржЬрзЗ ржлрж┐рж░рзЗ ржпрж╛рзЯ, рждрж╛рж╣рж▓рзЗ ржЖржЧрзЗрж░ ржлрзЗржЪ ржХрж░рж╛ ржбрзЗржЯрж╛ржЗ ржжрзЗржЦрж╛ржмрзЗ, ржирждрзБржи ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛ред

---

#### `useEffect` ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рж╛рж░ ржмрж┐ржХрж▓рзНржк ржХрзА?

ржЕржирзЗржХрзЗржЗ `useEffect` ржжрж┐рзЯрзЗ `fetch` ржХрж▓ ржХрж░рзЗржи, ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ-рж╕рж╛ржЗржб ржЕрзНржпрж╛ржкрзЗред ржХрж┐ржирзНрждрзБ ржПрждрзЗ ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ ржЖржЫрзЗ:

1. тЬЕ **Effects рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЪрж▓рзЗ ржирж╛ред** ржлрж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржЖрж╕рж╛ HTML-ржП рж╢рзБржзрзБ тАЬLoadingтАжтАЭ ржжрзЗржЦрж╛рзЯ, ржбрзЗржЯрж╛ ржЖрж╕рзЗ ржирж╛ред ржкрж░рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж╕ржм JS рж▓рзЛржб рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рждржмрзЗржЗ ржбрзЗржЯрж╛ ржЖрж╕рзЗтАФржпрж╛ рж╕рзНрж▓рзЛ ржПржмржВ ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕ржкрзЗрж░рж┐рзЯрзЗржирзНрж╕ ржЦрж╛рж░рж╛ржк ржХрж░рзЗред

2. тЬЕ **ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржУрзЯрж╛ржЯрж╛рж░ржлрж▓ рждрзИрж░рж┐ рж╣рзЯред** ржорж╛ржирзЗ, ржкрзНрж░ржержорзЗ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржЪрж╛ржЗрж▓рзНржб ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛ рж╢рзБрж░рзБ ржХрж░рзЗред ржПрждрзЗ рж╕ржорзЯ ржмрзЗрж╢рж┐ рж▓рж╛ржЧрзЗред

3. тЬЕ **ржкрзНрж░рж┐рж▓рзЛржб ржмрж╛ ржХрзНржпрж╛рж╢ рж╣рзЯ ржирж╛ред** ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржиржорж╛ржЙржирзНржЯ рж╣рзЯрзЗ ржЖржмрж╛рж░ ржорж╛ржЙржирзНржЯ рж╣рж▓рзЗ ржЖржмрж╛рж░ ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рждрзЗ рж╣рзЯред

4. тЬЕ **ржмрж╛ржЧ рж╣ржУрзЯрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржерж╛ржХрзЗред** ржпрзЗржоржи, ржПржХрж╛ржзрж┐ржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ рж░рзЗрж╕ ржХржирзНржбрж┐рж╢ржи рждрзИрж░рж┐ рж╣рждрзЗ ржкрж╛рж░рзЗред

#### рждрж╛ржЗ рж╕ржорж╛ржзрж╛ржи ржХрзА?

- ЁЯСЙ **React Framework ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рждрж╛рж░ ржбрзЗржЯрж╛ ржлрзЗржЪрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред** ржПржЧрзБрж▓рзЛ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬржбред
- ЁЯСЙ **ржирж╛ рж╣рж▓рзЗ React Query, useSWR, ржмрж╛ React Router 6.4+ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред** ржПржЧрзБрж▓рзЛ ржХрзНржпрж╛рж╢рж┐ржВ, рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржбрж┐ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПржмржВ ржкрзНрж░рж┐рж▓рзЛржб рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред
- ЁЯСЙ ржЪрж╛ржЗрж▓рзЗ ржЖржкржирж┐ ржирж┐ржЬрзЗржУ ржПржХржЯрж┐ ржХрзНржпрж╛рж╢ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржПрж░ ржнрж┐рждрж░рзЗ `useEffect` ржерж╛ржХржмрзЗ, ржХрж┐ржирзНрждрзБ рж╕рзНржорж╛рж░рзНржЯржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред

рждржмрзЗ, ржпржжрж┐ ржПржЧрзБрж▓рзЛрж░ ржХрзЛржирзЛржЯрж┐ржЗ ржирж╛ рж╣рзЯ, рждржЦржи `useEffect` ржжрж┐рзЯрзЗржЗ ржлрзЗржЪ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, рж╢рзБржзрзБ ржЙржкрж░рзЗрж░ ржоржд рж╕рзЗржлрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

Here is the translation of your provided text into **Bengali (Bangla)**:

---

### ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрж╕ ржкрж╛ржарж╛ржирзЛ {/* sending-analytics */}

ржПржЗ ржХрзЛржбржЯрж┐ ржжрзЗржЦрзБржи ржпрж╛ ржПржХржЯрж┐ ржкрзЗржЬ ржнрж┐ржЬрж┐ржЯрзЗрж░ рж╕ржорзЯ ржПржХржЯрж┐ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрж╕ ржЗржнрзЗржирзНржЯ ржкрж╛ржарж╛рзЯ:

```js
useEffect(() => {
  logVisit(url); // ржПржХржЯрж┐ POST ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛рзЯ
}, [url]);
```

ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ, `logVisit` ржкрзНрж░рждрж┐ржЯрж┐ URL-ржПрж░ ржЬржирзНржп ржжрзБржЗржмрж╛рж░ ржХрж▓ рж╣рзЯ, рждрж╛ржЗ ржЖржкржирж┐ рж╣рзЯрждрзЛ ржПржЯрж╛ ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред **ржЖржорж░рж╛ ржкрж░рж╛ржорж░рзНрж╢ ржжрж┐ржЗ ржПржЗ ржХрзЛржбржЯрж┐ ржпрзЗржоржи ржЖржЫрзЗ рждрзЗржоржиржЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржпред** ржЖржЧрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛрж░ ржорждрзЛржЗ, ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржЖрж░ ржжрзБржЗржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг ржерзЗржХрзЗ ржХрзЛржирзЛ ржкрж╛рж░рзНржержХрзНржп ржирзЗржЗред ржмрзНржпржмрж╣рж╛рж░рж┐ржХ ржжрж┐ржХ ржерзЗржХрзЗ, ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ `logVisit` ржХрзЛржирзЛ ржХрж╛ржЬ ржХрж░рж╛ ржЙржЪрж┐ржд ржирзЯ, ржХрж╛рж░ржг ржЖржкржирж┐ ржЪрж╛ржи ржирж╛ ржпрж╛рждрзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЗрж╢рж┐ржи ржерзЗржХрзЗ ржЖрж╕рж╛ рж▓ржЧржЧрзБрж▓рзЛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржорзЗржЯрзНрж░рж┐ржХрж╕ржХрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░рзЗред ржпржЦржиржЗ ржЖржкржирж┐ ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ ржлрж╛ржЗрж▓ рж╕рзЗржн ржХрж░рзЗржи, рждрж╛ ржЖржмрж╛рж░ рж░рж┐ржорж╛ржЙржирзНржЯ рж╣рзЯ, ржлрж▓рзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржЕрждрж┐рж░рж┐ржХрзНржд ржнрж┐ржЬрж┐ржЯ рж▓ржЧ рж╣рзЯред

**ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржорзЛржбрзЗ ржХрзЛржирзЛ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржнрж┐ржЬрж┐ржЯ рж▓ржЧ рж╣ржмрзЗ ржирж╛ред**

ржЖржкржирж┐ ржпрзЗ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрж╕ ржЗржнрзЗржирзНржЯ ржкрж╛ржарж╛ржЪрзНржЫрзЗржи рждрж╛ ржбрж┐ржмрж╛ржЧ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ, ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкржЯрж┐ ржПржХржЯрж┐ рж╕рзНржЯрзЗржЬрж┐ржВ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯрзЗ ржбрж┐ржкрзНрж▓рзЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи (ржпрзЗржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржорзЛржбрзЗ ржЪрж▓рзЗ), ржЕржержмрж╛ ржЕрж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ [Strict Mode](/reference/react/StrictMode) ржПржмржВ ржПрж░ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ-ржЕржирж▓рж┐ рж░рж┐ржорж╛ржЙржирзНржЯрж┐ржВ ржЪрзЗржХ ржмржирзНржз рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиред ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ рж░рзБржЯ ржЪрзЗржЮрзНржЬ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржерзЗржХрзЗржУ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрж╕ ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗржи Effects-ржПрж░ ржмржжрж▓рзЗред ржЖрж░ржУ ржирж┐рж░рзНржнрзБрж▓ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрж╕рзЗрж░ ржЬржирзНржп [ржЗржирзНржЯрж╛рж░рж╕рзЗржХрж╢ржи ржЕржмржЬрж╛рж░ржнрж╛рж░](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржи, ржпрж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржХрзЛржи ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛ ржнрж┐ржЙржкрзЛрж░рзНржЯрзЗ ржЖржЫрзЗ ржПржмржВ ржХрждржХрзНрж╖ржг ржзрж░рзЗ ржжрзГрж╢рзНржпржорж╛ржи ржерж╛ржХрзЗред

HereтАЩs a simplified explanation of the two sections in easy Bengali:

---

### рзз. ржЗржлрзЗржХрзНржЯ ржирзЯ: ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╢рзБрж░рзБ ржХрж░рж╛рж░ рж╕ржорзЯ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рж╛

ржХрж┐ржЫрзБ ржХрж╛ржЬ рж╢рзБржзрзБ ржПржХржмрж╛рж░ржЗ ржХрж░рж╛ ржЙржЪрж┐ржд, ржпрзЗржоржи ржпржЦржи ржЕрзНржпрж╛ржкржЯрж┐ ржкрзНрж░ржержоржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣рзЯред

ржПржЗ ржзрж░ржирзЗрж░ ржХрж╛ржЬ ржЖржкржирж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржмрж╛ржЗрж░рзЗ ржХрж░ржмрзЗржиред ржпрзЗржоржи:

```js
if (typeof window !== "undefined") {
  checkAuthToken();
  loadDataFromLocalStorage();
}
```

ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ тАФ ржпржжрж┐ ржЖржорж░рж╛ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржерж╛ржХрж┐, рждрж╛рж╣рж▓рзЗ `checkAuthToken()` ржПржмржВ `loadDataFromLocalStorage()` ржЪрж╛рж▓рж╛ржирзЛ рж╣ржмрзЗред

ЁЯСЙ ржПржЯрж╛ рж╢рзБржзрзБ ржПржХржмрж╛рж░ржЗ ржЪрж▓рзЗ, ржпржЦржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржкрзЗржЬ рж▓рзЛржб ржХрж░рзЗред рждрж╛ржЗ ржПржЯрж┐ ржЗржлрзЗржХрзНржЯрзЗрж░ (useEffect) ржнрзЗрждрж░рзЗ ржирж╛ рж░рж╛ржЦрж▓рзЗржУ ржЪрж▓рзЗред

---

### рзи. ржЗржлрзЗржХрзНржЯ ржирзЯ: ржПржХржЯрж┐ ржкржгрзНржп ржХрзЗржирж╛

ржзрж░рзБржи ржЖржкржирж┐ ржХрзЛржирзЛ ржкржгрзНржп ржХрж┐ржирждрзЗ ржПржХржЯрж┐ API ржХрж▓ ржжрзЗржи:

```js
useEffect(() => {
  fetch("/api/buy", { method: "POST" });
}, []);
```

ржПржЯрж╛ ржнрзБрж▓ред ржХрзЗржи?

ЁЯСЙ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ `useEffect` ржжрзБржЗржмрж╛рж░ ржЪрж▓рзЗред ржлрж▓рзЗ ржЖржкржирж┐ ржжрзБржЗржмрж╛рж░ ржкржгрзНржп ржХрж┐ржирзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗржиред

ЁЯСЙ ржПржоржиржХрж┐ ржХрзЗржЙ ржпржжрж┐ Back ржмрж╛ржЯржирзЗ ржЪрж╛ржк ржжрзЗрзЯ, рждрж╛рж╣рж▓рзЗржУ ржЖржмрж╛рж░ API ржХрж▓ ржЪрж▓рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

**ржХрзЗржирж╛ рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ ржХрж╛ржЬ, ржпрзЗржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд, рж╢рзБржзрзБ ржкрзЗржЬ ржнрж┐ржЬрж┐ржЯ ржХрж░рж▓рзЗржЗ ржирзЯред**

рж╕ржарж┐ржХ ржЙржкрж╛рзЯ рж╣рж▓рзЛ тАФ ржЗржлрзЗржХрзНржЯ ржмрж╛ржж ржжрж┐рзЯрзЗ ржПржЗ ржХрзЛржбржЯрж┐ ржХрзНрж▓рж┐ржХ ржЗржнрзЗржирзНржЯрзЗрж░ ржоржзрзНржпрзЗ рж░рж╛ржЦрж╛:

```js
function handleClick() {
  fetch("/api/buy", { method: "POST" });
}
```

ЁЯСЙ ржПржЦржи, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржпржЦржи Buy ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░ржмрзЗ, рждржЦржиржЗ ржкржгрзНржп ржХрзЗржирж╛ рж╣ржмрзЗред

**ржорзЛржЯ ржХржерж╛:**
ржпржжрж┐ рж░рж┐ржорж╛ржЙржирзНржЯ (component ржирждрзБржи ржХрж░рзЗ рж▓рзЛржб рж╣ржУрзЯрж╛) рж╣рж▓рзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ рж▓ржЬрж┐ржХ ржнрзЗржЩрзЗ ржкрзЬрзЗ, рждрж╛рж╣рж▓рзЗ ржмрзБржЭржмрзЗржи ржХрзЛржбрзЗ ржЖржЧрзЗ ржерзЗржХрзЗржЗ рж╕ржорж╕рзНржпрж╛ ржЫрж┐рж▓ред React ржПржЗ ржзрж░ржирзЗрж░ рж╕ржорж╕рзНржпрж╛ ржзрж░рж╛рж░ ржЬржирзНржпржЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржжрзБржЗржмрж╛рж░ ржЪрж╛рж▓рж╛рзЯред

ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ ржжрзЗржУрзЯрж╛ ржЯрзЗржХрзНрж╕ржЯрзЗрж░ рж╕рж╣ржЬ ржУ рж╕рзНржкрж╖рзНржЯ ржмрж╛ржВрж▓рж╛рзЯ ржЕржирзБржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

---

## рж╕ржмржХрж┐ржЫрзБ ржПржХрж╕рж╛ржерзЗ ржжрзЗржЦрж╛ (Putting it all together) {/* putting-it-all-together */}

ржПржЗ ржкрзНрж▓рзЗржЧрзНрж░рж╛ржЙржирзНржбржЯрж┐ ржЖржкржирж╛ржХрзЗ ржкрзНрж░рзНржпрж╛ржХржЯрж┐ржХрзНржпрж╛рж▓рж┐ ржмрзБржЭрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗ ржпрзЗ **Effect** ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред ржПржЯрж┐ Effect ржЪрж╛рж▓рзБ рж╣ржУрзЯрж╛рж░ рждрж┐ржи рж╕рзЗржХрзЗржирзНржб ржкрж░ ржЗржиржкрзБржЯ ржХрж░рж╛ ржЯрзЗржХрзНрж╕ржЯ ржХржирж╕рзЛрж▓рзЗ рж▓ржЧ ржХрж░ржмрзЗред ржХрж┐ржирзНрждрзБ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржЗ ржЯрж╛ржЗржоржЖржЙржЯржЯрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рж╛ ржпрж╛рзЯред рж╢рзБрж░рзБ ржХрж░рждрзЗ тАЬMount the componentтАЭ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред

---

### ржХрзЛржбрзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛:

```js
useEffect(() => {
  function onTimeout() {
    console.log("тП░ " + text);
  }

  console.log('ЁЯФ╡ Schedule "' + text + '" log');
  const timeoutId = setTimeout(onTimeout, 3000);

  return () => {
    console.log('ЁЯЯб Cancel "' + text + '" log');
    clearTimeout(timeoutId);
  };
}, [text]);
```

ЁЯФ╣ ржПржЗ ржХрзЛржб `text` ржнрзНржпрж╛рж▓рзБ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗржЗ Effect ржЪрж╛рж▓рж╛рзЯред
ЁЯФ╣ ржкрзНрж░ржержорзЗ тАЬScheduleтАЭ рж▓ржЧ рж╣рзЯ ржПржмржВ рждрж╛рж░ржкрж░ рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ `console.log` рж╣рзЯред
ЁЯФ╣ рждржмрзЗ ржпржжрж┐ `text` ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ, ржЖржЧрзЗрж░ ржЯрж╛ржЗржоржЖржЙржЯ **Cancel** рж╣рзЯ ржПржмржВ ржирждрзБржиржЯрж┐ **Schedule** рж╣рзЯред

---

### ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:

ржкрзНрж░ржержоржмрж╛рж░ ржЖржкржирж┐ рждрж┐ржиржЯрж┐ рж▓ржЧ ржжрзЗржЦржмрзЗржи:

```
ЁЯФ╡ Schedule "a" log
ЁЯЯб Cancel "a" log
ЁЯФ╡ Schedule "a" log
```

рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ:

```
тП░ a
```

ЁЯСЙ ржХрзЗржи ржжрзБржЯрж┐ Schedule ржУ ржПржХржЯрж┐ Cancel рж╣рж▓рзЛ?
React ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржорзЛржбрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржХржмрж╛рж░ Unmount ржХрж░рзЗ ржЖржмрж╛рж░ Mount ржХрж░рзЗред ржПрждрзЗ ржЖржкржирж┐ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗржи ржЖржкржирж╛рж░ ржХрзНрж▓рж┐ржиржЖржк ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ржирж╛ред

---

### ржПржЦржи ржЗржиржкрзБржЯрзЗ `abc` ржЯрж╛ржЗржк ржХрж░рзБржи:

ржпржжрж┐ ржжрзНрж░рзБржд ржЯрж╛ржЗржк ржХрж░рзЗржи, ржЖржкржирж┐ ржжрзЗржЦржмрзЗржи:

```
ЁЯФ╡ Schedule "ab" log
ЁЯЯб Cancel "ab" log
ЁЯФ╡ Schedule "abc" log
```

ЁЯСЙ React ржЖржЧрзЗрж░ Effect ржХрзНрж▓рж┐ржи ржХрж░рзЗ ржирждрзБржиржЯрж╛ ржЪрж╛рж▓рж╛рзЯред рждрж╛ржЗ ржПржХржЗ рж╕ржорзЯрзЗ ржПржХржЯрж╛ржЗ `setTimeout` ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржерж╛ржХрзЗред

---

### ржПржЦржи ржХрж┐ржЫрзБ ржЯрж╛ржЗржк ржХрж░рзЗ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ "Unmount the component" ржЪрж╛ржкрзБржи:

ЁЯСЙ ржжрзЗржЦржмрзЗржи, Unmount рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ рж╢рзЗрж╖ Effect-ржПрж░ ржХрзНрж▓рж┐ржиржЖржк рж╣рзЯрзЗ ржпрж╛рзЯред ржорж╛ржирзЗ ржЯрж╛ржЗржоржЖржЙржЯ ржлрж╛рзЯрж╛рж░ рж╣ржУржпрж╝рж╛рж░ ржЖржЧрзЗржЗ ржмрж╛рждрж┐рж▓ рж╣рзЯрзЗ ржпрж╛рзЯред

---

### ржПржмрж╛рж░ ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ ржХржорзЗржирзНржЯ ржХрж░рзЗ ржжрж┐ржи:

```js
// return () => {
//   console.log('ЁЯЯб Cancel "' + text + '" log');
//   clearTimeout(timeoutId);
// };
```

рждрж╛рж░ржкрж░ ржжрзНрж░рзБржд ржЯрж╛ржЗржк ржХрж░рзБржи `abcde`ред

ржкрзНрж░рж╢рзНржи: рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ ржХрзА рж╣ржмрзЗ?

ржЖржкржирж┐ ржпржжрж┐ ржнрж╛ржмрзЗржи `console.log(text)` ржкрж╛ржБржЪржмрж╛рж░ `abcde` ржжрзЗржЦрж╛ржмрзЗ, рждрж╛рж╣рж▓рзЗ ржнрзБрж▓ред ржЖрж╕рж▓рзЗ ржЖржкржирж┐ ржжрзЗржЦржмрзЗржи:

```
тП░ a
тП░ ab
тП░ abc
тП░ abcd
тП░ abcde
```

ЁЯСЙ ржХрж╛рж░ржг, **ржкрзНрж░рждрзНржпрзЗржХржЯрж┐ Effect рждрж╛рж░ рж╕ржорзЯрзЗрж░ `text` ржнрзНржпрж╛рж▓рзБ "ржмржирзНржжрж┐" ржХрж░рзЗ рж░рж╛ржЦрзЗ** (ржПржЗ ржзрж╛рж░ржгрж╛ржХрзЗ ржмрж▓рзЗ **Closure**)ред
ЁЯСЙ рждрж╛ржЗ `text` ржмржжрж▓рж╛рж▓рзЗржУ ржкрзБрж░ржирзЛ Effect рждрж╛рж░ ржкрзБрж░ржирзЛ ржорж╛ржи ржжрзЗржЦрж╛рзЯред

---

**рж╕рж╛рж░рж╛ржВрж╢:**

- Effect ржЪрж╛рж▓рзБ рж╣рж▓рзЗ ржПржЯрж┐ ржирж┐ржЬрж╕рзНржм рждржерзНржп ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЗред
- ржкрзБрж░ржирзЛ Effect ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ ржпржЦржи ржирждрзБржи Effect ржЪрж▓рзЗред
- Cleanup ржлрж╛ржВрж╢ржи ржирж╛ ржерж╛ржХрж▓рзЗ ржкрзБрж░ржирзЛ ржХрж╛ржЬржЧрзБрж▓рзЛ ржПржХрж╕рж╛ржерзЗ ржЪрж╛рж▓рзБ рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
- Closure-ржПрж░ ржЬржирзНржп ржкрзНрж░рждрж┐ржЯрж┐ Effect ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржЪрж▓рзЗ, ржПржХрзЗ ржЕржкрж░ржХрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░рзЗ ржирж╛ред

---
