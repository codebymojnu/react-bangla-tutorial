# Refs ржжрж┐рзЯрзЗ DOM ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛

React ржирж┐ржЬрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржУрзЯрзЗржмржкрзЗржЬ (DOM) ржЖржкржбрзЗржЯ ржХрж░рзЗред рждрж╛ржЗ рж╕рж╛ржзрж╛рж░ржгржнрж╛ржмрзЗ ржЖржкржирж╛ржХрзЗ DOM-ржПрж░ ржХрж┐ржЫрзБ ржХрж░рждрзЗ рж╣рзЯ ржирж╛ред

ржХрж┐ржирзНрждрзБ ржХрж┐ржЫрзБ рж╕ржорзЯ ржЖржкржирж┐ ржирж┐ржЬрзЗ DOM-ржП ржХрж╛ржЬ ржХрж░рждрзЗ ржЪрж╛ржЗрждрзЗ ржкрж╛рж░рзЗржиред ржпрзЗржоржи:

- ржПржХржЯрж╛ ржЗржиржкрзБржЯ ржмржХрзНрж╕рзЗ ржлрзЛржХрж╛рж╕ ржжрзЗржУрзЯрж╛
- рж╕рзНржХрзНрж░рж▓ ржХрж░рзЗ ржХрзЛржирзЛ ржЬрж╛рзЯржЧрж╛рзЯ ржирж┐рзЯрзЗ ржпрж╛ржУрзЯрж╛
- ржХрзЛржирзЛ ржбрж┐ржн-ржПрж░ ржЙржЪрзНржЪрждрж╛ ржмрж╛ ржЕржмрж╕рзНржерж╛ржи ржЬрж╛ржирж╛

ржПржЗ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рждрзЗ рж╣рж▓рзЗ ржЖржкржирж╛ржХрзЗ ржУржЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯржЯрж╛ржХрзЗ ржзрж░рждрзЗ рж╣ржмрзЗред ржЖрж░ ржПржЬржирзНржп рж▓рж╛ржЧрзЗ **ref**ред

---

**ржПржЗ ржЯржкрж┐ржХрзЗ ржЖржкржирж┐ ржпрж╛ рж╢рж┐ржЦржмрзЗржи:**

- ржХрзАржнрж╛ржмрзЗ React-ржП `ref` ржжрж┐рзЯрзЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржзрж░рж╛ ржпрж╛рзЯ
- `ref` ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржЖрж░ `useRef()` рж╣рзБржХ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
- ржХрзАржнрж╛ржмрзЗ ржЕржирзНржп ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржзрж░рж╛ ржпрж╛рзЯ
- ржХржЦржи React-ржПрж░ DOM-ржП ржирж┐ржЬрзЗ рж╣рж╛ржд ржжрзЗржУрзЯрж╛ ржирж┐рж░рж╛ржкржж

---

ржЖрж░рзЛ рж╕рж╣ржЬ ржХрж░рзЗ ржмрж▓рж▓рзЗ:
**ref рж╣рж▓рзЛ ржПржХржЯрж╛ ржЯрзБрж▓, ржпрзЗржЯрж╛ ржжрж┐рзЯрзЗ ржЖржкржирж┐ React-ржПрж░ ржнрзЗрждрж░рзЗ ржерж╛ржХрж╛ HTML ржПрж▓рж┐ржорзЗржирзНржЯржХрзЗ ржзрж░рждрзЗ ржкрж╛рж░рзЗржи ржПржмржВ ржжрж░ржХрж╛рж░ржорждрзЛ ржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред**

## DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ (ref) ржкрж╛ржУрзЯрж╛

React ржпржЦржи ржХрзЛржирзЛ DOM ржПрж▓рж┐ржорзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ, рждржЦржи рж╕рзЗржЯрж╛ ржзрж░рж╛рж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж╛ **ref** рж▓рж╛ржЧрзЗред

**ржзрж╛ржк рзз:** ржкрзНрж░ржержорзЗ `useRef` рж╣рзБржХржЯрж┐ ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзБржи:

```js
import { useRef } from "react";
```

**ржзрж╛ржк рзи:** ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрзЗрждрж░рзЗ `useRef` ржжрж┐рзЯрзЗ ржПржХржЯрж┐ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ рждрзИрж░рж┐ ржХрж░рзБржи:

```js
const myRef = useRef(null);
```

**ржзрж╛ржк рзй:** ржЖржкржирж┐ ржпрзЗржЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржкрзЗрждрзЗ ржЪрж╛ржи, рж╕рзЗржЦрж╛ржирзЗ `ref={myRef}` ржжрж┐рзЯрзЗ рж╕рзЗржЯрж┐ ржпрзБржХрзНржд ржХрж░рзБржи:

```js
<div ref={myRef}>
```

`useRef` ржПржХржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ, ржпрж╛рж░ ржоржзрзНржпрзЗ `current` ржирж╛ржорзЗ ржПржХржЯрж┐ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржерж╛ржХрзЗред
рж╢рзБрж░рзБрждрзЗ `myRef.current` рж╣рзЯ `null`ред
React ржпржЦржи `<div>` рждрзИрж░рж┐ ржХрж░рзЗ, рждржЦржи рж╕рзЗржЯрж╛рж░ DOM ржПрж▓рж┐ржорзЗржирзНржЯржЯрж╛ `myRef.current`-ржПрж░ ржоржзрзНржпрзЗ рж░рзЗржЦрзЗ ржжрзЗрзЯред

ржПржЦржи ржЖржкржирж┐ ржПржЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯржХрзЗ ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░рзЗрж░ ржнрж┐рждрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

ржЙржжрж╛рж╣рж░ржг:

```js
// рж╕рзНржХрзНрж░рж▓ ржХрж░рзЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯржХрзЗ ржжрзГрж╢рзНржпржорж╛ржи ржХрж░рж╛
myRef.current.scrollIntoView();
```

---

### ржЙржжрж╛рж╣рж░ржг: ржЗржиржкрзБржЯрзЗ ржлрзЛржХрж╛рж╕ ржжрзЗржУрзЯрж╛

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ ржмрзЛрждрж╛ржорзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржЗржиржкрзБржЯ ржмржХрзНрж╕рзЗ ржлрзЛржХрж╛рж╕ ржЪрж▓рзЗ ржпрж╛ржмрзЗред

```js
import { useRef } from "react";

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus(); // ржЗржиржкрзБржЯрзЗ ржлрзЛржХрж╛рж╕ ржжрзЗржУрзЯрж╛
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

**ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:**

1. `useRef` ржжрж┐рзЯрзЗ `inputRef` ржмрж╛ржирж╛рж▓рж╛ржоред
2. `<input ref={inputRef}>` рж▓рж┐ржЦрзЗ ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржбрзЗрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ рждрзИрж░рж┐ ржХрж░рж▓рж╛ржоред
3. `handleClick` ржлрж╛ржВрж╢ржирзЗ `inputRef.current.focus()` ржжрж┐рзЯрзЗ ржЗржиржкрзБржЯрзЗ ржлрзЛржХрж╛рж╕ ржжрж┐рж▓рж╛ржоред
4. `onClick={handleClick}` ржжрж┐рзЯрзЗ ржмрж╛ржЯржирзЗрж░ рж╕рж╛ржерзЗ ржЗржнрзЗржирзНржЯ ржпрзБржХрзНржд ржХрж░рж▓рж╛ржоред

---

### ржЙржжрж╛рж╣рж░ржг: ржХрзЛржирзЛ ржЫржмрж┐рждрзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рж╛

ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ рждрж┐ржиржЯрж┐ ржмрж┐рзЬрж╛рж▓рзЗрж░ ржЫржмрж┐ ржЖржЫрзЗред ржкрзНрж░рждрж┐ржЯрж┐ ржмрзЛрждрж╛ржорзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЫржмрж┐рждрзЗ рж╕рзНржХрзНрж░рж▓ рж╣ржмрзЗред

```js
import { useRef } from "react";

export default function CatFriends() {
  const firstCatRef = useRef(null);
  const secondCatRef = useRef(null);
  const thirdCatRef = useRef(null);

  function handleScrollToFirstCat() {
    firstCatRef.current.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center",
    });
  }

  function handleScrollToSecondCat() {
    secondCatRef.current.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center",
    });
  }

  function handleScrollToThirdCat() {
    thirdCatRef.current.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center",
    });
  }

  return (
    <>
      <nav>
        <button onClick={handleScrollToFirstCat}>Tom</button>
        <button onClick={handleScrollToSecondCat}>Maru</button>
        <button onClick={handleScrollToThirdCat}>Jellylorum</button>
      </nav>
      <div>
        <ul>
          <li>
            <img
              src="https://placekitten.com/g/200/200"
              alt="Tom"
              ref={firstCatRef}
            />
          </li>
          <li>
            <img
              src="https://placekitten.com/g/300/200"
              alt="Maru"
              ref={secondCatRef}
            />
          </li>
          <li>
            <img
              src="https://placekitten.com/g/250/200"
              alt="Jellylorum"
              ref={thirdCatRef}
            />
          </li>
        </ul>
      </div>
    </>
  );
}
```

**CSS (рж╢рзБржзрзБ ржбрж┐ржЬрж╛ржЗржирзЗрж░ ржЬржирзНржп):**

```css
div {
  width: 100%;
  overflow: hidden;
}

nav {
  text-align: center;
}

button {
  margin: 0.25rem;
}

ul,
li {
  list-style: none;
  white-space: nowrap;
}

li {
  display: inline;
  padding: 0.5rem;
}
```

---

ржПржЗржнрж╛ржмрзЗржЗ `useRef` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ DOM-ржП ржлрзЛржХрж╛рж╕, рж╕рзНржХрзНрж░рж▓, ржЕржержмрж╛ ржорж╛ржк ржирзЗржУрзЯрж╛рж░ ржорждрзЛ ржХрж╛ржЬ рж╕рж╣ржЬрзЗржЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

ржПржЦрж╛ржирзЗ React-ржП `ref` ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржПржХржЯрж┐ ржЙржирзНржиржд ржЯржкрж┐ржХ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗтАФ

### ржХрж┐ржнрж╛ржмрзЗ ржПржХржЯрж┐ рждрж╛рж▓рж┐ржХрж╛рж░ ржЬржирзНржп ржЕржирзЗржХржЧрзБрж▓рзЛ `ref` ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ рж╣ржпрж╝ `ref callback` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

---

{/* how-to-manage-a-list-of-refs-using-a-ref-callback */}

ржЙржкрж░рзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛрждрзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐ред ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ рж╕ржоржпрж╝ ржПржоржи рж╣рждрзЗ ржкрж╛рж░рзЗ ржпрзЗ, ржЖржкржирж╛рж░ ржПржХржЯрж┐ рждрж╛рж▓рж┐ржХрж╛рж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗрж░ ржЬржирзНржп `ref` ржжрж░ржХрж╛рж░, ржПржмржВ ржЖржкржирж┐ ржЬрж╛ржирзЗржи ржирж╛ ржЖржЗржЯрзЗржо ржХрждржЧрзБрж▓рзЛ рж╣ржмрзЗред ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ **ржЪрж▓ржмрзЗ ржирж╛**:

```js
<ul>
  {items.map((item) => {
    // ржЪрж▓ржмрзЗ ржирж╛!
    const ref = useRef(null);
    return <li ref={ref} />;
  })}
</ul>
```

ржХрж╛рж░ржг рж╣рж▓рзЛ:
**React-ржПрж░ Hooks рж╕ржмрж╕ржорзЯ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржЯржк-рж▓рзЗржнрзЗрж▓рзЗ ржХрж▓ ржХрж░рждрзЗ рж╣рзЯред** ржЖржкржирж┐ `useRef` ржХрзЗ ржХрзЛржирзЛ рж▓рзБржк, рж╢рж░рзНржд (if), ржЕржержмрж╛ `map()` ржПрж░ ржнрж┐рждрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред

ржПрж░ ржПржХржЯрж┐ рж╕ржорж╛ржзрж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗтАФрждрж╛рж▓рж┐ржХрж╛рж░ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржПрж▓рж┐ржорзЗржирзНржЯрзЗрж░ ржПржХржЯрж┐ `ref` рж░рж╛ржЦрж╛ ржПржмржВ рждрж╛рж░ржкрж░ DOM ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи ржХрж░рзЗ [`querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржЪрж╛ржЗрж▓рзНржбржХрзЗ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛ред ржХрж┐ржирзНрждрзБ ржПржЗ ржкржжрзНржзрждрж┐ ржЭрзБржБржХрж┐ржкрзВрж░рзНржг, ржХрж╛рж░ржг DOM рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржПржЗ ржХрзЛржб ржнрзЗржЩрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

**ржЖрж░рзЗржХржЯрж┐ ржнрж╛рж▓рзЛ рж╕ржорж╛ржзрж╛ржи рж╣рж▓рзЛ:**
`ref` ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржПржХржЯрж┐ **function (callback)** ржкрж╛ржарж╛ржирзЛред ржПржЯрж┐ржХрзЗ ржмрж▓рзЗ [`ref callback`](https://react.dev/reference/react-dom/components/common#ref-callback)ред
React ржпржЦржи DOM ржирзЛржб рждрзИрж░рж┐ ржХрж░рзЗ рждржЦржи ржПржЗ ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж▓ ржХрж░рзЗ ржПржмржВ `node` ржкрж╛ржарж╛рзЯред ржпржЦржи DOM ржерзЗржХрзЗ рж╕рж░рж╛ржирзЛ рж╣ржпрж╝, рждржЦржи `null` ржкрж╛ржарж╛рзЯред ржЖржкржирж┐ ржПржЗржнрж╛ржмрзЗ `Map` ржмрж╛ ржЕрзНржпрж╛рж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕ржм `ref` ржЯрзНрж░рзНржпрж╛ржХ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред

ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржжрзЗржЦрж╛ржпрж╝ ржХрж┐ржнрж╛ржмрзЗ ржЖржкржирж┐ ржПржЗ ржкржжрзНржзрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржжрзАрж░рзНржШ рждрж╛рж▓рж┐ржХрж╛рж░ ржпрзЗржХрзЛржирзЛ ржирзЛржбрзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

---

#### ржЙржжрж╛рж╣рж░ржг (React):

```js
import { useRef, useState } from "react";

export default function CatFriends() {
  const itemsRef = useRef(null); // Map рж░рж╛ржЦрж╛рж░ ржЬржирзНржп
  const [catList, setCatList] = useState(setupCatList); // рззрзжржЯрж╛ ржмрж┐ржбрж╝рж╛рж▓рзЗрж░ рж▓рж┐рж╕рзНржЯ

  function scrollToCat(cat) {
    const map = getMap();
    const node = map.get(cat); // рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ DOM node ржкрж╛ржУрзЯрж╛
    node.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center",
    });
  }

  function getMap() {
    if (!itemsRef.current) {
      // ржкрзНрж░ржержоржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ рж╣рж▓рзЗ Map рждрзИрж░рж┐ ржХрж░рзЛ
      itemsRef.current = new Map();
    }
    return itemsRef.current;
  }

  return (
    <>
      <nav>
        <button onClick={() => scrollToCat(catList[0])}>Tom</button>
        <button onClick={() => scrollToCat(catList[5])}>Maru</button>
        <button onClick={() => scrollToCat(catList[9])}>Jellylorum</button>
      </nav>
      <div>
        <ul>
          {catList.map((cat) => (
            <li
              key={cat}
              ref={(node) => {
                const map = getMap();
                if (node) {
                  map.set(cat, node); // Map-ржП DOM node рж╕рзЗржЯ ржХрж░рзЛ
                } else {
                  map.delete(cat); // node ржирж╛ ржерж╛ржХрж▓рзЗ Map ржерзЗржХрзЗ рж╕рж░рж╛ржУ
                }
              }}
            >
              <img src={cat} />
            </li>
          ))}
        </ul>
      </div>
    </>
  );
}

function setupCatList() {
  const catList = [];
  for (let i = 0; i < 10; i++) {
    catList.push("https://loremflickr.com/320/240/cat?lock=" + i);
  }

  return catList;
}
```

---

#### ржмрзНржпрж╛ржЦрзНржпрж╛:

ржПржЦрж╛ржирзЗ `itemsRef` ржЖрж╕рж▓рзЗ ржХрзЛржирзЛ DOM node рж░рж╛ржЦрзЗ ржирж╛ред ржПржЯрж┐ ржПржХржЯрж┐ [Map](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map) рж░рж╛ржЦрзЗ ржпрзЗржЦрж╛ржирзЗ `key` рж╣ржЪрзНржЫрзЗ ржХрзНржпрж╛ржЯ ржЖржЗржбрж┐ ржЖрж░ `value` рж╣ржЪрзНржЫрзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ DOM ржирзЛржбред

ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ рж╣рж▓рзЛ `ref callback` ржпрзЗржЯрж╛ ржкрзНрж░рждрж┐ржЯрж┐ `li`-рждрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:

```js
<li
  key={cat}
  ref={node => {
    const map = getMap();
    if (node) {
      map.set(cat, node); // Map-ржП ржпрзЛржЧ ржХрж░рзЛ
    } else {
      map.delete(cat); // Map ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рзЛ
    }
  }}
>
```

---

#### ржмрж┐ржХрж▓рзНржк ржЙржкрж╛ржпрж╝: ржХрзНрж▓рж┐ржиржЖржк ржлрж╛ржВрж╢ржи рж╕рж╣ `ref callback`

```js
<li
  key={cat.id}
  ref={node => {
    const map = getMap();
    map.set(cat, node);

    return () => {
      map.delete(cat); // ржХрзНрж▓рж┐ржиржЖржк: ржЖржиржорж╛ржЙржирзНржЯ рж╣рж▓рзЗ Map ржерзЗржХрзЗ рж╕рж░рж╛ржУ
    };
  }}
>
```

---

ржПржЗржнрж╛ржмрзЗ ржЖржкржирж┐ ржбрж╛ржЗржирж╛ржорж┐ржХ рж╕ржВржЦрзНржпржХ `ref` ржЦрзБржм рж╕рж╣ржЬрзЗ ржПржмржВ ржирж┐рж░рж╛ржкржжржнрж╛ржмрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

ржирж┐ржЪрзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржЙржкрж░рзЗрж░ ржЗржВрж░рзЗржЬрж┐ React ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи ржЕржВрж╢ржЯрж┐рж░ ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж, ржпрж╛рждрзЗ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрж┐рж╖рзЯржЯрж┐ ржмрзЛржЭрж╛ ржпрж╛рзЯ:

---

## ржЕржирзНржп ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ DOM ржирзЛржбрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржкрж╛ржУрзЯрж╛ {/* accessing-another-components-dom-nodes */}

ржпржЦржи ржЖржкржирж┐ ржХрзЛржиржУ ржмрж┐рж▓рзНржЯ-ржЗржи ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ (ржпрзЗржоржи `<input />`) `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржЦржи React рж╕рзЗржЗ `ref` ржПрж░ `current` ржкрзНрж░ржкрж╛рж░рзНржЯрж┐рждрзЗ рж╕рзЗржЗ DOM ржПрж▓рж┐ржорзЗржирзНржЯржЯрж┐ рж╕рзЗржЯ ржХрж░рзЗ ржжрзЗрзЯ (ржпрзЗржоржи ржмрж╛рж╕рзНрждржмрзЗрж░ `<input>` ржПрж▓рж┐ржорзЗржирзНржЯржЯрж┐)ред

ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржпржжрж┐ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржХрж░рж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ (ржпрзЗржоржи `<MyInput />`) `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржЪрж╛ржи, рждрж╛рж╣рж▓рзЗ **ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ рж╕рзЗржЯрж╛ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛**, ржПржмржВ `ref.current` рж╣ржмрзЗ `null`ред ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗржУ ржЗржиржкрзБржЯ ржлрзЛржХрж╛рж╕ рж╣рзЯ ржирж╛:

```js
import { useRef } from "react";

function MyInput(props) {
  return <input {...props} />;
}

export default function MyForm() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

React ржХржирж╕рзЛрж▓рзЗ ржП рж╕ржорзЯ ржПржХржЯрж┐ рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛ржУ ржжрзЗржЦрж╛рзЯ:

> тЪая╕П Warning: Function components cannot be given refs... Did you mean to use React.forwardRef()?

ржПржЗ рж╕ржорж╕рзНржпрж╛ржЯрж┐ рж╣рзЯ ржХрж╛рж░ржг React ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржЕржирзНржп ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ DOM ржирзЛржбрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржжрзЗрзЯ ржирж╛тАФeven ржпржжрж┐ рж╕рзЗржЯрж╛ ржирж┐ржЬрзЗрж░ ржЪрж╛ржЗрж▓рзНржб ржХржорзНржкрзЛржирзЗржирзНржЯржУ рж╣рзЯ! ржПржЯрж┐ ржЗржЪрзНржЫрж╛ржХрзГржд, ржХрж╛рж░ржг `ref` ржорзВрж▓ржд "escape hatch" ржпрж╛ рж╕рждрж░рзНржХржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐рждред

### рж╕ржорж╛ржзрж╛ржи: `forwardRef` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

ржпржжрж┐ ржЖржкржирж┐ ржЪрж╛ржи ржпрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ рждрж╛рж░ DOM рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рзБржХ, рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛ржХрзЗ `forwardRef` ржжрж┐рзЯрзЗ рж╕рзЗржЗ ржЗржЪрзНржЫрж╛ ржкрзНрж░ржХрж╛рж╢ ржХрж░рждрзЗ рж╣ржмрзЗред ржирж┐ржЪрзЗ `MyInput`-ржХрзЗ `forwardRef` ржжрж┐рзЯрзЗ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ:

```js
const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});
```

ржПржЦржи ржПржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:

1. `<MyInput ref={inputRef} />` тАФ React ржПржЦржи ржмрзБржЭржмрзЗ ржпрзЗ `inputRef.current` ржП ржЗржиржкрзБржЯ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржерж╛ржХржмрзЗред
2. `MyInput` ржХржорзНржкрзЛржирзЗржирзНржЯ `forwardRef` ржжрж┐рзЯрзЗ рждрзИрж░рж┐, рждрж╛ржЗ ржПржЯрж┐ ржжрзНржмрж┐рждрзАрзЯ ржЖрж░рзНржЧрзБржорзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ `ref` ржкрж╛рзЯред
3. рж╕рзЗржЗ `ref` ржЗржиржкрзБржЯ DOM ржирзЛржбрзЗ ржлрж░ржУрзЯрж╛рж░рзНржб ржХрж░рж╛ рж╣рзЯред

```js
import { forwardRef, useRef } from "react";

const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

ржПржЗ ржЯрзЗржХржирж┐ржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржбрж┐ржЬрж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯ, ржпрзЗржЦрж╛ржирзЗ рж▓рзЛ-рж▓рзЗржнрзЗрж▓ ржХржорзНржкрзЛржирзЗржирзНржЯ (ржпрзЗржоржи `Button`, `Input`) рждрж╛ржжрзЗрж░ DOM рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рзЗред рждржмрзЗ рж╣рж╛ржЗ-рж▓рзЗржнрзЗрж▓ ржХржорзНржкрзЛржирзЗржирзНржЯ (ржпрзЗржоржи `Form`, `Page`) рж╕рж╛ржзрж╛рж░ржгржд рждрж╛ ржХрж░рзЗ ржирж╛, ржпрж╛рждрзЗ DOM рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░рзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржирж╛ рждрзИрж░рж┐ рж╣рзЯред

---

### `useImperativeHandle` ржжрж┐рзЯрзЗ ржХрж╛рж╕рзНржЯржо API ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рж╛ {/* exposing-a-subset-of-the-api-with-an-imperative-handle */}

ржЙржкрж░рзЗ `MyInput` ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзБрж░рзЛ ржЗржиржкрзБржЯ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржПржХрзНрж╕ржкрзЛржЬ ржХрж░ржЫрж┐рж▓ред ржлрж▓рзЗ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╢рзБржзрзБ `focus()` ржирж╛, ржмрж░ржВ ржЕржирзНржп ржХрж╛ржЬржУ ржХрж░рждрзЗ ржкрж╛рж░ржд ржпрзЗржоржи рж╕рзНржЯрж╛ржЗрж▓ ржмржжрж▓рж╛ржирзЛред ржпржжрж┐ ржЖржкржирж┐ ржЪрж╛ржи ржХрзЗржмрж▓ ржХрж┐ржЫрзБ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж╛ржВрж╢ржиржЗ ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рждрзЗ, рждрж╛рж╣рж▓рзЗ `useImperativeHandle` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```js
import { forwardRef, useRef, useImperativeHandle } from "react";

const MyInput = forwardRef((props, ref) => {
  const realInputRef = useRef(null);
  useImperativeHandle(ref, () => ({
    // рж╢рзБржзрзБ focus ржлрж╛ржВрж╢ржи ржПржХрзНрж╕ржкрзЛржЬ ржХрж░ржЫрж┐
    focus() {
      realInputRef.current.focus();
    },
  }));
  return <input {...props} ref={realInputRef} />;
});

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

ржПржЦрж╛ржирзЗ `realInputRef` рж╣ржЪрзНржЫрзЗ ржЗржиржкрзБржЯрзЗрж░ ржЖрж╕рж▓ DOM ржирзЛржбред ржХрж┐ржирзНрждрзБ `useImperativeHandle` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржПржоржи ржПржХржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗржЫрж┐ ржпрзЗржЯрж╛ рж╢рзБржзрзБ `focus()` ржлрж╛ржВрж╢ржи ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рзЗред ржлрж▓рзЗ `inputRef.current` рж╣ржЪрзНржЫрзЗ ржПржХржЯрж╛ ржХрж╛рж╕рзНржЯржо ржЕржмржЬрзЗржХрзНржЯ, ржЗржиржкрзБржЯ DOM ржирзЛржб ржирзЯред

---

ржЕржмрж╢рзНржпржЗ! ржирж┐ржЪрзЗ ржЙржкрж░рзЗрж░ ржЗржВрж░рзЗржЬрж┐ ржЕржВрж╢ржЯрж┐рж░ рж╕рж╣ржЬ ржУ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржмрж╛ржВрж▓рж╛рзЯ ржЕржирзБржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ ржпрзЗржи ржЖржкржирж┐ рж╕рж╣ржЬрзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗржи:

---

## ржХржЦржи React `ref` рж╕рзЗржЯ ржХрж░рзЗ {/* when-react-attaches-the-refs */}

React-ржП ржкрзНрж░рждрж┐ржмрж╛рж░ ржЖржкржбрзЗржЯ ржжрзБржЗ ржзрж╛ржкрзЗ рж╣рзЯ:

1. **Render ржзрж╛ржкрзЗ**, React ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ UI-рждрзЗ ржХрзА ржжрзЗржЦрж╛рждрзЗ рж╣ржмрзЗред
2. **Commit ржзрж╛ржкрзЗ**, React DOM-ржП ржкрж░рж┐ржмрж░рзНрждржиржЧрзБрж▓рзЛ ржмрж╛рж╕рзНрждржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗред

> ЁЯСЙ рждрж╛ржЗ ржЖржкржирж┐ ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржХрзЛржб рж▓рж┐ржЦржЫрзЗржи, рждржЦржи `ref.current` ржП DOM node ржерж╛ржХржмрзЗ ржирж╛ред ржкрзНрж░ржержоржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ `ref.current` рж╣ржмрзЗ `null`ред

React `ref.current`-ржХрзЗ рждржЦржиржЗ рж╕рзЗржЯ ржХрж░рзЗ ржпржЦржи DOM ржЖржкржбрзЗржЯ рж╣рзЯ (ржорж╛ржирзЗ **commit ржзрж╛ржкрзЗ**)ред ржПрж░ ржЖржЧрзЗ рж╕рзЗржЯрж╛ржХрзЗ `null` ржХрж░рзЗ ржжрзЗрзЯ, ржкрж░рзЗ ржЖржмрж╛рж░ рж╕рзЗржЯ ржХрж░рзЗ DOM node-ржПред

### тЬЕ ржХржЦржи `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

- рж╕рж╛ржзрж╛рж░ржгржд `ref` ржЖржкржирж┐ **event handler** (ржпрзЗржоржи `onClick`) ржмрж╛ `useEffect()` ржПрж░ ржнрзЗрждрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржиред
- ржХрж╛рж░ржг ржПржЗ рж╕ржорзЯрзЗржЗ DOM рждрзИрж░рж┐ ржмрж╛ ржЖржкржбрзЗржЯ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ, рждрж╛ржЗ ржЖржкржирж┐ ржирж┐рж░рж╛ржкржжрзЗ рж╕рзЗржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

---

### ЁЯОп ржЙржжрж╛рж╣рж░ржг: ржпржЦржи рж╕рзНржХрзНрж░рж▓ ржПржХ ржзрж╛ржк ржкрж┐ржЫрж┐рзЯрзЗ ржпрж╛рзЯ

ржзрж░рзБржи ржЖржкржирж┐ ржПржХржЯрж┐ ржЯрзБржбрзБ рж▓рж┐рж╕рзНржЯ ржмрж╛ржирж╛рж▓рзЗржи, ржирждрзБржи ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░рзЗ рж▓рж┐рж╕рзНржЯрзЗрж░ ржПржХржжржо ржирж┐ржЪрзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рждрзЗ ржЪрж╛ржиред ржХрж┐ржирзНрждрзБ ржирж┐ржЪрзЗрж░ ржХрзЛржбрзЗ рж╕рзНржХрзНрж░рж▓ рж╣рзЯ ржПржХ ржзрж╛ржк ржкрж┐ржЫржирзЗрж░ ржЖржЗржЯрзЗржорзЗ:

```js
setTodos([...todos, newTodo]);
listRef.current.lastChild.scrollIntoView();
```

**рж╕ржорж╕рзНржпрж╛ ржХрзА?**
`setTodos` рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ DOM ржЖржкржбрзЗржЯ ржХрж░рзЗ ржирж╛ тАФ ржмрж░ржВ React ржПржЯрж┐ "queue" ржХрж░рзЗред рждрж╛ржЗ ржпржЦржи ржЖржкржирж┐ рж╕рзНржХрзНрж░рж▓ ржХрж░рждрзЗ ржпрж╛ржи, рждржЦржиржУ ржирждрзБржи ржЖржЗржЯрзЗржо DOM-ржП ржпрзБржХрзНржд рж╣рзЯржирж┐ред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи: `flushSync` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

`flushSync()` React-ржХрзЗ ржмрж▓рзЗ тАФ ржПржЦржиржЗ DOM ржЖржкржбрзЗржЯ ржХрж░рзЛ!

```js
flushSync(() => {
  setTodos([...todos, newTodo]);
});
listRef.current.lastChild.scrollIntoView();
```

ржПржнрж╛ржмрзЗ ржХрж░рж▓рзЗ React рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ DOM ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ ржЖржкржирж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж╕рзНржХрзНрж░рж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирждрзБржи ржЯрзБржбрзБ-рждрзЗред

---

### ЁЯУМ рж╕рж╛рж░рж╛ржВрж╢:

| ржмрж┐рж╖рзЯ                | ржмрзНржпрж╛ржЦрзНржпрж╛                                    |
| ------------------- | ------------------------------------------- |
| `ref.current`       | рж░рзЗржирзНржбрж╛рж░ ржлрзЗржЬрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржирж╛, ржХржорж┐ржЯ ржлрзЗржЬрзЗ рж╕рзЗржЯ рж╣рзЯ |
| `setState`          | рждрж╛рзОржХрзНрж╖ржгрж┐ржХ DOM ржЖржкржбрзЗржЯ ржХрж░рзЗ ржирж╛                  |
| `flushSync`         | DOM-ржП рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ      |
| `ref` ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржорзЯ | Event handler ржмрж╛ `useEffect()`-ржП            |

---

ржЖржкржирж┐ ржХрж┐ ржЪрж╛ржи, ржПржЗ ржЕржирзБржмрж╛ржжржЧрзБрж▓рзЛржХрзЗ ржЖржорж┐ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрж╛ржВрж▓рж╛ React ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓ ржмржЗрзЯрзЗрж░ ржорждрзЛ рж╕рж╛ржЬрж┐рзЯрзЗ ржжрзЗржЗ?

ржирж┐рж╢рзНржЪрж┐рждржнрж╛ржмрзЗ! ржирж┐ржЪрзЗ ржЙржкрж░рзЗрж░ ржЕржВрж╢ржЯрж┐ **ржмрж╛ржВрж▓рж╛ React ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓ ржмржЗрзЯрзЗрж░ ржорждрзЛ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ** ржЕржирзБржмрж╛ржж ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ, ржпрзЗржи ржЖржкржирж┐ рж╢рзЗржЦрж╛рж░ рж╕ржорзЯ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржирж╛ рж╣рзЯ:

---

## ЁЯФН рж░рзЗржлрж╛рж░рзЗржирзНрж╕ (refs) ржжрж┐рзЯрзЗ DOM ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛рж░ рж╕ржарж┐ржХ ржирж┐рзЯржо

{/* best-practices-for-dom-manipulation-with-refs */}

React-ржП `ref` рж╣рж▓ ржПржХ ржзрж░ржирзЗрж░ **ржмрж┐ржХрж▓рзНржк ржжрж░ржЬрж╛** (escape hatch)ред ржЖржкржирж┐ ржпржЦржи React-ржПрж░ рж╕рж╛ржзрж╛рж░ржг ржирж┐ржпрж╝ржо ржжрж┐рзЯрзЗ ржХрзЛржирзЛ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржирж╛, рждржЦржи `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред

### ЁЯОп ржХржЦржи `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

- ржлрзЛржХрж╛рж╕ (focus) ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ
- рж╕рзНржХрзНрж░рж▓ ржкржЬрж┐рж╢ржи ржарж┐ржХ ржХрж░рждрзЗ
- ржХрзЛржирзЛ ржмрзНрж░рж╛ржЙржЬрж╛рж░ API ржХрж▓ ржХрж░рждрзЗ ржпрж╛ React рж╕рж░рж╛рж╕рж░рж┐ ржжрзЗрзЯ ржирж╛

**рждржмрзЗ рж╕рж╛ржмржзрж╛ржи!**
ржпржжрж┐ ржЖржкржирж┐ рж╢рзБржзрзБ ржлрзЛржХрж╛рж╕ ржмрж╛ рж╕рзНржХрзНрж░рж▓ ржХрж░рж╛рж░ ржорждрзЛ ржирж┐рж░рзАрж╣ ржХрж╛ржЬ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ ржирж╛ред
ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржпржжрж┐ **DOM ржирж┐ржЬрзЗ ржерзЗржХрзЗ ржкрж░рж┐ржмрж░рзНрждржи** ржХрж░рждрзЗ ржпрж╛ржи (React ржХрзЗ ржирж╛ ржЬрж╛ржирж┐рзЯрзЗ), рждржЦржи React-ржПрж░ рж╕рж╛ржерзЗ ржЖржкржирж╛рж░ ржХрзЛржбрзЗрж░ рж╕ржВржШрж░рзНрж╖ (conflict) рж╣рждрзЗ ржкрж╛рж░рзЗред

---

### тЭМ ржЦрж╛рж░рж╛ржк ржЙржжрж╛рж╣рж░ржг: DOM ржирж┐ржЬрзЗ ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛

ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ ржжрзБржЯрж┐ ржмрж╛ржЯржи ржЖржЫрзЗ:

- ржкрзНрж░ржержо ржмрж╛ржЯржи React ржПрж░ `setState` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрзЗржХрзНрж╕ржЯ ржжрзЗржЦрж╛рзЯ ржмрж╛ рж▓рзБржХрж╛рзЯред
- ржжрзНржмрж┐рждрзАрзЯ ржмрж╛ржЯржи рж╕рж░рж╛рж╕рж░рж┐ DOM ржерзЗржХрзЗ `remove()` ржжрж┐рзЯрзЗ ржорзБржЫрзЗ ржжрзЗрзЯ, React ржХрзЗ ржирж╛ ржЬрж╛ржирж┐рзЯрзЗред

ЁЯСЗ ржХрзЛржбржЯрж╛ ржжрзЗржЦрзБржи:

```jsx
import { useState, useRef } from "react";

export default function Counter() {
  const [show, setShow] = useState(true);
  const ref = useRef(null);

  return (
    <div>
      <button onClick={() => setShow(!show)}>Toggle with setState</button>
      <button onClick={() => ref.current.remove()}>Remove from the DOM</button>
      {show && <p ref={ref}>Hello world</p>}
    </div>
  );
}
```

**ржпржЦржи ржЖржкржирж┐ `Remove from the DOM` ржХрзНрж▓рж┐ржХ ржХрж░ржмрзЗржи,** рждржЦржи `Hello world` ржкрзНржпрж╛рж░рж╛ржЧрзНрж░рж╛ржл React ржПрж░ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ DOM ржерзЗржХрзЗ ржорзБржЫрзЗ ржпрж╛ржмрзЗред

ржПрж░ржкрж░ ржЖржмрж╛рж░ ржпржжрж┐ ржЖржкржирж┐ `Toggle with setState` ржжрж┐рзЯрзЗ рж╕рзЗржЯрж╛ ржлрзЗрж░ржд ржЖржирж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗржи тАФ рждржЦржи ржЕрзНржпрж╛ржк ржХрзНрж░рзНржпрж╛рж╢ ржХрж░ржмрзЗ!

### тЪая╕П ржХрзЗржи ржПржоржи рж╣рзЯ?

ржХрж╛рж░ржг ржЖржкржирж┐ React ржПрж░ ржЬрж╛ржирж╛ DOM ржЧржаржи ржнрзЗржЩрзЗ ржжрж┐рзЯрзЗржЫрзЗржиред React ржЬрж╛ржирзЗржЗ ржирж╛, DOM ржерзЗржХрзЗ ржУржЗ ржкрзНржпрж╛рж░рж╛ржЧрзНрж░рж╛ржл ржЙржзрж╛ржУ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред рждрж╛ржЗ рж╕рзЗ ржарж┐ржХржнрж╛ржмрзЗ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред

---

## тЬЕ ржХрзА ржХрж░рж╛ ржЙржЪрж┐ржд?

| ржХрж░ржмрзЗржи                                                     | ржХрж░ржмрзЗржи ржирж╛                                            |
| --------------------------------------------------------- | --------------------------------------------------- |
| `ref` ржжрж┐рзЯрзЗ ржлрзЛржХрж╛рж╕, рж╕рзНржХрзНрж░рж▓, ржорж╛ржк ржирзЗржУрзЯрж╛рж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзБржи         | DOM ржерзЗржХрзЗ ржирж┐ржЬрзЗ рж╣рж╛рждрзЗ `remove()` ржХрж░ржмрзЗржи ржирж╛              |
| React ржпрзЗрж╕ржм DOM ржПрж▓рж┐ржорзЗржирзНржЯрзЗ рж╣рж╛ржд ржжрзЗрзЯ ржирж╛, рж╕рзЗржЦрж╛ржирзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи | React-ржПрж░ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмрзЗржи ржирж╛ |

---

### тЬЕ ржЙржжрж╛рж╣рж░ржг: ржХржЦржи ржЖржкржирж┐ ржирж┐рж░рж╛ржкржжрзЗ DOM ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржи?

ржзрж░рзБржи ржЖржкржирж╛рж░ JSX-ржП ржПржоржи ржПржХржЯрж╛ `<div>` ржЖржЫрзЗ ржпрзЗржЯрж╛ рж╕ржмрж╕ржорзЯ ржЦрж╛рж▓рж┐ ржерж╛ржХржмрзЗ:

```jsx
<div ref={myRef}></div>
```

ржПржЦрж╛ржирзЗ React ржХрж┐ржЫрзБ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзЗ ржирж╛, ржорж╛ржирзЗ ржПржЯрж╛ React-ржПрж░ "рж░рж╛ржбрж╛рж░рзЗ" ржирзЗржЗред ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЦрж╛ржирзЗржЗ ржирж┐ржЬрзЗ DOM ржпрзЛржЧ ржмрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржи тАФ ржПржЯрж╛ ржирж┐рж░рж╛ржкржжред

---

## ЁЯУМ рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзБржи

тЬЕ рж░рзЗржл ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзА ржХрж░ржмрзЗржи ржЖрж░ ржХрзА ржХрж░ржмрзЗржи ржирж╛:

- `ref` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ DOM ржПрж▓рж┐ржорзЗржирзНржЯ ржзрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржи тЖТ `myRef.current`
- React ржПрж░ JSX-ржП `<div ref={myRef}>` ржжрж┐рзЯрзЗ рж╕рзЗржЯ ржХрж░рждрзЗ рж╣рзЯ
- ржлрзЛржХрж╛рж╕, рж╕рзНржХрзНрж░рж▓, ржорж╛ржк ржирзЗржУрзЯрж╛ тАФ ржПрж╕ржм `ref` ржжрж┐рзЯрзЗ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржХрж░рж╛ ржпрж╛рзЯ
- `forwardRef` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржмрж╛ржЗрж░рзЗрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржирж┐рждрзЗ ржкрж╛рж░рзЗ
- React ржпрзЗ DOM ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ, рж╕рзЗржЯрж╛ржХрзЗ ржирж┐ржЬрзЗ ржерзЗржХрзЗ ржоржбрж┐ржлрж╛ржЗ ржХрж░ржмрзЗржи ржирж╛
- ржпржжрж┐ ржХрж░рждрзЗржЗ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржПржоржи DOM ржмржжрж▓рж╛ржи ржпрзЗржЦрж╛ржирзЗ React ржХрж┐ржЫрзБ ржХрж░рзЗ ржирж╛

---

ржПржЗржнрж╛ржмрзЗ ржЖржкржирж┐ React ржПрж░ `ref` рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ ржмрзБржЭрзЗ-рж╢рзБржирзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи тАФ **ржмрж┐ржирж╛рж╢ ржирж╛ ржХрж░рзЗ, рж╕ржарж┐ржХ ржЙржкрж╛рзЯрзЗред**
