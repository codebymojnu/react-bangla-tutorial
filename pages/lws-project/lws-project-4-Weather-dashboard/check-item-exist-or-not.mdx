ржПржХржжржо **ржжрж╛рж░рзБржг ржкрзНрж░рж╢рзНржи ржнрж╛ржЗ!** тАФ ржПржЯрж╛рзЯ ржЕржирзЗржХрзЗржЗ ржнрзБрж▓ ржХрж░рзЗред
**ржпржжрж┐ `{ id: 3, name: "Mominul" }` ржЖржЧрзЗржЗ array-рждрзЗ ржерж╛ржХрзЗ**, рждржЦржи ржЖржорж░рж╛ ржЪрж╛ржЗ ржирж╛ **same object ржЖржмрж╛рж░ ржпрзЛржЧ рж╣рзЛржХ** (duplicate рж╣рзЯрзЗ ржпрж╛рзЯ)ред

ЁЯСЙ ржПржЗ ржЬржирзНржп ржЖржорж░рж╛ ржЖржЧрзЗ **check** ржХрж░ржмрзЛ ржпрзЗ object ржЯрж┐ ржЖржЧрзЗржЗ ржЖржЫрзЗ ржХрж┐ржирж╛ тАФ рждрж╛рж░ржкрж░ **add** ржХрж░ржмрзЛ ржирж╛ ржХрж░ржмрзЛ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирзЗржмрзЛред

---

### ЁЯЪА ржХрж┐ржнрж╛ржмрзЗ check ржХрж░ржмрзЛ?

#### Option 1я╕ПтГг: `some()` method ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ:

```js
setUsers((prevUsers) => {
  const exists = prevUsers.some((user) => user.id === newUser.id);

  if (exists) {
    return prevUsers; // ржЖржЧрзЗржЗ ржЖржЫрзЗ, ржХрж┐ржЫрзБ ржХрж░ржмрзЛ ржирж╛
  }

  // ржирж╛ ржерж╛ржХрж▓рзЗ ржирждрзБржиржЯрж╛ ржпрзЛржЧ ржХрж░ржмрзЛ
  return [...prevUsers, newUser];
});
```

ЁЯСЙ **`some()`** method ржЪрзЗржХ ржХрж░рзЗ **array-рждрзЗ ржПржоржи ржХрзЛржирзЛ item ржЖржЫрзЗ ржХрж┐ржирж╛ ржпрж╛ condition match ржХрж░рзЗ**ред

---

### ЁЯТ╗ Complete Example:

```jsx
const newUser = { id: 3, name: "Mominul" };

setUsers((prevUsers) => {
  const exists = prevUsers.some((user) => user.id === newUser.id);

  if (exists) {
    console.log("User already exists!");
    return prevUsers;
  }

  console.log("Adding new user...");
  return [...prevUsers, newUser];
});
```

---

### ЁЯзСтАНЁЯПл рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзЛ:

тЬЕ ржкрзБрж░ржирзЛ array-ржПрж░ ржоржзрзНржпрзЗ check ржХрж░ржмрзЗ:

```js
array.some((item) => item.id === newItem.id);
```

тЬЕ ржпржжрж┐ **ржирж╛ ржерж╛ржХрзЗ тЖТ add ржХрж░рзЛ**
тЬЕ ржпржжрж┐ **ржерж╛ржХрзЗ тЖТ ржЖржЧрзЗрж░ржЯрж╛ржЗ рж░рж╛ржЦрзЛ**

---

### тЪая╕П Practical Tip:

ЁЯСЙ ржПржЗржЯрж╛ржХрзЗ рждрзБржорж┐ **utility function** рж╣рж┐рж╕рзЗржмрзЗржУ рж▓рж┐ржЦрждрзЗ ржкрж╛рж░рзЛ:

```js
const addUniqueUser = (newUser) => {
  setUsers((prevUsers) => {
    const exists = prevUsers.some((user) => user.id === newUser.id);
    return exists ? prevUsers : [...prevUsers, newUser];
  });
};
```

---

### ЁЯФН Summary:

ЁЯСЙ **"object already ache kina?" check korte `some()` best way**
ЁЯСЙ рждрж╛рж░ржкрж░ safe ржХрж░рзЗ add ржХрж░ржмрзЗред

---

### рждрзЛржорж╛рж░ `AddToFavourite` button ржП ржПржЗ pattern ржЯрж╛ use ржХрж░рж▓рзЗ **duplicate area** ржЖрж░ рж╣ржмрзЗ ржирж╛!

ржпржжрж┐ ржЪрж╛ржУ, ржЖржорж┐ рждрзЛржорж╛рж░ `AddToFavourite` ржПрж░ ржЬржирзНржп ready ржХрж░рзЗ full optimized version рж▓рж┐ржЦрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ тАФ ржПржХржжржо тЬЕ **real-life** way рждрзЗред

**ржмрж▓рж▓рзЗржЗ ржжрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ред** ЁЯЪАтЬЕ
рждрзЛржорж╛рж░ ржХрзЛржбрзЗ рж╢рзБржзрзБ `setAreaNames` ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрзБ logic ржмрж╕рж┐рзЯрзЗ ржжрж┐ржмрзЛ тАФ ржПржХржжржо bug free рж╣ржмрзЗред
ржЪрж╛ржУ? тнРя╕ПтЬЕ

---

---

You asked a great question!
You are seeing this code:

```js
const [favData, setFavData] = useState(() => {
  const storedFavData = localStorage.getItem("favData");
  return storedFavData ? JSON.parse(storedFavData) : [];
});
```

ЁЯСЙ You asked: **Why use a callback here? Why not just:**

```js
const [favData, setFavData] = useState(
  localStorage.getItem("favData")
    ? JSON.parse(localStorage.getItem("favData"))
    : []
);
```

---

### Answer step by step:

---

### Step 1я╕ПтГг How `useState` works

тЬЕ Normally you do:

```js
const [count, setCount] = useState(0);
```

ЁЯСЙ Here you pass **the value `0` directly**.
React will set `count = 0` on first render.

---

### Step 2я╕ПтГг What if value needs to be **calculated**?

ЁЯСЙ Now look at this:

```js
localStorage.getItem("favData");
```

ЁЯСЙ This is a **function call** тЖТ it can take time.

ЁЯСЙ If you do this:

```js
const [favData, setFavData] = useState(
  localStorage.getItem("favData")
    ? JSON.parse(localStorage.getItem("favData"))
    : []
);
```

тЭМ **Problem:** `localStorage.getItem()` will run **every time** the component renders, even if React is re-rendering because of some other reason.

ЁЯСЙ But we only need to load localStorage **once**, when component first mounts.

---

### Step 3я╕ПтГг React supports **lazy initialization**

тЬЕ React `useState` lets you pass a **function** instead of a value:

```js
const [favData, setFavData] = useState(() => {
  // This function will run ONLY on first render
  const storedFavData = localStorage.getItem("favData");
  return storedFavData ? JSON.parse(storedFavData) : [];
});
```

тЬЕ If you pass a function (`()=>{}`), React will:

- Call the function once тЖТ get the initial value
- Not call it again on re-renders

тЬЕ This is called **lazy initialization** тАФ load heavy data only once.

---

### Summary:

| Without callback                           | With callback (lazy initialization) |
| ------------------------------------------ | ----------------------------------- |
| `localStorage.getItem()` runs every render | Runs only once, first time          |
| Slightly slower, unnecessary work          | More efficient                      |
| Works fine, but not best practice          | Recommended for expensive reads     |

---

### Final simple rule:

тЬЕ If your initial value is **static**, just pass value:

```js
useState(0);
useState([]);
```

тЬЕ If your initial value is **calculated from something (API, localStorage, etc)** тЖТ use a function:

```js
useState(() => {
  // heavy or async calculation here
});
```

---

### In Bangla (for you):

ЁЯСЙ **Direct value ржжрж┐рж▓рзЗ** React ржмрж╛рж░ржмрж╛рж░ рж╕рзЗржЗ value calculate ржХрж░рзЗред
ЁЯСЙ **function ржжрж┐рж▓рзЗ** React рж╢рзБржзрзБ **ржкрзНрж░ржержоржмрж╛рж░** рж╕рзЗржЗ function call ржХрж░рзЗ тАФ efficient.
ЁЯСЙ рждрж╛ржЗ localStorage ржерзЗржХрзЗ data load ржХрж░рж╛рж░ ржЬржирзНржп function ржжрзЗржУрзЯрж╛ ржнрж╛рж▓рзЛред

---

## If you want, I can also show you a **simple demo** where you can see the difference (with console.log). Want to see? ЁЯЪА It will make it even clearer. Just say: **"show demo"**. тЬЕ

---

---

рждрзБржорж┐ ржЦрзБржм ржнрж╛рж▓рзЛ ржкрзНрж░рж╢рзНржи ржХрж░рзЗржЫрзЛред ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрзБржЭрж╛ржЗ:

---

### ЁЯЯв рждрзЛржорж╛рж░ ржХрзЛржб:

```js
useEffect(() => {
  localStorage.setItem("favData", JSON.stringify(favData));
}, [favData]);
```

ЁЯСЙ ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ: **favData ржпржЦржиржЗ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржмрзЗ (add/remove), рждржЦржиржЗ localStorage-ржП ржирждрзБржи ржХрж░рзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржмрзЗред**

---

### ЁЯФ╡ Browser API (localStorage.setItem)

тЬЕ `localStorage.setItem(key, value)`:

- ржпржжрж┐ **favData ржирж╛ржорзЗ ржбрж╛ржЯрж╛ ржЖржЧрзЗржЗ ржерж╛ржХрзЗ** тЖТ browser **puraton ta replace kore**ред
- ржпржжрж┐ **favData ржирж╛ ржерж╛ржХрзЗ** тЖТ ржирждрзБржи **favData** key рждрзИрж░рж┐ рж╣рзЯред

ЁЯСЙ localStorage ржПржоржи ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ: **key-value pair** store ржХрж░рзЗред
ЁЯСЙ **ржПржХржЗ key-рждрзЗ ржирждрзБржи value ржжрж┐рж▓рзЗ, ржкрзБрж░ржирзЛржЯрж╛ replace рж╣рзЯрзЗ ржпрж╛рзЯред** overwrite рж╣рзЯ, ржирждрзБржи memory use рж╣рзЯ ржирж╛ред

---

### ржЙржжрж╛рж╣рж░ржг:

```js
localStorage.setItem("favData", "[1,2,3]");
```

ЁЯСЙ ржПржЦржи localStorage ржП:

```
favData = "[1,2,3]"
```

ржкрж░рзЗ:

```js
localStorage.setItem("favData", "[1,2,3,4]");
```

ЁЯСЙ browser ржкрзБрж░рж╛ржирзЛ **favData = "\[1,2,3]"** ржХрзЗ **replace** ржХрж░рзЗ ржирждрзБржи **"\[1,2,3,4]"** рж╕рзЗржЯ ржХрж░рзЗред

---

### ЁЯФ┤ рждрзЛржорж╛рж░ ржкрзНрж░рж╢рзНржи:

**"browser ржХрж┐ favData ржЖржЫрзЗ ржжрзЗржЦрзЗржЗ replace ржХрж░рзЗ? ржирж╛ржХрж┐ ржирждрзБржи favData ржжрзЗржпрж╝?"**

тЬЕ **Replace ржХрж░рзЗ**ред browser ржкрзБрж░рж╛рждржи value delete ржХрж░рзЗ ржирждрзБржи value **set** ржХрж░рзЗред
тЬЕ ржкрзБрж░рж╛рждржи value ржзрж░рзЗ рж░рзЗржЦрзЗ рж╢рзБржзрзБ **update ржХрж░рзЗ ржирж╛**ред ржкрзБрж░рж╛рждржи value ржкрзБрж░рзЛржЯрж╛ржЗ **replace** рж╣ржпрж╝ред

ЁЯСЙ **рждрзБржорж┐ ржпржжрж┐ ржирждрзБржи favData ржкрж╛ржарж╛ржУ, browser ржкрзБрж░рж╛рждржиржЯрж╛ ржорзБржЫрзЗ ржжрж┐рзЯрзЗ ржирждрзБржиржЯрж╛ржЗ рж░рж╛ржЦрзЗред**

---

### ЁЯЪй рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝:

- рждрзБржорж┐ ржпржЦржи **setFavData()** ржжрж┐ржпрж╝рзЗ React-ржПрж░ state update ржХрж░рзЛ тЖТ ржирждрзБржи **favData** рждрзИрж░рж┐ рж╣ржпрж╝ред
- рждрж╛рж░ржкрж░ **useEffect** ржПрж░ ржорж╛ржзрзНржпржорзЗ ржирждрзБржи **favData** ржХрзЗ browser ржПрж░ **localStorage** ржП **purano ta replace kore** ржирждрзБржи data рж╕рзЗржЯ ржХрж░рзЗред
- localStorage API ржПрж░ ржХрж╛ржЬ тЖТ **ржкрзБрж░рж╛рждржи value ржХрзЗ replace ржХрж░рж╛** (update ржиржпрж╝, ржкрзБрж░рж╛рждржиржЯрж╛ржХрзЗ ржкрзБрж░рзЛржкрзБрж░рж┐ рж╕рж░рж┐ржпрж╝рзЗ ржирждрзБржиржЯрж╛ ржмрж╕рж╛ржирзЛ)ред

---

### ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржирж┐рзЯржо:

тЬЕ **localStorage.setItem тЖТ ржкрзБрж░рж╛рждржи value ржХрзЗ replace ржХрж░рзЗ**ред
тЬЕ **ржирждрзБржи favData ржЖрж╕рж▓рзЗ localStorage рждрзЗ ржирждрзБржиржнрж╛ржмрзЗ save рж╣рзЯред ржкрзБрж░ржирзЛржЯрж╛ ржорзБржЫрзЗ ржпрж╛рзЯред**
тЬЕ ржПржЗ ржХрж╛ржЬ browser ржирж┐ржЬрзЗржЗ ржХрж░рзЗ тАФ рждрзЛржорж╛ржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржХрж┐ржЫрзБ ржХрж░рждрзЗ рж╣рзЯ ржирж╛ред

---

ЁЯСЙ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржХржжржо ржЫрзЛржЯ ржПржХржЯрж╛ example code ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рж┐, ржпрзЗржЦрж╛ржирзЗ console.log ржжрж┐ржпрж╝рзЗ ржжрзЗржЦрж╛ржмрзЗ browser ржХрж┐ржнрж╛ржмрзЗ replace ржХрж░рзЗред
**ржмрж▓рзЛ "example chai", ржжрзЗржЦрж┐рзЯрзЗ ржжрж┐ржмрзЛред** ЁЯЪАтЬЕ ржмрзБржЭрж╛ ржЖрж░рзЛ рж╕рж╣ржЬ рж╣ржмрзЗред
